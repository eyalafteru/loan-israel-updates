<script>
if (!document.querySelector('meta[name="viewport"]')) {
  const viewport = document.createElement('meta');
  viewport.name = 'viewport';
  viewport.content = 'width=device-width, initial-scale=1.0, user-scalable=yes';
  document.head.appendChild(viewport);
}
</script>

<style>
:root {
  --wpc-rvb-primary: #1e5490;
  --wpc-rvb-primary-dark: #163d6b;
  --wpc-rvb-primary-light: rgba(30, 84, 144, 0.1);
  --wpc-rvb-success: #10b981;
  --wpc-rvb-success-light: rgba(16, 185, 129, 0.1);
  --wpc-rvb-warning: #f59e0b;
  --wpc-rvb-danger: #ef4444;
  --wpc-rvb-text-dark: #1f2937;
  --wpc-rvb-text-light: #6b7280;
  --wpc-rvb-bg-light: #f8fafc;
  --wpc-rvb-white: #ffffff;
  --wpc-rvb-border: #e5e7eb;
  --wpc-rvb-shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
  --wpc-rvb-shadow-md: 0 4px 15px rgba(0,0,0,0.1);
  --wpc-rvb-radius-sm: 8px;
  --wpc-rvb-radius-md: 12px;
  --wpc-rvb-radius-lg: 20px;
  --wpc-rvb-transition: all 0.3s ease;
}

.wpc-calc-rvb-k7m2-wrapper {
  all: initial !important;
  display: block !important;
  font-family: 'Assistant', -apple-system, BlinkMacSystemFont, sans-serif !important;
  direction: rtl !important;
  color: var(--wpc-rvb-text-dark) !important;
  line-height: 1.6 !important;
  max-width: 1200px !important;
  margin: 0 auto !important;
  padding: 20px !important;
  box-sizing: border-box !important;
  color-scheme: light !important;
}

.wpc-calc-rvb-k7m2-wrapper * {
  box-sizing: border-box !important;
  font-family: inherit !important;
}

.wpc-calc-rvb-k7m2-title-section {
  text-align: center !important;
  margin-bottom: 30px !important;
}

.wpc-calc-rvb-k7m2-title {
  font-size: 2.2rem !important;
  font-weight: 700 !important;
  color: var(--wpc-rvb-primary) !important;
  margin: 0 0 10px 0 !important;
  position: relative !important;
  padding-right: 20px !important;
}

.wpc-calc-rvb-k7m2-title::after {
  content: '' !important;
  position: absolute !important;
  right: 0 !important;
  top: 50% !important;
  transform: translateY(-50%) !important;
  width: 5px !important;
  height: 60px !important;
  background: linear-gradient(180deg, var(--wpc-rvb-primary) 0%, var(--wpc-rvb-success) 100%) !important;
  border-radius: 3px !important;
}

.wpc-calc-rvb-k7m2-subtitle {
  font-size: 1rem !important;
  color: var(--wpc-rvb-text-light) !important;
  margin: 0 !important;
}

.wpc-calc-rvb-k7m2-update-date {
  display: inline-block !important;
  background: var(--wpc-rvb-primary-light) !important;
  color: var(--wpc-rvb-primary) !important;
  padding: 5px 15px !important;
  border-radius: 20px !important;
  font-size: 0.9rem !important;
  margin-top: 10px !important;
}

.wpc-calc-rvb-k7m2-calculator {
  background: var(--wpc-rvb-white) !important;
  border-radius: var(--wpc-rvb-radius-lg) !important;
  box-shadow: var(--wpc-rvb-shadow-md) !important;
  overflow: hidden !important;
  margin-bottom: 30px !important;
}

.wpc-calc-rvb-k7m2-tabs-nav {
  display: flex !important;
  flex-wrap: wrap !important;
  background: var(--wpc-rvb-bg-light) !important;
  border-bottom: 2px solid var(--wpc-rvb-border) !important;
}

.wpc-calc-rvb-k7m2-tab-btn {
  flex: 1 1 auto !important;
  min-width: 100px !important;
  padding: 16px 20px !important;
  background: transparent !important;
  border: none !important;
  cursor: pointer !important;
  font-size: 1rem !important;
  font-weight: 600 !important;
  color: var(--wpc-rvb-text-light) !important;
  transition: var(--wpc-rvb-transition) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 8px !important;
  border-bottom: 3px solid transparent !important;
  font-family: inherit !important;
}

.wpc-calc-rvb-k7m2-tab-btn:hover {
  background: var(--wpc-rvb-white) !important;
  color: var(--wpc-rvb-primary) !important;
}

.wpc-calc-rvb-k7m2-tab-btn.active {
  background: var(--wpc-rvb-white) !important;
  color: var(--wpc-rvb-primary) !important;
  border-bottom-color: var(--wpc-rvb-primary) !important;
}

.wpc-calc-rvb-k7m2-tab-icon {
  font-size: 1.3rem !important;
}

.wpc-calc-rvb-k7m2-tab-content {
  display: none !important;
  padding: 30px !important;
}

.wpc-calc-rvb-k7m2-tab-content.active {
  display: block !important;
}

.wpc-calc-rvb-k7m2-tab-title {
  font-size: 1.4rem !important;
  font-weight: 700 !important;
  color: var(--wpc-rvb-primary) !important;
  margin: 0 0 25px 0 !important;
  text-align: center !important;
}

.wpc-calc-rvb-k7m2-input-group {
  margin-bottom: 20px !important;
}

.wpc-calc-rvb-k7m2-input-label {
  display: block !important;
  font-size: 1rem !important;
  font-weight: 600 !important;
  color: var(--wpc-rvb-text-dark) !important;
  margin-bottom: 10px !important;
}

.wpc-calc-rvb-k7m2-slider-container {
  display: flex !important;
  align-items: center !important;
  gap: 15px !important;
}

.wpc-calc-rvb-k7m2-slider {
  flex: 1 !important;
  -webkit-appearance: none !important;
  appearance: none !important;
  height: 8px !important;
  background: var(--wpc-rvb-border) !important;
  border-radius: 4px !important;
  outline: none !important;
  cursor: pointer !important;
}

.wpc-calc-rvb-k7m2-slider::-webkit-slider-thumb {
  -webkit-appearance: none !important;
  appearance: none !important;
  width: 24px !important;
  height: 24px !important;
  background: var(--wpc-rvb-primary) !important;
  border-radius: 50% !important;
  cursor: pointer !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2) !important;
}

.wpc-calc-rvb-k7m2-slider::-moz-range-thumb {
  width: 24px !important;
  height: 24px !important;
  background: var(--wpc-rvb-primary) !important;
  border-radius: 50% !important;
  cursor: pointer !important;
  border: none !important;
}

.wpc-calc-rvb-k7m2-slider-value {
  min-width: 120px !important;
  padding: 12px 15px !important;
  background: var(--wpc-rvb-primary-light) !important;
  color: var(--wpc-rvb-primary) !important;
  border-radius: var(--wpc-rvb-radius-sm) !important;
  font-size: 1.1rem !important;
  font-weight: 700 !important;
  text-align: center !important;
}

.wpc-calc-rvb-k7m2-inputs-grid {
  display: grid !important;
  grid-template-columns: repeat(2, 1fr) !important;
  gap: 20px !important;
  margin-bottom: 25px !important;
}

.wpc-calc-rvb-k7m2-section-title {
  font-size: 1.2rem !important;
  font-weight: 700 !important;
  color: var(--wpc-rvb-primary) !important;
  margin: 25px 0 15px 0 !important;
  padding-bottom: 10px !important;
  border-bottom: 2px solid var(--wpc-rvb-border) !important;
}

.wpc-calc-rvb-k7m2-results {
  background: linear-gradient(135deg, var(--wpc-rvb-primary) 0%, var(--wpc-rvb-primary-dark) 100%) !important;
  border-radius: var(--wpc-rvb-radius-md) !important;
  padding: 25px !important;
  color: var(--wpc-rvb-white) !important;
  margin-top: 25px !important;
}

.wpc-calc-rvb-k7m2-results-title {
  font-size: 1.1rem !important;
  font-weight: 600 !important;
  margin: 0 0 20px 0 !important;
  text-align: center !important;
  opacity: 0.9 !important;
}

.wpc-calc-rvb-k7m2-results-grid {
  display: grid !important;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)) !important;
  gap: 20px !important;
}

.wpc-calc-rvb-k7m2-result-item {
  background: rgba(255,255,255,0.15) !important;
  border-radius: var(--wpc-rvb-radius-sm) !important;
  padding: 20px !important;
  text-align: center !important;
}

.wpc-calc-rvb-k7m2-result-label {
  font-size: 0.9rem !important;
  opacity: 0.9 !important;
  margin-bottom: 8px !important;
}

.wpc-calc-rvb-k7m2-result-value {
  font-size: 1.6rem !important;
  font-weight: 700 !important;
}

.wpc-calc-rvb-k7m2-result-value.highlight {
  color: #fbbf24 !important;
}

.wpc-calc-rvb-k7m2-result-value.buy {
  color: #4ade80 !important;
}

.wpc-calc-rvb-k7m2-result-value.rent {
  color: #f472b6 !important;
}

.wpc-calc-rvb-k7m2-comparison-cards {
  display: grid !important;
  grid-template-columns: 1fr 1fr !important;
  gap: 20px !important;
  margin-top: 25px !important;
}

.wpc-calc-rvb-k7m2-compare-card {
  background: var(--wpc-rvb-white) !important;
  border: 2px solid var(--wpc-rvb-border) !important;
  border-radius: var(--wpc-rvb-radius-md) !important;
  overflow: hidden !important;
}

.wpc-calc-rvb-k7m2-compare-header {
  padding: 15px 20px !important;
  text-align: center !important;
  font-weight: 700 !important;
  font-size: 1.1rem !important;
}

.wpc-calc-rvb-k7m2-compare-header.buy {
  background: var(--wpc-rvb-success-light) !important;
  color: var(--wpc-rvb-success) !important;
}

.wpc-calc-rvb-k7m2-compare-header.rent {
  background: rgba(244, 114, 182, 0.15) !important;
  color: #ec4899 !important;
}

.wpc-calc-rvb-k7m2-compare-body {
  padding: 20px !important;
}

.wpc-calc-rvb-k7m2-compare-row {
  display: flex !important;
  justify-content: space-between !important;
  padding: 10px 0 !important;
  border-bottom: 1px solid var(--wpc-rvb-border) !important;
}

.wpc-calc-rvb-k7m2-compare-row:last-child {
  border-bottom: none !important;
  font-weight: 700 !important;
  font-size: 1.1rem !important;
  padding-top: 15px !important;
  margin-top: 5px !important;
  border-top: 2px solid var(--wpc-rvb-border) !important;
}

.wpc-calc-rvb-k7m2-verdict {
  text-align: center !important;
  padding: 20px !important;
  margin-top: 25px !important;
  border-radius: var(--wpc-rvb-radius-md) !important;
  font-size: 1.3rem !important;
  font-weight: 700 !important;
}

.wpc-calc-rvb-k7m2-verdict.buy-wins {
  background: var(--wpc-rvb-success-light) !important;
  color: var(--wpc-rvb-success) !important;
  border: 2px solid var(--wpc-rvb-success) !important;
}

.wpc-calc-rvb-k7m2-verdict.rent-wins {
  background: rgba(244, 114, 182, 0.15) !important;
  color: #ec4899 !important;
  border: 2px solid #ec4899 !important;
}

.wpc-calc-rvb-k7m2-info-box {
  background: var(--wpc-rvb-primary-light) !important;
  border-right: 4px solid var(--wpc-rvb-primary) !important;
  padding: 15px 20px !important;
  border-radius: var(--wpc-rvb-radius-sm) !important;
  margin-top: 20px !important;
}

.wpc-calc-rvb-k7m2-info-title {
  font-weight: 700 !important;
  color: var(--wpc-rvb-primary) !important;
  margin-bottom: 5px !important;
}

.wpc-calc-rvb-k7m2-info-text {
  font-size: 0.95rem !important;
  color: var(--wpc-rvb-text-dark) !important;
  line-height: 1.6 !important;
}

.wpc-calc-rvb-k7m2-timeline {
  margin-top: 25px !important;
}

.wpc-calc-rvb-k7m2-timeline-item {
  display: flex !important;
  align-items: center !important;
  padding: 15px !important;
  background: var(--wpc-rvb-white) !important;
  border: 1px solid var(--wpc-rvb-border) !important;
  border-radius: var(--wpc-rvb-radius-sm) !important;
  margin-bottom: 10px !important;
  gap: 20px !important;
}

.wpc-calc-rvb-k7m2-timeline-year {
  min-width: 80px !important;
  font-size: 1.2rem !important;
  font-weight: 700 !important;
  color: var(--wpc-rvb-primary) !important;
}

.wpc-calc-rvb-k7m2-timeline-values {
  flex: 1 !important;
  display: flex !important;
  gap: 30px !important;
}

.wpc-calc-rvb-k7m2-timeline-value {
  text-align: center !important;
}

.wpc-calc-rvb-k7m2-timeline-value span {
  display: block !important;
  font-size: 0.85rem !important;
  color: var(--wpc-rvb-text-light) !important;
}

.wpc-calc-rvb-k7m2-timeline-value strong {
  font-size: 1.1rem !important;
}

.wpc-calc-rvb-k7m2-timeline-value.buy strong {
  color: var(--wpc-rvb-success) !important;
}

.wpc-calc-rvb-k7m2-timeline-value.rent strong {
  color: #ec4899 !important;
}

.wpc-calc-rvb-k7m2-timeline-winner {
  padding: 5px 15px !important;
  border-radius: 20px !important;
  font-size: 0.9rem !important;
  font-weight: 600 !important;
}

.wpc-calc-rvb-k7m2-timeline-winner.buy {
  background: var(--wpc-rvb-success-light) !important;
  color: var(--wpc-rvb-success) !important;
}

.wpc-calc-rvb-k7m2-timeline-winner.rent {
  background: rgba(244, 114, 182, 0.15) !important;
  color: #ec4899 !important;
}

.wpc-calc-rvb-k7m2-breakeven-display {
  text-align: center !important;
  padding: 40px !important;
  background: linear-gradient(135deg, var(--wpc-rvb-primary) 0%, var(--wpc-rvb-primary-dark) 100%) !important;
  border-radius: var(--wpc-rvb-radius-md) !important;
  color: var(--wpc-rvb-white) !important;
  margin: 25px 0 !important;
}

.wpc-calc-rvb-k7m2-breakeven-years {
  font-size: 4rem !important;
  font-weight: 700 !important;
  color: #fbbf24 !important;
}

.wpc-calc-rvb-k7m2-breakeven-label {
  font-size: 1.2rem !important;
  margin-top: 10px !important;
  opacity: 0.9 !important;
}

.wpc-calc-rvb-k7m2-awg-section {
  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%) !important;
  border-radius: var(--wpc-rvb-radius-lg) !important;
  padding: 30px !important;
  margin: 30px 0 !important;
  text-align: center !important;
}

.wpc-calc-rvb-k7m2-awg-title {
  font-size: 1.5rem !important;
  font-weight: 700 !important;
  color: var(--wpc-rvb-primary) !important;
  margin: 0 0 20px 0 !important;
}

.wpc-calc-rvb-k7m2-cta-buttons {
  display: flex !important;
  flex-wrap: wrap !important;
  gap: 15px !important;
  justify-content: center !important;
  margin-bottom: 20px !important;
}

.wpc-calc-rvb-k7m2-cta-btn {
  padding: 15px 30px !important;
  border-radius: 50px !important;
  font-size: 1.1rem !important;
  font-weight: 600 !important;
  border: none !important;
  cursor: pointer !important;
  transition: var(--wpc-rvb-transition) !important;
  font-family: inherit !important;
}

.wpc-calc-rvb-k7m2-cta-btn.primary {
  background: linear-gradient(135deg, var(--wpc-rvb-danger) 0%, #dc2626 100%) !important;
  color: var(--wpc-rvb-white) !important;
}

.wpc-calc-rvb-k7m2-cta-btn.secondary {
  background: linear-gradient(135deg, var(--wpc-rvb-success) 0%, #059669 100%) !important;
  color: var(--wpc-rvb-white) !important;
}

.wpc-calc-rvb-k7m2-cta-btn:hover {
  transform: translateY(-2px) !important;
  box-shadow: var(--wpc-rvb-shadow-md) !important;
}

.wpc-calc-rvb-k7m2-awg-content {
  display: none !important;
  margin-top: 20px !important;
  padding: 20px !important;
  background: var(--wpc-rvb-white) !important;
  border-radius: var(--wpc-rvb-radius-md) !important;
}

.wpc-calc-rvb-k7m2-awg-content.active {
  display: block !important;
}

.wpc-calc-rvb-k7m2-faq-section {
  margin: 40px 0 !important;
}

.wpc-calc-rvb-k7m2-faq-item {
  background: var(--wpc-rvb-white) !important;
  border: 1px solid var(--wpc-rvb-border) !important;
  border-radius: var(--wpc-rvb-radius-md) !important;
  margin-bottom: 12px !important;
  overflow: hidden !important;
}

.wpc-calc-rvb-k7m2-faq-header {
  padding: 18px 20px !important;
  cursor: pointer !important;
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
  background: var(--wpc-rvb-bg-light) !important;
  transition: var(--wpc-rvb-transition) !important;
}

.wpc-calc-rvb-k7m2-faq-header:hover {
  background: var(--wpc-rvb-primary-light) !important;
}

.wpc-calc-rvb-k7m2-faq-question {
  font-size: 1rem !important;
  font-weight: 600 !important;
  color: var(--wpc-rvb-text-dark) !important;
}

.wpc-calc-rvb-k7m2-faq-icon {
  font-size: 1.2rem !important;
  transition: var(--wpc-rvb-transition) !important;
  color: var(--wpc-rvb-primary) !important;
}

.wpc-calc-rvb-k7m2-faq-item.active .wpc-calc-rvb-k7m2-faq-icon {
  transform: rotate(180deg) !important;
}

.wpc-calc-rvb-k7m2-faq-answer {
  display: none !important;
  padding: 20px !important;
  font-size: 0.95rem !important;
  line-height: 1.7 !important;
  color: var(--wpc-rvb-text-dark) !important;
}

.wpc-calc-rvb-k7m2-faq-item.active .wpc-calc-rvb-k7m2-faq-answer {
  display: block !important;
}

.wpc-calc-rvb-k7m2-content-section {
  background: var(--wpc-rvb-white) !important;
  border-radius: var(--wpc-rvb-radius-lg) !important;
  padding: 40px !important;
  margin: 40px 0 !important;
  box-shadow: var(--wpc-rvb-shadow-sm) !important;
}

.wpc-calc-rvb-k7m2-content-title {
  font-size: 1.6rem !important;
  font-weight: 700 !important;
  color: var(--wpc-rvb-primary) !important;
  margin: 0 0 20px 0 !important;
}

.wpc-calc-rvb-k7m2-content-text {
  font-size: 1rem !important;
  line-height: 1.8 !important;
  color: var(--wpc-rvb-text-dark) !important;
  margin-bottom: 20px !important;
}

.wpc-calc-rvb-k7m2-embed-section {
  background: var(--wpc-rvb-white) !important;
  border-radius: var(--wpc-rvb-radius-lg) !important;
  padding: 40px !important;
  margin: 40px 0 !important;
  box-shadow: var(--wpc-rvb-shadow-sm) !important;
}

.wpc-calc-rvb-k7m2-embed-btn {
  display: inline-flex !important;
  align-items: center !important;
  gap: 10px !important;
  padding: 18px 40px !important;
  background: linear-gradient(135deg, var(--wpc-rvb-success) 0%, #059669 100%) !important;
  color: var(--wpc-rvb-white) !important;
  border: none !important;
  border-radius: 50px !important;
  font-size: 1.2rem !important;
  font-weight: 600 !important;
  cursor: pointer !important;
  transition: var(--wpc-rvb-transition) !important;
  font-family: inherit !important;
}

.wpc-calc-rvb-k7m2-embed-btn:hover {
  transform: translateY(-2px) !important;
  box-shadow: var(--wpc-rvb-shadow-md) !important;
}

.wpc-calc-rvb-k7m2-color-picker {
  display: flex !important;
  flex-wrap: wrap !important;
  justify-content: center !important;
  gap: 12px !important;
  margin: 25px 0 !important;
}

.wpc-calc-rvb-k7m2-color-btn {
  width: 50px !important;
  height: 50px !important;
  border-radius: 50% !important;
  border: 3px solid var(--wpc-rvb-white) !important;
  cursor: pointer !important;
  transition: var(--wpc-rvb-transition) !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2) !important;
}

.wpc-calc-rvb-k7m2-color-btn:hover {
  transform: scale(1.15) !important;
}

.wpc-calc-rvb-k7m2-color-btn.active {
  border-color: #333 !important;
  transform: scale(1.2) !important;
}

.wpc-calc-rvb-k7m2-preview-container {
  background: var(--wpc-rvb-bg-light) !important;
  border: 2px solid var(--wpc-rvb-border) !important;
  border-radius: var(--wpc-rvb-radius-md) !important;
  padding: 20px !important;
  margin-top: 25px !important;
}

@media (max-width: 768px) {
  .wpc-calc-rvb-k7m2-wrapper { padding: 15px !important; }
  .wpc-calc-rvb-k7m2-title { font-size: 1.6rem !important; }
  .wpc-calc-rvb-k7m2-tab-btn { flex: 1 1 45% !important; min-width: auto !important; padding: 12px 10px !important; font-size: 0.9rem !important; }
  .wpc-calc-rvb-k7m2-tab-content { padding: 20px 15px !important; }
  .wpc-calc-rvb-k7m2-inputs-grid { grid-template-columns: 1fr !important; }
  .wpc-calc-rvb-k7m2-comparison-cards { grid-template-columns: 1fr !important; }
  .wpc-calc-rvb-k7m2-results-grid { grid-template-columns: 1fr !important; }
  .wpc-calc-rvb-k7m2-timeline-values { flex-wrap: wrap !important; gap: 15px !important; }
  .wpc-calc-rvb-k7m2-cta-buttons { flex-direction: column !important; }
}

@media (max-width: 480px) {
  .wpc-calc-rvb-k7m2-title { font-size: 1.4rem !important; }
  .wpc-calc-rvb-k7m2-tab-btn { font-size: 0.85rem !important; padding: 10px 8px !important; }
  .wpc-calc-rvb-k7m2-tab-icon { display: none !important; }
  .wpc-calc-rvb-k7m2-result-value { font-size: 1.3rem !important; }
  .wpc-calc-rvb-k7m2-slider-value { min-width: 100px !important; font-size: 0.95rem !important; }
  .wpc-calc-rvb-k7m2-breakeven-years { font-size: 3rem !important; }
  .wpc-calc-rvb-k7m2-content-section, .wpc-calc-rvb-k7m2-embed-section { padding: 25px 15px !important; }
}
</style>

<div class="wpc-calc-rvb-k7m2-wrapper" id="wpc-calc-rvb-k7m2-main">
  
  <!-- Title Section -->
  <div class="wpc-calc-rvb-k7m2-title-section">
    <h1 class="wpc-calc-rvb-k7m2-title">××—×©×‘×•×Ÿ ×©×›×™×¨×•×ª ××•×œ ×¨×›×™×©×ª ×“×™×¨×” 2025</h1>
    <p class="wpc-calc-rvb-k7m2-subtitle">×”×©×•×•××” ×¤×™× × ×¡×™×ª ××§×™×¤×” - ××” ×¢×“×™×£: ×œ×©×›×•×¨ ×•×œ×”×©×§×™×¢ ××• ×œ×§× ×•×ª ×“×™×¨×”?</p>
    <span class="wpc-calc-rvb-k7m2-update-date">ğŸ“… ×¢×•×“×›×Ÿ: ×“×¦××‘×¨ 2025 | ×›×•×œ×œ ××¡ ×©×‘×— ×•×¨×•×•×—×™ ×”×•×Ÿ</span>
  </div>

  <!-- Calculator -->
  <div class="wpc-calc-rvb-k7m2-calculator" id="wpc-calc-rvb-k7m2-calculator">
    
    <!-- Tabs Navigation -->
    <div class="wpc-calc-rvb-k7m2-tabs-nav">
      <button class="wpc-calc-rvb-k7m2-tab-btn active" data-action="switch-tab" data-tab="compare">
        <span class="wpc-calc-rvb-k7m2-tab-icon">âš–ï¸</span>
        <span>×”×©×•×•××”</span>
      </button>
      <button class="wpc-calc-rvb-k7m2-tab-btn" data-action="switch-tab" data-tab="timeline">
        <span class="wpc-calc-rvb-k7m2-tab-icon">ğŸ“ˆ</span>
        <span>×¦×™×¨ ×–××Ÿ</span>
      </button>
      <button class="wpc-calc-rvb-k7m2-tab-btn" data-action="switch-tab" data-tab="maxrent">
        <span class="wpc-calc-rvb-k7m2-tab-icon">ğŸ </span>
        <span>×©×›"×“ ×’×’</span>
      </button>
    </div>

    <!-- Tab 1: Basic Comparison -->
    <div class="wpc-calc-rvb-k7m2-tab-content active" id="tab-compare">
      <h2 class="wpc-calc-rvb-k7m2-tab-title">×”×©×•×•××ª ×©×›×™×¨×•×ª ××•×œ ×¨×›×™×©×”</h2>
      
      <h3 class="wpc-calc-rvb-k7m2-section-title">ğŸ  × ×ª×•× ×™ ×”× ×›×¡</h3>
      <div class="wpc-calc-rvb-k7m2-inputs-grid">
        <div class="wpc-calc-rvb-k7m2-input-group">
          <label class="wpc-calc-rvb-k7m2-input-label">ğŸ’° ××—×™×¨ ×”×“×™×¨×” (â‚ª)</label>
          <div class="wpc-calc-rvb-k7m2-slider-container">
            <input type="range" class="wpc-calc-rvb-k7m2-slider" id="property-price-slider" min="500000" max="10000000" step="50000" value="2500000">
            <div class="wpc-calc-rvb-k7m2-slider-value" id="property-price-value">â‚ª2,500,000</div>
          </div>
        </div>
        <div class="wpc-calc-rvb-k7m2-input-group">
          <label class="wpc-calc-rvb-k7m2-input-label">ğŸ’µ ×”×•×Ÿ ×¢×¦××™ (â‚ª)</label>
          <div class="wpc-calc-rvb-k7m2-slider-container">
            <input type="range" class="wpc-calc-rvb-k7m2-slider" id="equity-slider" min="100000" max="5000000" step="50000" value="625000">
            <div class="wpc-calc-rvb-k7m2-slider-value" id="equity-value">â‚ª625,000</div>
          </div>
        </div>
      </div>

      <h3 class="wpc-calc-rvb-k7m2-section-title">ğŸ¦ × ×ª×•× ×™ ××©×›× ×ª×</h3>
      <div class="wpc-calc-rvb-k7m2-inputs-grid">
        <div class="wpc-calc-rvb-k7m2-input-group">
          <label class="wpc-calc-rvb-k7m2-input-label">ğŸ“Š ×¨×™×‘×™×ª ××©×›× ×ª× ×©× ×ª×™×ª (%)</label>
          <div class="wpc-calc-rvb-k7m2-slider-container">
            <input type="range" class="wpc-calc-rvb-k7m2-slider" id="mortgage-rate-slider" min="2" max="8" step="0.1" value="4.5">
            <div class="wpc-calc-rvb-k7m2-slider-value" id="mortgage-rate-value">4.5%</div>
          </div>
        </div>
        <div class="wpc-calc-rvb-k7m2-input-group">
          <label class="wpc-calc-rvb-k7m2-input-label">ğŸ“… ×ª×§×•×¤×ª ×”××©×›× ×ª× (×©× ×™×)</label>
          <div class="wpc-calc-rvb-k7m2-slider-container">
            <input type="range" class="wpc-calc-rvb-k7m2-slider" id="mortgage-term-slider" min="10" max="30" step="1" value="25">
            <div class="wpc-calc-rvb-k7m2-slider-value" id="mortgage-term-value">25 ×©× ×™×</div>
          </div>
        </div>
      </div>

      <h3 class="wpc-calc-rvb-k7m2-section-title">ğŸ”‘ × ×ª×•× ×™ ×©×›×™×¨×•×ª</h3>
      <div class="wpc-calc-rvb-k7m2-inputs-grid">
        <div class="wpc-calc-rvb-k7m2-input-group">
          <label class="wpc-calc-rvb-k7m2-input-label">ğŸ  ×©×›×¨ ×“×™×¨×” ×—×•×“×©×™ (â‚ª)</label>
          <div class="wpc-calc-rvb-k7m2-slider-container">
            <input type="range" class="wpc-calc-rvb-k7m2-slider" id="rent-slider" min="2000" max="20000" step="100" value="6000">
            <div class="wpc-calc-rvb-k7m2-slider-value" id="rent-value">â‚ª6,000</div>
          </div>
        </div>
        <div class="wpc-calc-rvb-k7m2-input-group">
          <label class="wpc-calc-rvb-k7m2-input-label">ğŸ“ˆ ×¢×œ×™×™×ª ×©×›"×“ ×©× ×ª×™×ª (%)</label>
          <div class="wpc-calc-rvb-k7m2-slider-container">
            <input type="range" class="wpc-calc-rvb-k7m2-slider" id="rent-increase-slider" min="0" max="5" step="0.5" value="2">
            <div class="wpc-calc-rvb-k7m2-slider-value" id="rent-increase-value">2%</div>
          </div>
        </div>
      </div>

      <h3 class="wpc-calc-rvb-k7m2-section-title">ğŸ“Š ×”× ×—×•×ª ×©×•×§</h3>
      <div class="wpc-calc-rvb-k7m2-inputs-grid">
        <div class="wpc-calc-rvb-k7m2-input-group">
          <label class="wpc-calc-rvb-k7m2-input-label">ğŸ“ˆ ×ª×©×•××ª ×”×©×§×¢×” ×©× ×ª×™×ª (%)</label>
          <div class="wpc-calc-rvb-k7m2-slider-container">
            <input type="range" class="wpc-calc-rvb-k7m2-slider" id="investment-return-slider" min="3" max="12" step="0.5" value="7">
            <div class="wpc-calc-rvb-k7m2-slider-value" id="investment-return-value">7%</div>
          </div>
        </div>
        <div class="wpc-calc-rvb-k7m2-input-group">
          <label class="wpc-calc-rvb-k7m2-input-label">ğŸ  ×¢×œ×™×™×ª ×¢×¨×š × ×“×œ"×Ÿ ×©× ×ª×™×ª (%)</label>
          <div class="wpc-calc-rvb-k7m2-slider-container">
            <input type="range" class="wpc-calc-rvb-k7m2-slider" id="property-appreciation-slider" min="0" max="8" step="0.5" value="3">
            <div class="wpc-calc-rvb-k7m2-slider-value" id="property-appreciation-value">3%</div>
          </div>
        </div>
      </div>

      <div class="wpc-calc-rvb-k7m2-input-group">
        <label class="wpc-calc-rvb-k7m2-input-label">ğŸ“… ×ª×§×•×¤×ª ×”×”×©×•×•××” (×©× ×™×)</label>
        <div class="wpc-calc-rvb-k7m2-slider-container">
          <input type="range" class="wpc-calc-rvb-k7m2-slider" id="comparison-years-slider" min="5" max="30" step="1" value="15">
          <div class="wpc-calc-rvb-k7m2-slider-value" id="comparison-years-value">15 ×©× ×™×</div>
        </div>
      </div>

      <!-- Results -->
      <div class="wpc-calc-rvb-k7m2-results">
        <h3 class="wpc-calc-rvb-k7m2-results-title">ğŸ“Š ×ª×•×¦××•×ª ×”×”×©×•×•××”</h3>
        <div class="wpc-calc-rvb-k7m2-results-grid">
          <div class="wpc-calc-rvb-k7m2-result-item">
            <div class="wpc-calc-rvb-k7m2-result-label">ğŸ  ×”×•×Ÿ × ×˜×• ×‘×¨×›×™×©×”</div>
            <div class="wpc-calc-rvb-k7m2-result-value buy" id="result-buy-wealth">â‚ª0</div>
          </div>
          <div class="wpc-calc-rvb-k7m2-result-item">
            <div class="wpc-calc-rvb-k7m2-result-label">ğŸ”‘ ×”×•×Ÿ × ×˜×• ×‘×©×›×™×¨×•×ª</div>
            <div class="wpc-calc-rvb-k7m2-result-value rent" id="result-rent-wealth">â‚ª0</div>
          </div>
          <div class="wpc-calc-rvb-k7m2-result-item">
            <div class="wpc-calc-rvb-k7m2-result-label">ğŸ“Š ×”×¤×¨×©</div>
            <div class="wpc-calc-rvb-k7m2-result-value highlight" id="result-difference">â‚ª0</div>
          </div>
        </div>
      </div>

      <!-- Comparison Cards -->
      <div class="wpc-calc-rvb-k7m2-comparison-cards">
        <div class="wpc-calc-rvb-k7m2-compare-card">
          <div class="wpc-calc-rvb-k7m2-compare-header buy">ğŸ  ×ª×¨×—×™×© ×¨×›×™×©×”</div>
          <div class="wpc-calc-rvb-k7m2-compare-body">
            <div class="wpc-calc-rvb-k7m2-compare-row"><span>×©×•×•×™ ×”× ×›×¡ ×”×¢×ª×™×“×™:</span><span id="buy-future-value">â‚ª0</span></div>
            <div class="wpc-calc-rvb-k7m2-compare-row"><span>×™×ª×¨×ª ××©×›× ×ª×:</span><span id="buy-mortgage-balance">â‚ª0</span></div>
            <div class="wpc-calc-rvb-k7m2-compare-row"><span>×¢×œ×•×™×•×ª ×¨×›×™×©×”:</span><span id="buy-purchase-costs">â‚ª0</span></div>
            <div class="wpc-calc-rvb-k7m2-compare-row"><span>×¨×™×‘×™×ª ×©×©×•×œ××”:</span><span id="buy-interest-paid">â‚ª0</span></div>
            <div class="wpc-calc-rvb-k7m2-compare-row"><span>×ª×—×–×•×§×”:</span><span id="buy-maintenance">â‚ª0</span></div>
            <div class="wpc-calc-rvb-k7m2-compare-row"><span>×”×•×Ÿ × ×˜×•:</span><span id="buy-net-wealth">â‚ª0</span></div>
          </div>
        </div>
        <div class="wpc-calc-rvb-k7m2-compare-card">
          <div class="wpc-calc-rvb-k7m2-compare-header rent">ğŸ”‘ ×ª×¨×—×™×© ×©×›×™×¨×•×ª</div>
          <div class="wpc-calc-rvb-k7m2-compare-body">
            <div class="wpc-calc-rvb-k7m2-compare-row"><span>×”×©×§×¢×ª ×”×•×Ÿ ×¢×¦××™:</span><span id="rent-initial-investment">â‚ª0</span></div>
            <div class="wpc-calc-rvb-k7m2-compare-row"><span>×—×™×¡×›×•×Ÿ ×—×•×“×©×™:</span><span id="rent-monthly-savings">â‚ª0</span></div>
            <div class="wpc-calc-rvb-k7m2-compare-row"><span>×©×›"×“ ×©×©×•×œ×:</span><span id="rent-total-rent">â‚ª0</span></div>
            <div class="wpc-calc-rvb-k7m2-compare-row"><span>×ª×©×•××” ×œ×¤× ×™ ××¡:</span><span id="rent-gross-return">â‚ª0</span></div>
            <div class="wpc-calc-rvb-k7m2-compare-row"><span>××¡ ×¨×•×•×—×™ ×”×•×Ÿ (25%):</span><span id="rent-capital-tax">â‚ª0</span></div>
            <div class="wpc-calc-rvb-k7m2-compare-row"><span>×”×•×Ÿ × ×˜×•:</span><span id="rent-net-wealth">â‚ª0</span></div>
          </div>
        </div>
      </div>

      <div class="wpc-calc-rvb-k7m2-verdict" id="compare-verdict">ğŸ“Š ×˜×•×¢×Ÿ...</div>

      <div class="wpc-calc-rvb-k7m2-info-box">
        <div class="wpc-calc-rvb-k7m2-info-title">ğŸ’¡ ××” × ×›×œ×œ ×‘×—×™×©×•×‘?</div>
        <div class="wpc-calc-rvb-k7m2-info-text">
          <strong>×‘×¨×›×™×©×”:</strong> ××¡ ×¨×›×™×©×” (6%), ×¢×•"×“ ×•×ª×™×•×•×š (2%), ×ª×—×–×•×§×” ×©× ×ª×™×ª (1% ××©×•×•×™), ×¤×˜×•×¨ ×××¡ ×©×‘×— ×¢×œ ×“×™×¨×” ×™×—×™×“×”.<br>
          <strong>×‘×©×›×™×¨×•×ª:</strong> ×”×©×§×¢×ª ×”×”×•×Ÿ ×”×¢×¦××™ ×‘×©×•×§ ×”×”×•×Ÿ, ×—×™×¡×›×•×Ÿ ×”×”×¤×¨×© ×‘×™×Ÿ ×”×—×–×¨ ××©×›× ×ª× ×œ×©×›"×“, ××¡ ×¨×•×•×—×™ ×”×•×Ÿ 25%.
        </div>
      </div>
    </div>

    <!-- Tab 2: Timeline -->
    <div class="wpc-calc-rvb-k7m2-tab-content" id="tab-timeline">
      <h2 class="wpc-calc-rvb-k7m2-tab-title">×”×©×•×•××ª ×”×•×Ÿ × ×˜×• ×œ××•×¨×š ×–××Ÿ</h2>
      
      <div class="wpc-calc-rvb-k7m2-timeline" id="timeline-container">
        <!-- Generated by JavaScript -->
      </div>

      <div class="wpc-calc-rvb-k7m2-info-box">
        <div class="wpc-calc-rvb-k7m2-info-title">ğŸ“ˆ ××™×š ×œ×§×¨×•× ××ª ×”× ×ª×•× ×™×?</div>
        <div class="wpc-calc-rvb-k7m2-info-text">
          ×”×˜×‘×œ×” ××¦×™×’×” ××ª ×”×”×•×Ÿ ×”× ×§×™ ×‘×›×œ ×ª×¨×—×™×© ×œ××•×¨×š ×”×©× ×™×. <strong>×™×¨×•×§ = ×¨×›×™×©×” ×¢×“×™×¤×”</strong>, <strong>×•×¨×•×“ = ×©×›×™×¨×•×ª ×¢×“×™×¤×”</strong>.
          ×©×™××• ×œ×‘ ×©×‘×¨×•×‘ ×”××§×¨×™×, ×¨×›×™×©×” ×”×•×¤×›×ª ×œ××©×ª×œ××ª ×™×•×ª×¨ ×¨×§ ××—×¨×™ ××¡×¤×¨ ×©× ×™×.
        </div>
      </div>
    </div>

    <!-- Tab 3: Max Rent -->
    <div class="wpc-calc-rvb-k7m2-tab-content" id="tab-maxrent">
      <h2 class="wpc-calc-rvb-k7m2-tab-title">×©×›×¨ ×“×™×¨×” ×’×’ - ××ª×™ ×¢×“×™×£ ×œ×§× ×•×ª?</h2>
      
      <div class="wpc-calc-rvb-k7m2-breakeven-display">
        <div class="wpc-calc-rvb-k7m2-breakeven-years" id="max-rent-value">â‚ª--</div>
        <div class="wpc-calc-rvb-k7m2-breakeven-label">×©×›×¨ ×“×™×¨×” ××§×¡×™××œ×™ ×©××¢×œ×™×• ×¢×“×™×£ ×œ×§× ×•×ª</div>
      </div>

      <div class="wpc-calc-rvb-k7m2-results">
        <h3 class="wpc-calc-rvb-k7m2-results-title">ğŸ“Š × ×™×ª×•×— ×©×›×¨ ×“×™×¨×”</h3>
        <div class="wpc-calc-rvb-k7m2-results-grid">
          <div class="wpc-calc-rvb-k7m2-result-item">
            <div class="wpc-calc-rvb-k7m2-result-label">×©×›"×“ × ×•×›×—×™ ×©×”×–× ×ª×</div>
            <div class="wpc-calc-rvb-k7m2-result-value" id="current-rent-display">â‚ª6,000</div>
          </div>
          <div class="wpc-calc-rvb-k7m2-result-item">
            <div class="wpc-calc-rvb-k7m2-result-label">×ª×©×•××ª ×©×›×™×¨×•×ª</div>
            <div class="wpc-calc-rvb-k7m2-result-value highlight" id="rent-yield-display">2.88%</div>
          </div>
          <div class="wpc-calc-rvb-k7m2-result-item">
            <div class="wpc-calc-rvb-k7m2-result-label">×”×—×œ×˜×” ××•××œ×¦×ª</div>
            <div class="wpc-calc-rvb-k7m2-result-value" id="rent-recommendation">--</div>
          </div>
        </div>
      </div>

      <div class="wpc-calc-rvb-k7m2-info-box">
        <div class="wpc-calc-rvb-k7m2-info-title">ğŸ  ××” ×–×” ×©×›"×“ ×’×’?</div>
        <div class="wpc-calc-rvb-k7m2-info-text">
          ×©×›×¨ ×“×™×¨×” ×’×’ ×”×•× ×”×¡×›×•× ×”××§×¡×™××œ×™ ×©×©×•×•×” ×œ×©×œ× ×¢×œ ×©×›×™×¨×•×ª ×œ×¤× ×™ ×©×¨×›×™×©×” ×”×•×¤×›×ª ×œ××©×ª×œ××ª ×™×•×ª×¨.
          ×× ×©×›×¨ ×”×“×™×¨×” <strong>×’×‘×•×” ××”×’×’</strong> - ×¢×“×™×£ ×œ×§× ×•×ª. ×× ×”×•× <strong>× ××•×š ××”×’×’</strong> - ×¢×“×™×£ ×œ×©×›×•×¨ ×•×œ×”×©×§×™×¢.
        </div>
      </div>
    </div>

  </div>

  <!-- AWG Section -->
  <div class="wpc-calc-rvb-k7m2-awg-section">
    <h3 class="wpc-calc-rvb-k7m2-awg-title">ğŸ¯ ××—×¤×©×™× ××©×›× ×ª× ×‘×ª× ××™× ×”×˜×•×‘×™× ×‘×™×•×ª×¨?</h3>
    <div class="wpc-calc-rvb-k7m2-cta-buttons">
      <button class="wpc-calc-rvb-k7m2-cta-btn primary" data-action="open-awg">
        ğŸ¦ ×‘×“×•×§ ×–×›××•×ª ×œ××©×›× ×ª× - ×§×‘×œ ×”×¦×¢×” ××™×™×“×™×ª!
      </button>
      <button class="wpc-calc-rvb-k7m2-cta-btn secondary" data-action="scroll-to-embed">
        ğŸ ×”×˜××¢ ××ª ×”××—×©×‘×•×Ÿ ×‘×—×™× × ×‘××ª×¨×š
      </button>
    </div>
    <div class="wpc-calc-rvb-k7m2-awg-content" id="awg-content">
      <div class="wpc-calc-rvb-k7m2-shortcode-item">
        [awg postid="32400"]
      </div>
    </div>
  </div>

  <!-- Content Section -->
  <div class="wpc-calc-rvb-k7m2-content-section">
    <h2 class="wpc-calc-rvb-k7m2-content-title">×©×›×™×¨×•×ª ××•×œ ×¨×›×™×©×” - ××” ×¢×“×™×£ ×‘-2025?</h2>
    <p class="wpc-calc-rvb-k7m2-content-text">
      ×”×©××œ×” "×”×× ×œ×§× ×•×ª ×“×™×¨×” ××• ×œ×”××©×™×š ×œ×©×›×•×¨?" ×”×™× ××—×ª ×”×”×—×œ×˜×•×ª ×”×¤×™× × ×¡×™×•×ª ×”××©××¢×•×ª×™×•×ª ×‘×™×•×ª×¨ ×©× ×§×‘×œ ×‘×—×™×™×.
      ×‘-2025, ×¢× ×¨×™×‘×™×•×ª ××©×›× ×ª× ×©×œ 4-6% ×•××—×™×¨×™ ×“×™×¨×•×ª ×©×××©×™×›×™× ×œ×”×™×•×ª ×’×‘×•×”×™×, ×”×ª×©×•×‘×” ××™× ×” ×¤×©×•×˜×”.
    </p>
    
    <h3 class="wpc-calc-rvb-k7m2-content-title">×”×™×ª×¨×•× ×•×ª ×©×œ ×¨×›×™×©×ª ×“×™×¨×”</h3>
    <p class="wpc-calc-rvb-k7m2-content-text">
      <strong>â€¢ ×™×¦×™×‘×•×ª:</strong> ××™×Ÿ ×—×©×© ××¤×™× ×•×™ ××• ×”×¢×œ××ª ×©×›×¨ ×“×™×¨×”<br>
      <strong>â€¢ ××™× ×•×£:</strong> ×”××©×›× ×ª× ×××¤×©×¨×ª ×œ×¨×›×•×© × ×›×¡ ×©×•×•×” ×”×¨×‘×” ×™×•×ª×¨ ××”×”×•×Ÿ ×”×¢×¦××™<br>
      <strong>â€¢ ×¤×˜×•×¨ ×××¡ ×©×‘×—:</strong> ×¢×œ ×“×™×¨×” ×™×—×™×“×” ×‘×™×©×¨××œ ×™×© ×¤×˜×•×¨ ××œ× ×××¡ ×©×‘×—<br>
      <strong>â€¢ ×—×™×¡×›×•×Ÿ ×›×¤×•×™:</strong> ×›×œ ×ª×©×œ×•× ××©×›× ×ª× ×‘×•× ×” ×”×•×Ÿ ×¢×¦××™ ×‘× ×›×¡
    </p>
    
    <h3 class="wpc-calc-rvb-k7m2-content-title">×”×™×ª×¨×•× ×•×ª ×©×œ ×©×›×™×¨×•×ª ×•×”×©×§×¢×”</h3>
    <p class="wpc-calc-rvb-k7m2-content-text">
      <strong>â€¢ ×’××™×©×•×ª:</strong> ×§×œ ×™×•×ª×¨ ×œ×¢×‘×•×¨ ×“×™×¨×” ××• ×œ×©× ×•×ª ××™×§×•×<br>
      <strong>â€¢ × ×–×™×œ×•×ª:</strong> ×”×”×•×Ÿ × ×©××¨ × ×–×™×œ ×•×œ× × ×¢×•×œ ×‘× ×›×¡<br>
      <strong>â€¢ ×¤×™×–×•×¨ ×¡×™×›×•× ×™×:</strong> ×”×”×©×§×¢×•×ª ×‘×©×•×§ ×”×”×•×Ÿ ××¤×•×–×¨×•×ª ×•×œ× ××¨×•×›×–×•×ª ×‘× ×›×¡ ××—×“<br>
      <strong>â€¢ ××™×Ÿ ×”×•×¦××•×ª ×ª×—×–×•×§×”:</strong> ×”×©×•×›×¨ ×œ× ××©×œ× ×¢×œ ×ª×™×§×•× ×™× ×’×“×•×œ×™×
    </p>
  </div>

  <!-- Embed Section -->
  <div class="wpc-calc-rvb-k7m2-embed-section" id="wpc-calc-rvb-k7m2-embed">
    <h2 style="color: var(--wpc-rvb-primary); font-size: 1.8em; text-align: center; margin-bottom: 25px;">
      ğŸ ×¨×•×¦×™× ×œ×”×˜××™×¢ ××ª ××—×©×‘×•×Ÿ ×©×›×™×¨×•×ª ××•×œ ×¨×›×™×©×” ×‘××ª×¨ ×©×œ×›×? ×—×™× ×!
    </h2>
    
    <div style="background: rgba(30, 84, 144, 0.08); padding: 20px; border-radius: 12px; margin-bottom: 25px; border-right: 4px solid var(--wpc-rvb-primary);">
      <p style="font-size: 1.1em; line-height: 1.7; margin: 0; color: #222;">
        <strong>ğŸ’ ××—×©×‘×•×Ÿ ××§×¦×•×¢×™ ×¢× 3 ×˜××‘×™×, ×—×™×©×•×‘×™ ××¡ ××“×•×™×§×™×, ×•×¢×™×¦×•×‘ responsive ××œ×!</strong><br>
        <strong>×©×•×•×™ ×”××—×©×‘×•×Ÿ:</strong> ××¢×œ â‚ª15,000 ×‘×¤×™×ª×•×— ğŸ’° | <strong>××” ×©×©×™×œ××ª×:</strong> â‚ª0 ğŸ‰
      </p>
    </div>
    
    <div style="text-align: center;">
      <button class="wpc-calc-rvb-k7m2-embed-btn" data-action="copy-embed-code">
        ğŸ“‹ ×”×¢×ª×§ ×§×•×“ HTML ××œ×
      </button>
    </div>

    <h4 style="margin-top: 30px; color: var(--wpc-rvb-primary); text-align: center;">ğŸ¨ ×‘×—×¨×• ×¦×‘×¢:</h4>
    
    <div class="wpc-calc-rvb-k7m2-color-picker" id="color-picker">
      <button class="wpc-calc-rvb-k7m2-color-btn active" style="background: #1e5490;" data-action="preview-color" data-color="#1e5490" data-name="×›×—×•×œ ××§×¦×•×¢×™" title="×›×—×•×œ ××§×¦×•×¢×™ ğŸ’™"></button>
      <button class="wpc-calc-rvb-k7m2-color-btn" style="background: #10b981;" data-action="preview-color" data-color="#10b981" data-name="×™×¨×•×§ ×¦××™×—×”" title="×™×¨×•×§ ×¦××™×—×” ğŸ’š"></button>
      <button class="wpc-calc-rvb-k7m2-color-btn" style="background: #ef4444;" data-action="preview-color" data-color="#ef4444" data-name="××“×•× ×× ×¨×’×˜×™" title="××“×•× ×× ×¨×’×˜×™ â¤ï¸"></button>
      <button class="wpc-calc-rvb-k7m2-color-btn" style="background: #8b5cf6;" data-action="preview-color" data-color="#8b5cf6" data-name="×¡×’×•×œ ×™×•×§×¨×ª×™" title="×¡×’×•×œ ×™×•×§×¨×ª×™ ğŸ’œ"></button>
      <button class="wpc-calc-rvb-k7m2-color-btn" style="background: #f59e0b;" data-action="preview-color" data-color="#f59e0b" data-name="×›×ª×•× ×“×™× ××™" title="×›×ª×•× ×“×™× ××™ ğŸ§¡"></button>
      <button class="wpc-calc-rvb-k7m2-color-btn" style="background: #ec4899;" data-action="preview-color" data-color="#ec4899" data-name="×•×¨×•×“ ××•×“×¨× ×™" title="×•×¨×•×“ ××•×“×¨× ×™ ğŸ’—"></button>
      <button class="wpc-calc-rvb-k7m2-color-btn" style="background: #06b6d4;" data-action="preview-color" data-color="#06b6d4" data-name="×˜×•×¨×§×™×– ×¨×¢× ×Ÿ" title="×˜×•×¨×§×™×– ×¨×¢× ×Ÿ ğŸ©µ"></button>
      <button class="wpc-calc-rvb-k7m2-color-btn" style="background: #84cc16;" data-action="preview-color" data-color="#84cc16" data-name="×œ×™×™× ×¢×–" title="×œ×™×™× ×¢×– ğŸ’›"></button>
      <button class="wpc-calc-rvb-k7m2-color-btn" style="background: #f97316;" data-action="preview-color" data-color="#f97316" data-name="×›×ª×•× ×‘×•×”×§" title="×›×ª×•× ×‘×•×”×§ ğŸ”¥"></button>
      <button class="wpc-calc-rvb-k7m2-color-btn" style="background: #0891b2;" data-action="preview-color" data-color="#0891b2" data-name="×›×—×•×œ ×™×" title="×›×—×•×œ ×™× ğŸŒŠ"></button>
    </div>

    <div class="wpc-calc-rvb-k7m2-preview-container" id="preview-container" style="display: none;">
      <h4 style="text-align: center; margin-bottom: 15px;">âœ¨ ×ª×¦×•×’×” ××§×“×™××”: <span id="preview-color-name">×›×—×•×œ ××§×¦×•×¢×™</span></h4>
      <div id="preview-content"></div>
      <div style="text-align: center; margin-top: 20px;">
        <button class="wpc-calc-rvb-k7m2-embed-btn" data-action="copy-preview-code">ğŸ“‹ ×”×¢×ª×§ ×¢× ×¦×‘×¢ × ×‘×—×¨</button>
      </div>
    </div>

    <div style="background: #fff3cd; padding: 20px; border-radius: 12px; margin-top: 25px; border: 2px solid #ffc107;">
      <h4 style="color: #856404; margin-top: 0;">âš ï¸ ×ª× ××™ ×©×™××•×©</h4>
      <p style="color: #856404; margin: 0;">×”××—×©×‘×•×Ÿ ×œ×”×˜××¢×” ×‘×—×™× × ×‘×ª× ××™ ×”×©××¨×ª ×§×™×©×•×¨ ×”×§×¨×“×™×˜. ××¡×•×¨ ×œ×”×¡×™×¨ ××• ×œ×©× ×•×ª ××ª ×”×§×¨×“×™×˜.</p>
    </div>
  </div>

  <!-- FAQ Section -->
  <div class="wpc-calc-rvb-k7m2-faq-section">
    <h2 style="font-size: 1.8rem; font-weight: 700; color: var(--wpc-rvb-primary); margin: 0 0 25px 0; text-align: center;">×©××œ×•×ª × ×¤×•×¦×•×ª</h2>
    
    <div class="wpc-calc-rvb-k7m2-faq-item" data-action="toggle-faq">
      <div class="wpc-calc-rvb-k7m2-faq-header">
        <span class="wpc-calc-rvb-k7m2-faq-question">â“ ××ª×™ ×¨×›×™×©×ª ×“×™×¨×” ××©×ª×œ××ª ×™×•×ª×¨ ××©×›×™×¨×•×ª?</span>
        <span class="wpc-calc-rvb-k7m2-faq-icon">â–¼</span>
      </div>
      <div class="wpc-calc-rvb-k7m2-faq-answer">
        ×¨×›×™×©×” ××©×ª×œ××ª ×™×•×ª×¨ ×›××©×¨: (1) ××ª×›× × ×™× ×œ×’×•×¨ ×‘×“×™×¨×” ×œ×˜×•×•×— ××¨×•×š (××¢×œ 10-15 ×©× ×”), (2) ×©×›×¨ ×”×“×™×¨×” ×’×‘×•×” ×‘×™×—×¡ ×œ××—×™×¨ ×”× ×›×¡ (×ª×©×•××ª ×©×›×™×¨×•×ª ×’×‘×•×”×”), (3) ×”×¨×™×‘×™×ª ×¢×œ ×”××©×›× ×ª× × ××•×›×” ×™×—×¡×™×ª ×œ×ª×©×•××” ×”×¦×¤×•×™×” ×‘×©×•×§ ×”×”×•×Ÿ.
      </div>
    </div>

    <div class="wpc-calc-rvb-k7m2-faq-item" data-action="toggle-faq">
      <div class="wpc-calc-rvb-k7m2-faq-header">
        <span class="wpc-calc-rvb-k7m2-faq-question">â“ ××” ×”×”×‘×“×œ ×‘××™×¡×•×™ ×‘×™×Ÿ ×©× ×™ ×”×ª×¨×—×™×©×™×?</span>
        <span class="wpc-calc-rvb-k7m2-faq-icon">â–¼</span>
      </div>
      <div class="wpc-calc-rvb-k7m2-faq-answer">
        <strong>×‘×¨×›×™×©×”:</strong> ×¢×œ ×“×™×¨×” ×™×—×™×“×” ×™×© ×¤×˜×•×¨ ××œ× ×××¡ ×©×‘×— ×‘×¢×ª ×”××›×™×¨×”. ×™×© ×œ×©×œ× ××¡ ×¨×›×™×©×” ×‘×¢×ª ×”×§× ×™×™×”.<br>
        <strong>×‘×©×›×™×¨×•×ª:</strong> ×¢×œ ×¨×•×•×—×™× ×‘×©×•×§ ×”×”×•×Ÿ ××©×œ××™× 25% ××¡ ×¨×•×•×—×™ ×”×•×Ÿ. ×–×”×• ×”×‘×“×œ ××©××¢×•×ª×™ ×œ×˜×•×‘×ª ×”×¨×›×™×©×”!
      </div>
    </div>

    <div class="wpc-calc-rvb-k7m2-faq-item" data-action="toggle-faq">
      <div class="wpc-calc-rvb-k7m2-faq-header">
        <span class="wpc-calc-rvb-k7m2-faq-question">â“ ××” ×›×•×œ×œ ×”×—×™×©×•×‘ ×©×œ ×¢×œ×•×™×•×ª ×¨×›×™×©×”?</span>
        <span class="wpc-calc-rvb-k7m2-faq-icon">â–¼</span>
      </div>
      <div class="wpc-calc-rvb-k7m2-faq-answer">
        ×¢×œ×•×™×•×ª ×¨×›×™×©×” ×›×•×œ×œ×•×ª: ××¡ ×¨×›×™×©×” (×œ×¤×™ ××“×¨×’×•×ª, ×›-6% ×‘×××•×¦×¢), ×©×›×¨ ×˜×¨×—×ª ×¢×•"×“ (×›-0.5%-1%), ×“××™ ×ª×™×•×•×š (2%), ×•×œ×¢×™×ª×™× ×¢×œ×•×™×•×ª ×©×™×¤×•×¥ ×¨××©×•× ×™. ×”××—×©×‘×•×Ÿ ××—×©×‘ ×›-8% ××¡×š ××—×™×¨ ×”×“×™×¨×”.
      </div>
    </div>

    <div class="wpc-calc-rvb-k7m2-faq-item" data-action="toggle-faq">
      <div class="wpc-calc-rvb-k7m2-faq-header">
        <span class="wpc-calc-rvb-k7m2-faq-question">â“ ×”×× ×”××—×©×‘×•×Ÿ ××ª×—×©×‘ ×‘××™× ×¤×œ×¦×™×”?</span>
        <span class="wpc-calc-rvb-k7m2-faq-icon">â–¼</span>
      </div>
      <div class="wpc-calc-rvb-k7m2-faq-answer">
        ×›×Ÿ! ×”××—×©×‘×•×Ÿ ××ª×—×©×‘ ×‘×¢×œ×™×™×ª ×©×›×¨ ×“×™×¨×” ×©× ×ª×™×ª (×©××©×§×¤×ª ××™× ×¤×œ×¦×™×” + ×¢×œ×™×™×ª ××—×™×¨×™ ×©×›×™×¨×•×ª), ×•×‘×¢×œ×™×™×ª ×¢×¨×š ×”× ×“×œ"×Ÿ. 
        ×©×™××• ×œ×‘ ×©×—×œ×§ ×××¡×œ×•×œ×™ ×”××©×›× ×ª× ×¦××•×“×™× ×œ××“×“, ××” ×©××©×¤×™×¢ ×¢×œ ×”×”×—×–×¨ ×”×—×•×“×©×™ ×œ××•×¨×š ×–××Ÿ.
      </div>
    </div>

    <div class="wpc-calc-rvb-k7m2-faq-item" data-action="toggle-faq">
      <div class="wpc-calc-rvb-k7m2-faq-header">
        <span class="wpc-calc-rvb-k7m2-faq-question">â“ ××” ×–×” "×©×›×¨ ×“×™×¨×” ×’×’"?</span>
        <span class="wpc-calc-rvb-k7m2-faq-icon">â–¼</span>
      </div>
      <div class="wpc-calc-rvb-k7m2-faq-answer">
        ×©×›×¨ ×“×™×¨×” ×’×’ ×”×•× ×”×¡×›×•× ×”××§×¡×™××œ×™ ×©×›×“××™ ×œ×©×œ× ×¢×œ ×©×›×™×¨×•×ª ×œ×¤× ×™ ×©×¨×›×™×©×” ×”×•×¤×›×ª ×œ××©×ª×œ××ª ×™×•×ª×¨. 
        ×× ×©×›×¨ ×”×“×™×¨×” ×‘×¤×•×¢×œ ×’×‘×•×” ××”×’×’ - ×¢×“×™×£ ×œ×§× ×•×ª. ×× ×”×•× × ××•×š ××”×’×’ - ×¢×“×™×£ ×œ×©×›×•×¨ ×•×œ×”×©×§×™×¢ ××ª ×”×”×¤×¨×©.
      </div>
    </div>

    <div class="wpc-calc-rvb-k7m2-faq-item" data-action="toggle-faq">
      <div class="wpc-calc-rvb-k7m2-faq-header">
        <span class="wpc-calc-rvb-k7m2-faq-question">â“ ××™×–×• ×ª×©×•××” ×œ×”× ×™×— ×¢×œ ×”×©×§×¢×•×ª ×‘×©×•×§ ×”×”×•×Ÿ?</span>
        <span class="wpc-calc-rvb-k7m2-faq-icon">â–¼</span>
      </div>
      <div class="wpc-calc-rvb-k7m2-faq-answer">
        ×”×ª×©×•××” ×”×××•×¦×¢×ª ××¨×•×›×ª ×”×˜×•×•×— ×©×œ ×©×•×§ ×”×× ×™×•×ª ×”×™× ×›-7%-10% × ×•××™× ×œ×™×ª. ×× ×• ×××œ×™×¦×™× ×œ×”× ×™×— 7% ×›×‘×¨×™×¨×ª ××—×“×œ, 
        ×©×–×• ×ª×©×•××” ×¡×‘×™×¨×” ×œ×ª×™×§ ×× ×™×•×ª ××¤×•×–×¨. ×ª×©×•××” ×’×‘×•×”×” ×™×•×ª×¨ ×ª×˜×” ××ª ×”×›×£ ×œ×˜×•×‘×ª ×©×›×™×¨×•×ª.
      </div>
    </div>
  </div>

</div>

<!-- Schema.org JSON-LD -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "××ª×™ ×¨×›×™×©×ª ×“×™×¨×” ××©×ª×œ××ª ×™×•×ª×¨ ××©×›×™×¨×•×ª?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "×¨×›×™×©×” ××©×ª×œ××ª ×™×•×ª×¨ ×›××©×¨ ××ª×›× × ×™× ×œ×’×•×¨ ×‘×“×™×¨×” ×œ×˜×•×•×— ××¨×•×š (××¢×œ 10-15 ×©× ×”), ×©×›×¨ ×”×“×™×¨×” ×’×‘×•×” ×‘×™×—×¡ ×œ××—×™×¨ ×”× ×›×¡, ×•×”×¨×™×‘×™×ª ×¢×œ ×”××©×›× ×ª× × ××•×›×” ×™×—×¡×™×ª ×œ×ª×©×•××” ×”×¦×¤×•×™×” ×‘×©×•×§ ×”×”×•×Ÿ."
      }
    },
    {
      "@type": "Question",
      "name": "××” ×”×”×‘×“×œ ×‘××™×¡×•×™ ×‘×™×Ÿ ×¨×›×™×©×” ×œ×©×›×™×¨×•×ª?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "×‘×¨×›×™×©×” ×™×© ×¤×˜×•×¨ ××œ× ×××¡ ×©×‘×— ×¢×œ ×“×™×¨×” ×™×—×™×“×” ×‘×¢×ª ×”××›×™×¨×”. ×‘×©×›×™×¨×•×ª ×•×”×©×§×¢×” ×‘×©×•×§ ×”×”×•×Ÿ ××©×œ××™× 25% ××¡ ×¨×•×•×—×™ ×”×•×Ÿ ×¢×œ ×”×¨×•×•×—×™×."
      }
    },
    {
      "@type": "Question",
      "name": "××” ×–×” ×©×›×¨ ×“×™×¨×” ×’×’?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "×©×›×¨ ×“×™×¨×” ×’×’ ×”×•× ×”×¡×›×•× ×”××§×¡×™××œ×™ ×©×›×“××™ ×œ×©×œ× ×¢×œ ×©×›×™×¨×•×ª ×œ×¤× ×™ ×©×¨×›×™×©×” ×”×•×¤×›×ª ×œ××©×ª×œ××ª ×™×•×ª×¨. ×× ×©×›×¨ ×”×“×™×¨×” ×’×‘×•×” ××”×’×’ - ×¢×“×™×£ ×œ×§× ×•×ª."
      }
    }
  ]
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FinancialProduct",
  "name": "××—×©×‘×•×Ÿ ×©×›×™×¨×•×ª ××•×œ ×¨×›×™×©×ª ×“×™×¨×” 2025",
  "description": "××—×©×‘×•×Ÿ ××ª×§×“× ×œ×”×©×•×•××” ×¤×™× × ×¡×™×ª ×‘×™×Ÿ ×©×›×™×¨×•×ª ×•×”×©×§×¢×” ×‘×©×•×§ ×”×”×•×Ÿ ×œ×‘×™×Ÿ ×¨×›×™×©×ª ×“×™×¨×” ×¢× ××©×›× ×ª×",
  "category": "Financial Calculator",
  "featureList": ["×”×©×•×•××ª ×”×•×Ÿ × ×˜×•", "× ×§×•×“×ª ××™×–×•×Ÿ", "×—×™×©×•×‘ ×©×›\"×“ ×’×’", "×¦×™×¨ ×–××Ÿ"],
  "provider": {
    "@type": "Organization",
    "name": "×¨×§ ×ª×‘×§×© - ××¤×˜×¨×™×• ×‘×¢×´×",
    "url": "https://loan-israel.co.il"
  },
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "ILS"
  }
}
</script>

<script>
(function() {
    'use strict';
    
    const NS = 'WPC_CalcRVB_K7M2';
    if (window[NS]) return;
    
    const container = document.getElementById('wpc-calc-rvb-k7m2-main');
    if (!container) return;

    const CALCULATOR_NAME = '×©×›×™×¨×•×ª ××•×œ ×¨×›×™×©×”';
    const PURCHASE_COSTS_RATE = 0.08;
    const MAINTENANCE_RATE = 0.01;
    const CAPITAL_GAINS_TAX = 0.25;

    const state = {
        propertyPrice: 2500000,
        equity: 625000,
        mortgageRate: 4.5,
        mortgageTerm: 25,
        rent: 6000,
        rentIncrease: 2,
        investmentReturn: 7,
        propertyAppreciation: 3,
        comparisonYears: 15,
        previewColor: '#1e5490'
    };

    function formatCurrency(num) {
        return 'â‚ª' + Math.round(num).toLocaleString('he-IL');
    }

    function el(id) {
        return document.getElementById(id);
    }

    function calculatePMT(principal, annualRate, years) {
        const monthlyRate = annualRate / 100 / 12;
        const months = years * 12;
        if (monthlyRate === 0) return principal / months;
        return principal * (monthlyRate * Math.pow(1 + monthlyRate, months)) / (Math.pow(1 + monthlyRate, months) - 1);
    }

    function calculateRemainingBalance(principal, annualRate, totalYears, yearsPaid) {
        const monthlyRate = annualRate / 100 / 12;
        const totalMonths = totalYears * 12;
        const monthsPaid = yearsPaid * 12;
        if (monthlyRate === 0) return principal * (1 - monthsPaid / totalMonths);
        const payment = calculatePMT(principal, annualRate, totalYears);
        return principal * Math.pow(1 + monthlyRate, monthsPaid) - payment * (Math.pow(1 + monthlyRate, monthsPaid) - 1) / monthlyRate;
    }

    function calculateTotalInterest(principal, annualRate, totalYears, yearsPaid) {
        const monthlyPayment = calculatePMT(principal, annualRate, totalYears);
        const monthsPaid = Math.min(yearsPaid * 12, totalYears * 12);
        const totalPaid = monthlyPayment * monthsPaid;
        const principalPaid = principal - calculateRemainingBalance(principal, annualRate, totalYears, yearsPaid);
        return Math.max(0, totalPaid - principalPaid);
    }

    function calculateFV(principal, annualRate, years) {
        return principal * Math.pow(1 + annualRate / 100, years);
    }

    function calculateFVWithMonthlyDeposits(principal, annualRate, years, monthlyDeposit, rentGrowth) {
        const monthlyRate = annualRate / 100 / 12;
        const months = years * 12;
        let total = principal;
        let currentDeposit = monthlyDeposit;
        
        for (let month = 0; month < months; month++) {
            total = total * (1 + monthlyRate) + currentDeposit;
            if (month > 0 && month % 12 === 0) {
                currentDeposit = currentDeposit * (1 - rentGrowth / 100);
            }
        }
        return total;
    }

    function calculateTotalRentPaid(monthlyRent, rentIncrease, years) {
        let total = 0;
        let currentRent = monthlyRent;
        for (let year = 0; year < years; year++) {
            total += currentRent * 12;
            currentRent *= (1 + rentIncrease / 100);
        }
        return total;
    }

    function calculateScenarios(years) {
        const loanAmount = state.propertyPrice - state.equity;
        const purchaseCosts = state.propertyPrice * PURCHASE_COSTS_RATE;
        const monthlyMortgage = calculatePMT(loanAmount, state.mortgageRate, state.mortgageTerm);
        
        // Buy scenario
        const futurePropertyValue = calculateFV(state.propertyPrice, state.propertyAppreciation, years);
        const mortgageBalance = years >= state.mortgageTerm ? 0 : calculateRemainingBalance(loanAmount, state.mortgageRate, state.mortgageTerm, years);
        const interestPaid = calculateTotalInterest(loanAmount, state.mortgageRate, state.mortgageTerm, years);
        const maintenanceCost = state.propertyPrice * MAINTENANCE_RATE * years;
        const buyNetWealth = futurePropertyValue - mortgageBalance;
        const buyTotalCosts = purchaseCosts + interestPaid + maintenanceCost;

        // Rent scenario  
        const monthlySavings = Math.max(0, monthlyMortgage - state.rent);
        const totalRentPaid = calculateTotalRentPaid(state.rent, state.rentIncrease, years);
        
        // Investment: equity + purchase costs saved + monthly savings
        const initialInvestment = state.equity + purchaseCosts;
        const investmentGross = calculateFVWithMonthlyDeposits(initialInvestment, state.investmentReturn, years, monthlySavings, state.rentIncrease);
        const investmentGains = investmentGross - initialInvestment - (monthlySavings * 12 * years);
        const capitalTax = investmentGains * CAPITAL_GAINS_TAX;
        const rentNetWealth = investmentGross - capitalTax;

        return {
            buy: {
                futureValue: futurePropertyValue,
                mortgageBalance: mortgageBalance,
                purchaseCosts: purchaseCosts,
                interestPaid: interestPaid,
                maintenance: maintenanceCost,
                netWealth: buyNetWealth,
                totalCosts: buyTotalCosts
            },
            rent: {
                initialInvestment: initialInvestment,
                monthlySavings: monthlySavings,
                totalRentPaid: totalRentPaid,
                grossReturn: investmentGross,
                capitalTax: capitalTax,
                netWealth: rentNetWealth
            },
            difference: buyNetWealth - rentNetWealth,
            buyWins: buyNetWealth > rentNetWealth
        };
    }

    function findBreakevenYear() {
        for (let year = 1; year <= 50; year++) {
            const result = calculateScenarios(year);
            if (result.buyWins) {
                return { year: year, buyWealth: result.buy.netWealth, rentWealth: result.rent.netWealth };
            }
        }
        // ×× ××™×Ÿ × ×§×•×“×ª ××™×–×•×Ÿ ×¢×“ 50 ×©× ×”, ××—×–×™×¨×™× ××ª ×”×¢×¨×›×™× ×‘-50 ×©× ×”
        const result50 = calculateScenarios(50);
        return { year: -1, buyWealth: result50.buy.netWealth, rentWealth: result50.rent.netWealth };
    }

    function calculateMaxRent() {
        const years = state.comparisonYears;
        let low = 1000, high = 50000;
        
        while (high - low > 100) {
            const mid = (low + high) / 2;
            const originalRent = state.rent;
            state.rent = mid;
            const result = calculateScenarios(years);
            state.rent = originalRent;
            
            if (result.buyWins) {
                low = mid;
            } else {
                high = mid;
            }
        }
        return Math.round(low);
    }

    function updateCompare() {
        const result = calculateScenarios(state.comparisonYears);
        
        el('result-buy-wealth').textContent = formatCurrency(result.buy.netWealth);
        el('result-rent-wealth').textContent = formatCurrency(result.rent.netWealth);
        el('result-difference').textContent = formatCurrency(Math.abs(result.difference));
        
        el('buy-future-value').textContent = formatCurrency(result.buy.futureValue);
        el('buy-mortgage-balance').textContent = formatCurrency(result.buy.mortgageBalance);
        el('buy-purchase-costs').textContent = formatCurrency(result.buy.purchaseCosts);
        el('buy-interest-paid').textContent = formatCurrency(result.buy.interestPaid);
        el('buy-maintenance').textContent = formatCurrency(result.buy.maintenance);
        el('buy-net-wealth').textContent = formatCurrency(result.buy.netWealth);
        
        el('rent-initial-investment').textContent = formatCurrency(result.rent.initialInvestment);
        el('rent-monthly-savings').textContent = formatCurrency(result.rent.monthlySavings);
        el('rent-total-rent').textContent = formatCurrency(result.rent.totalRentPaid);
        el('rent-gross-return').textContent = formatCurrency(result.rent.grossReturn);
        el('rent-capital-tax').textContent = formatCurrency(result.rent.capitalTax);
        el('rent-net-wealth').textContent = formatCurrency(result.rent.netWealth);
        
        const verdict = el('compare-verdict');
        if (result.buyWins) {
            verdict.className = 'wpc-calc-rvb-k7m2-verdict buy-wins';
            verdict.innerHTML = `ğŸ  <strong>×¨×›×™×©×” ×¢×“×™×¤×”!</strong> ×”×¤×¨×© ×©×œ ${formatCurrency(result.difference)} ×œ×˜×•×‘×ª ×¨×›×™×©×” ×œ××—×¨ ${state.comparisonYears} ×©× ×™×`;
        } else {
            verdict.className = 'wpc-calc-rvb-k7m2-verdict rent-wins';
            verdict.innerHTML = `ğŸ”‘ <strong>×©×›×™×¨×•×ª ×¢×“×™×¤×”!</strong> ×”×¤×¨×© ×©×œ ${formatCurrency(-result.difference)} ×œ×˜×•×‘×ª ×©×›×™×¨×•×ª ×œ××—×¨ ${state.comparisonYears} ×©× ×™×`;
        }
    }

    function updateTimeline() {
        const container = el('timeline-container');
        let html = '';
        const years = [5, 10, 15, 20, 25, 30];
        
        years.forEach(year => {
            const result = calculateScenarios(year);
            const winnerClass = result.buyWins ? 'buy' : 'rent';
            const winnerText = result.buyWins ? 'ğŸ  ×¨×›×™×©×”' : 'ğŸ”‘ ×©×›×™×¨×•×ª';
            
            html += `
                <div class="wpc-calc-rvb-k7m2-timeline-item">
                    <div class="wpc-calc-rvb-k7m2-timeline-year">${year} ×©× ×™×</div>
                    <div class="wpc-calc-rvb-k7m2-timeline-values">
                        <div class="wpc-calc-rvb-k7m2-timeline-value buy">
                            <span>×¨×›×™×©×”</span>
                            <strong>${formatCurrency(result.buy.netWealth)}</strong>
                        </div>
                        <div class="wpc-calc-rvb-k7m2-timeline-value rent">
                            <span>×©×›×™×¨×•×ª</span>
                            <strong>${formatCurrency(result.rent.netWealth)}</strong>
                        </div>
                    </div>
                    <div class="wpc-calc-rvb-k7m2-timeline-winner ${winnerClass}">${winnerText}</div>
                </div>
            `;
        });
        
        container.innerHTML = html;
    }

    function updateBreakeven() {
        const breakeven = findBreakevenYear();
        const comparisonResult = calculateScenarios(state.comparisonYears);
        
        // ××¦×™×’×™× ××ª ×¢×¨×›×™ ×”×”×•×Ÿ ×‘×ª×§×•×¤×ª ×”×”×©×•×•××” ×©× ×‘×—×¨×” (×œ× ×‘× ×§×•×“×ª ×”××™×–×•×Ÿ)
        el('breakeven-buy-wealth').textContent = formatCurrency(comparisonResult.buy.netWealth);
        el('breakeven-rent-wealth').textContent = formatCurrency(comparisonResult.rent.netWealth);
        
        // ×¢×“×›×•×Ÿ ×”×ª×•×•×™×•×ª ×œ×©×§×£ ××ª ×ª×§×•×¤×ª ×”×”×©×•×•××”
        el('breakeven-results-title').textContent = `ğŸ“Š ×”×•×Ÿ × ×˜×• ×‘-${state.comparisonYears} ×©× ×™×`;
        el('breakeven-buy-label').textContent = `×”×•×Ÿ ×‘×¨×›×™×©×” (${state.comparisonYears} ×©× ×™×)`;
        el('breakeven-rent-label').textContent = `×”×•×Ÿ ×‘×©×›×™×¨×•×ª (${state.comparisonYears} ×©× ×™×)`;
        
        if (breakeven.year === -1) {
            el('breakeven-years').textContent = '50+';
            const diff50 = breakeven.rentWealth - breakeven.buyWealth;
            const diffComparison = comparisonResult.rent.netWealth - comparisonResult.buy.netWealth;
            
            el('breakeven-explanation').innerHTML = `<strong>ğŸ”‘ ×‘××§×¨×” ×–×”, ×©×›×™×¨×•×ª ×¢×“×™×¤×” ×œ×˜×•×•×— ×©×œ ×¢×“ 50 ×©× ×”!</strong><br><br>
                ğŸ“Š <strong>×‘×ª×§×•×¤×ª ×”×”×©×•×•××” ×©×‘×—×¨×ª× (${state.comparisonYears} ×©× ×™×):</strong> ×©×›×™×¨×•×ª ×¢×“×™×¤×” ×‘×”×¤×¨×© ×©×œ ${formatCurrency(diffComparison)}.<br><br>
                ğŸ“Š <strong>×‘-50 ×©× ×”:</strong> ×”×¤×¨×© ×©×œ ${formatCurrency(diff50)} ×œ×˜×•×‘×ª ×©×›×™×¨×•×ª ×•×”×©×§×¢×”.`;
        } else {
            el('breakeven-years').textContent = breakeven.year;
            
            let explanation = '';
            if (breakeven.year <= 7) {
                explanation = `<strong>ğŸ  ×¨×›×™×©×” ××©×ª×œ××ª ××”×¨!</strong> ×›×‘×¨ ××—×¨×™ ${breakeven.year} ×©× ×™× ×¨×›×™×©×” ×”×•×¤×›×ª ×œ×¢×“×™×¤×”.`;
            } else if (breakeven.year <= 15) {
                explanation = `<strong>âš–ï¸ × ×§×•×“×ª ××™×–×•×Ÿ ×¡×‘×™×¨×”.</strong> ××—×¨×™ ${breakeven.year} ×©× ×™× ×¨×›×™×©×” ×”×•×¤×›×ª ×œ×¢×“×™×¤×”.`;
            } else {
                explanation = `<strong>ğŸ”‘ × ×§×•×“×ª ××™×–×•×Ÿ ×¨×—×•×§×”.</strong> ×¨×§ ××—×¨×™ ${breakeven.year} ×©× ×™× ×¨×›×™×©×” ×”×•×¤×›×ª ×œ×¢×“×™×¤×”.`;
            }
            
            // ×”×•×¡×¤×ª ××™×“×¢ ×¢×œ ×ª×§×•×¤×ª ×”×”×©×•×•××” ×©× ×‘×—×¨×”
            if (state.comparisonYears < breakeven.year) {
                const diffComparison = comparisonResult.rent.netWealth - comparisonResult.buy.netWealth;
                explanation += `<br><br>ğŸ“Š <strong>×‘×ª×§×•×¤×ª ×”×”×©×•×•××” ×©×‘×—×¨×ª× (${state.comparisonYears} ×©× ×™×):</strong> ×©×›×™×¨×•×ª ×¢×“×™×¤×” ×‘×”×¤×¨×© ×©×œ ${formatCurrency(diffComparison)}.`;
            } else if (state.comparisonYears >= breakeven.year) {
                const diffComparison = comparisonResult.buy.netWealth - comparisonResult.rent.netWealth;
                explanation += `<br><br>ğŸ“Š <strong>×‘×ª×§×•×¤×ª ×”×”×©×•×•××” ×©×‘×—×¨×ª× (${state.comparisonYears} ×©× ×™×):</strong> ×¨×›×™×©×” ×¢×“×™×¤×” ×‘×”×¤×¨×© ×©×œ ${formatCurrency(diffComparison)}.`;
            }
            
            el('breakeven-explanation').innerHTML = explanation;
        }
    }

    function updateMaxRent() {
        const maxRent = calculateMaxRent();
        const rentYield = (state.rent * 12 / state.propertyPrice * 100).toFixed(2);
        
        el('max-rent-value').textContent = formatCurrency(maxRent);
        el('current-rent-display').textContent = formatCurrency(state.rent);
        el('rent-yield-display').textContent = rentYield + '%';
        
        const recommendation = el('rent-recommendation');
        if (state.rent > maxRent) {
            recommendation.textContent = 'ğŸ  ×œ×§× ×•×ª';
            recommendation.style.color = '#10b981';
        } else {
            recommendation.textContent = 'ğŸ”‘ ×œ×©×›×•×¨';
            recommendation.style.color = '#ec4899';
        }
    }

    function updateSliderValues() {
        el('property-price-value').textContent = formatCurrency(state.propertyPrice);
        el('equity-value').textContent = formatCurrency(state.equity);
        el('mortgage-rate-value').textContent = state.mortgageRate + '%';
        el('mortgage-term-value').textContent = state.mortgageTerm + ' ×©× ×™×';
        el('rent-value').textContent = formatCurrency(state.rent);
        el('rent-increase-value').textContent = state.rentIncrease + '%';
        el('investment-return-value').textContent = state.investmentReturn + '%';
        el('property-appreciation-value').textContent = state.propertyAppreciation + '%';
        el('comparison-years-value').textContent = state.comparisonYears + ' ×©× ×™×';
    }

    function updateAll() {
        updateSliderValues();
        updateCompare();
        updateTimeline();
        updateMaxRent();
    }

    function switchTab(tabName) {
        container.querySelectorAll('.wpc-calc-rvb-k7m2-tab-btn').forEach(btn => btn.classList.remove('active'));
        container.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
        container.querySelectorAll('.wpc-calc-rvb-k7m2-tab-content').forEach(c => c.classList.remove('active'));
        el('tab-' + tabName).classList.add('active');
        
        // ×¢×“×›×•×Ÿ ×”×ª×•×¦××•×ª ×‘×¢×ª ×”×—×œ×¤×ª ×˜××‘
        updateAll();
    }

    function openAWG() {
        const awg = el('awg-content');
        awg.classList.toggle('active');
        if (awg.classList.contains('active')) {
            awg.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    }

    function scrollToEmbed() {
        el('wpc-calc-rvb-k7m2-embed').scrollIntoView({ behavior: 'smooth' });
    }

    function toggleFAQ(item) {
        item.classList.toggle('active');
    }

    function darkenColor(hex, percent) {
        const num = parseInt(hex.replace('#', ''), 16);
        const amt = Math.round(2.55 * percent);
        const R = Math.max((num >> 16) - amt, 0);
        const G = Math.max((num >> 8 & 0x00FF) - amt, 0);
        const B = Math.max((num & 0x0000FF) - amt, 0);
        return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
    }

    function hexToRgba(hex, alpha) {
        const r = parseInt(hex.slice(1, 3), 16);
        const g = parseInt(hex.slice(3, 5), 16);
        const b = parseInt(hex.slice(5, 7), 16);
        return `rgba(${r}, ${g}, ${b}, ${alpha})`;
    }

    // === ××ª×—×•×œ ××—×©×‘×•×Ÿ ×‘×ª×¦×•×’×” ××§×“×™××” - ×§×¨×™×˜×™! ===
    function initPreviewCalculator(calc, primaryColor) {
        const darkColor = darkenColor(primaryColor, 15);
        
        // State ××§×•××™ ×œ×ª×¦×•×’×” ×”××§×“×™××”
        const previewState = {
            propertyPrice: 2500000, equity: 625000, mortgageRate: 4.5, mortgageTerm: 25,
            rent: 6000, rentIncrease: 2, investmentReturn: 7, propertyAppreciation: 3, comparisonYears: 15
        };
        
        function formatCurrency(n) { return 'â‚ª' + Math.round(n).toLocaleString('he-IL'); }
        
        function calculatePMT(p, r, y) {
            const mr = r / 100 / 12, m = y * 12;
            if (mr === 0) return p / m;
            return p * (mr * Math.pow(1 + mr, m)) / (Math.pow(1 + mr, m) - 1);
        }
        
        function calculateRemainingBalance(p, r, ty, yp) {
            const mr = r / 100 / 12, tm = ty * 12, mp = yp * 12;
            if (mr === 0) return p * (1 - mp / tm);
            const pmt = calculatePMT(p, r, ty);
            return p * Math.pow(1 + mr, mp) - pmt * (Math.pow(1 + mr, mp) - 1) / mr;
        }
        
        function calculateFV(p, r, y) { return p * Math.pow(1 + r / 100, y); }
        
        function calculateScenarios(years) {
            const loan = previewState.propertyPrice - previewState.equity;
            const costs = previewState.propertyPrice * 0.08;
            const mortgage = calculatePMT(loan, previewState.mortgageRate, previewState.mortgageTerm);
            const fv = calculateFV(previewState.propertyPrice, previewState.propertyAppreciation, years);
            const balance = years >= previewState.mortgageTerm ? 0 : calculateRemainingBalance(loan, previewState.mortgageRate, previewState.mortgageTerm, years);
            const buyWealth = fv - balance;
            const savings = Math.max(0, mortgage - previewState.rent);
            const invest = previewState.equity + costs;
            const rentGross = invest * Math.pow(1 + previewState.investmentReturn / 100, years) + savings * 12 * years * Math.pow(1 + previewState.investmentReturn / 100, years / 2);
            const gains = rentGross - invest - savings * 12 * years;
            const tax = gains * 0.25;
            const rentWealth = rentGross - tax;
            return { buy: { netWealth: buyWealth, futureValue: fv, mortgageBalance: balance, purchaseCosts: costs }, rent: { netWealth: rentWealth, grossReturn: rentGross, capitalTax: tax, initialInvestment: invest, monthlySavings: savings }, difference: buyWealth - rentWealth, buyWins: buyWealth > rentWealth };
        }
        
        function findPreviewBreakevenYear() {
            for (let y = 1; y <= 50; y++) {
                const res = calculateScenarios(y);
                if (res.buyWins) return { year: y, buyWealth: res.buy.netWealth, rentWealth: res.rent.netWealth };
            }
            const res50 = calculateScenarios(50);
            return { year: -1, buyWealth: res50.buy.netWealth, rentWealth: res50.rent.netWealth };
        }
        
        function updatePreviewCompare() {
            const r = calculateScenarios(previewState.comparisonYears);
            const buyWealth = calc.querySelector('#result-buy-wealth');
            const rentWealth = calc.querySelector('#result-rent-wealth');
            const diff = calc.querySelector('#result-difference');
            const verdict = calc.querySelector('#compare-verdict');
            
            if (buyWealth) buyWealth.textContent = formatCurrency(r.buy.netWealth);
            if (rentWealth) rentWealth.textContent = formatCurrency(r.rent.netWealth);
            if (diff) diff.textContent = formatCurrency(Math.abs(r.difference));
            
            if (verdict) {
                verdict.className = 'wpc-calc-rvb-k7m2-verdict ' + (r.buyWins ? 'buy-wins' : 'rent-wins');
                verdict.innerHTML = r.buyWins ? 
                    'ğŸ  <strong>×¨×›×™×©×” ×¢×“×™×¤×”!</strong> ×”×¤×¨×© ' + formatCurrency(r.difference) : 
                    'ğŸ”‘ <strong>×©×›×™×¨×•×ª ×¢×“×™×¤×”!</strong> ×”×¤×¨×© ' + formatCurrency(-r.difference);
            }
            
            // ×¢×“×›×•×Ÿ ×¤×¨×˜×™×
            const buyFV = calc.querySelector('#buy-future-value');
            const buyBalance = calc.querySelector('#buy-mortgage-balance');
            const buyCosts = calc.querySelector('#buy-purchase-costs');
            const buyNet = calc.querySelector('#buy-net-wealth');
            const rentInit = calc.querySelector('#rent-initial-investment');
            const rentSave = calc.querySelector('#rent-monthly-savings');
            const rentGross = calc.querySelector('#rent-gross-return');
            const rentTax = calc.querySelector('#rent-capital-tax');
            const rentNet = calc.querySelector('#rent-net-wealth');
            
            if (buyFV) buyFV.textContent = formatCurrency(r.buy.futureValue);
            if (buyBalance) buyBalance.textContent = formatCurrency(r.buy.mortgageBalance);
            if (buyCosts) buyCosts.textContent = formatCurrency(r.buy.purchaseCosts);
            if (buyNet) buyNet.textContent = formatCurrency(r.buy.netWealth);
            if (rentInit) rentInit.textContent = formatCurrency(r.rent.initialInvestment);
            if (rentSave) rentSave.textContent = formatCurrency(r.rent.monthlySavings);
            if (rentGross) rentGross.textContent = formatCurrency(r.rent.grossReturn);
            if (rentTax) rentTax.textContent = formatCurrency(r.rent.capitalTax);
            if (rentNet) rentNet.textContent = formatCurrency(r.rent.netWealth);
        }
        
        function updatePreviewTimeline() {
            const cont = calc.querySelector('#timeline-container');
            if (!cont) return;
            let html = '';
            const years = [5, 10, 15, 20, 25, 30];
            years.forEach(year => {
                const r = calculateScenarios(year);
                const win = r.buyWins ? 'buy' : 'rent';
                const winText = r.buyWins ? 'ğŸ  ×¨×›×™×©×”' : 'ğŸ”‘ ×©×›×™×¨×•×ª';
                html += `<div class="wpc-calc-rvb-k7m2-timeline-item"><div class="wpc-calc-rvb-k7m2-timeline-year">${year} ×©× ×™×</div><div class="wpc-calc-rvb-k7m2-timeline-values"><div class="wpc-calc-rvb-k7m2-timeline-value buy"><span>×¨×›×™×©×”</span><strong>${formatCurrency(r.buy.netWealth)}</strong></div><div class="wpc-calc-rvb-k7m2-timeline-value rent"><span>×©×›×™×¨×•×ª</span><strong>${formatCurrency(r.rent.netWealth)}</strong></div></div><div class="wpc-calc-rvb-k7m2-timeline-winner ${win}">${winText}</div></div>`;
            });
            cont.innerHTML = html;
        }
        
        function updatePreviewBreakeven() {
            const b = findPreviewBreakevenYear();
            const compRes = calculateScenarios(previewState.comparisonYears);
            const buyWealthEl = calc.querySelector('#breakeven-buy-wealth');
            const rentWealthEl = calc.querySelector('#breakeven-rent-wealth');
            const yearsEl = calc.querySelector('#breakeven-years');
            const expEl = calc.querySelector('#breakeven-explanation');
            const titleEl = calc.querySelector('#breakeven-results-title');
            const buyLabelEl = calc.querySelector('#breakeven-buy-label');
            const rentLabelEl = calc.querySelector('#breakeven-rent-label');
            
            // ××¦×™×’×™× ××ª ×¢×¨×›×™ ×ª×§×•×¤×ª ×”×”×©×•×•××”
            if (buyWealthEl) buyWealthEl.textContent = formatCurrency(compRes.buy.netWealth);
            if (rentWealthEl) rentWealthEl.textContent = formatCurrency(compRes.rent.netWealth);
            if (titleEl) titleEl.textContent = `ğŸ“Š ×”×•×Ÿ × ×˜×• ×‘-${previewState.comparisonYears} ×©× ×™×`;
            if (buyLabelEl) buyLabelEl.textContent = `×”×•×Ÿ ×‘×¨×›×™×©×” (${previewState.comparisonYears} ×©× ×™×)`;
            if (rentLabelEl) rentLabelEl.textContent = `×”×•×Ÿ ×‘×©×›×™×¨×•×ª (${previewState.comparisonYears} ×©× ×™×)`;
            
            if (b.year === -1) {
                if (yearsEl) yearsEl.textContent = '50+';
                const diff50 = b.rentWealth - b.buyWealth;
                const diffComp = compRes.rent.netWealth - compRes.buy.netWealth;
                if (expEl) expEl.innerHTML = `<strong>ğŸ”‘ ×‘××§×¨×” ×–×”, ×©×›×™×¨×•×ª ×¢×“×™×¤×” ×œ×˜×•×•×— ×©×œ ×¢×“ 50 ×©× ×”!</strong><br><br>
                    ğŸ“Š <strong>×‘×ª×§×•×¤×ª ×”×”×©×•×•××” (${previewState.comparisonYears} ×©× ×™×):</strong> ×©×›×™×¨×•×ª ×¢×“×™×¤×” ×‘×”×¤×¨×© ×©×œ ${formatCurrency(diffComp)}.<br><br>
                    ğŸ“Š <strong>×‘-50 ×©× ×”:</strong> ×”×¤×¨×© ×©×œ ${formatCurrency(diff50)} ×œ×˜×•×‘×ª ×©×›×™×¨×•×ª.`;
            } else {
                if (yearsEl) yearsEl.textContent = b.year;
                let exp = '';
                if (b.year <= 7) exp = '<strong>ğŸ  ×¨×›×™×©×” ××©×ª×œ××ª ××”×¨!</strong> ×›×‘×¨ ××—×¨×™ ' + b.year + ' ×©× ×™× ×¨×›×™×©×” ×¢×“×™×¤×”.';
                else if (b.year <= 15) exp = '<strong>âš–ï¸ × ×§×•×“×ª ××™×–×•×Ÿ ×¡×‘×™×¨×”.</strong> ××—×¨×™ ' + b.year + ' ×©× ×™× ×¨×›×™×©×” ×¢×“×™×¤×”.';
                else exp = '<strong>ğŸ”‘ × ×§×•×“×ª ××™×–×•×Ÿ ×¨×—×•×§×”.</strong> ×¨×§ ××—×¨×™ ' + b.year + ' ×©× ×™× ×¨×›×™×©×” ×¢×“×™×¤×”.';
                
                if (previewState.comparisonYears < b.year) {
                    const diffComp = compRes.rent.netWealth - compRes.buy.netWealth;
                    exp += `<br><br>ğŸ“Š <strong>×‘×ª×§×•×¤×ª ×”×”×©×•×•××” (${previewState.comparisonYears} ×©× ×™×):</strong> ×©×›×™×¨×•×ª ×¢×“×™×¤×” ×‘×”×¤×¨×© ×©×œ ${formatCurrency(diffComp)}.`;
                } else {
                    const diffComp = compRes.buy.netWealth - compRes.rent.netWealth;
                    exp += `<br><br>ğŸ“Š <strong>×‘×ª×§×•×¤×ª ×”×”×©×•×•××” (${previewState.comparisonYears} ×©× ×™×):</strong> ×¨×›×™×©×” ×¢×“×™×¤×” ×‘×”×¤×¨×© ×©×œ ${formatCurrency(diffComp)}.`;
                }
                if (expEl) expEl.innerHTML = exp;
            }
        }
        
        function updatePreviewMaxRent() {
            const years = previewState.comparisonYears;
            let low = 1000, high = 50000;
            while (high - low > 100) {
                const mid = (low + high) / 2;
                const origRent = previewState.rent;
                previewState.rent = mid;
                const res = calculateScenarios(years);
                previewState.rent = origRent;
                if (res.buyWins) low = mid;
                else high = mid;
            }
            const maxRent = Math.round(low);
            const rentYield = (previewState.rent * 12 / previewState.propertyPrice * 100).toFixed(2);
            
            const maxRentEl = calc.querySelector('#max-rent-value');
            const currentRentEl = calc.querySelector('#current-rent-display');
            const yieldEl = calc.querySelector('#rent-yield-display');
            const recEl = calc.querySelector('#rent-recommendation');
            
            if (maxRentEl) maxRentEl.textContent = formatCurrency(maxRent);
            if (currentRentEl) currentRentEl.textContent = formatCurrency(previewState.rent);
            if (yieldEl) yieldEl.textContent = rentYield + '%';
            if (recEl) {
                if (previewState.rent > maxRent) { recEl.textContent = 'ğŸ  ×œ×§× ×•×ª'; recEl.style.color = '#10b981'; }
                else { recEl.textContent = 'ğŸ”‘ ×œ×©×›×•×¨'; recEl.style.color = '#ec4899'; }
            }
        }
        
        function updatePreviewResults() {
            updatePreviewCompare();
            updatePreviewTimeline();
            updatePreviewMaxRent();
        }
        
        // === ×˜××‘×™× - ×¢× stopPropagation! ===
        const tabs = calc.querySelectorAll('[data-action="switch-tab"]');
        const contents = calc.querySelectorAll('.wpc-calc-rvb-k7m2-tab-content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                tabs.forEach(t => {
                    t.classList.remove('active');
                    t.style.setProperty('border-bottom-color', 'transparent', 'important');
                    t.style.setProperty('color', '#6b7280', 'important');
                    t.style.setProperty('background', 'transparent', 'important');
                });
                
                contents.forEach(c => {
                    c.classList.remove('active');
                    c.style.display = 'none';
                });
                
                this.classList.add('active');
                this.style.setProperty('border-bottom-color', primaryColor, 'important');
                this.style.setProperty('color', primaryColor, 'important');
                this.style.setProperty('background', '#fff', 'important');
                
                const tabName = this.dataset.tab;
                const activeContent = calc.querySelector('#tab-' + tabName);
                if (activeContent) {
                    activeContent.classList.add('active');
                    activeContent.style.display = 'block';
                }
                
                // ×¢×“×›×•×Ÿ ×”×ª×•×¦××•×ª ×‘×¢×ª ×”×—×œ×¤×ª ×˜××‘
                updatePreviewResults();
            });
        });
        
        // === ×¡×œ×™×™×“×¨×™× ===
        const sliders = calc.querySelectorAll('input[type="range"]');
        sliders.forEach(slider => {
            slider.style.setProperty('accent-color', primaryColor, 'important');
            
            slider.addEventListener('input', function(e) {
                e.stopPropagation();
                
                const id = this.id;
                const v = parseFloat(this.value);
                const valueId = id.replace('-slider', '-value');
                const valueEl = calc.querySelector('#' + valueId);
                
                // ×¢×“×›×•×Ÿ ×¢×¨×š ××•×¦×’
                if (valueEl) {
                    if (id.includes('rate') || id.includes('increase') || id.includes('return') || id.includes('appreciation')) {
                        valueEl.textContent = v + '%';
                    } else if (id.includes('term') || id.includes('years')) {
                        valueEl.textContent = v + ' ×©× ×™×';
                    } else {
                        valueEl.textContent = formatCurrency(v);
                    }
                }
                
                // ×¢×“×›×•×Ÿ state
                if (id === 'property-price-slider') previewState.propertyPrice = v;
                else if (id === 'equity-slider') previewState.equity = v;
                else if (id === 'mortgage-rate-slider') previewState.mortgageRate = v;
                else if (id === 'mortgage-term-slider') previewState.mortgageTerm = v;
                else if (id === 'rent-slider') previewState.rent = v;
                else if (id === 'rent-increase-slider') previewState.rentIncrease = v;
                else if (id === 'investment-return-slider') previewState.investmentReturn = v;
                else if (id === 'property-appreciation-slider') previewState.propertyAppreciation = v;
                else if (id === 'comparison-years-slider') previewState.comparisonYears = v;
                
                updatePreviewResults();
            });
        });
        
        // === FAQ ===
        const faqItems = calc.querySelectorAll('.wpc-calc-rvb-k7m2-faq-item');
        faqItems.forEach(item => {
            const header = item.querySelector('.wpc-calc-rvb-k7m2-faq-header');
            if (header) {
                header.addEventListener('click', function(e) {
                    e.stopPropagation();
                    item.classList.toggle('active');
                });
            }
        });
        
        // ××ª×—×•×œ ×¨××©×•× ×™
        updatePreviewResults();
    }

    function getEmbedCSS(color) {
        const darkColor = darkenColor(color, 15);
        let css = '';
        document.querySelectorAll('style').forEach(style => {
            if (style.textContent.includes('wpc-calc-rvb-k7m2')) {
                css = style.textContent;
            }
        });
        css = css.replace(/#1e5490/g, color);
        css = css.replace(/#163d6b/g, darkColor);
        return css;
    }

    function copyEmbedCode() {
        const calc = el('wpc-calc-rvb-k7m2-calculator').cloneNode(true);
        const defaultColor = '#1e5490';
        const css = getEmbedCSS(defaultColor);
        
        let code = '<style>\n' + css + '\n</style>\n\n';
        code += '<div class="wpc-calc-rvb-k7m2-wrapper" id="wpc-calc-rvb-k7m2-main">\n';
        code += calc.outerHTML + '\n</div>\n\n';
        code += `<p style="text-align:center;font-size:0.9em;margin-top:20px;color:#666;">××—×©×‘×•×Ÿ ${CALCULATOR_NAME} ×¤×•×ª×— ×¢×œ ×™×“×™ <a href="https://loan-israel.co.il/" target="_blank" rel="nofollow noopener" style="color:${defaultColor};text-decoration:underline;">×¨×§ ×ª×‘×§×© ×¤×™× × ×¡×™×</a></p>\n\n`;
        code += getEmbedScript(defaultColor);
        
        navigator.clipboard.writeText(code).then(() => {
            alert('âœ… ×”×§×•×“ ×”×•×¢×ª×§ ×‘×”×¦×œ×—×”!\n\nâ€¢ CSS ××œ×\nâ€¢ JavaScript ×œ×›×œ ×”×˜××‘×™× ×•×”×¡×œ×™×™×“×¨×™×\nâ€¢ ×§×¨×“×™×˜ ×œ××ª×¨');
        }).catch(err => {
            console.error('×©×’×™××” ×‘×”×¢×ª×§×”:', err);
            const textarea = document.createElement('textarea');
            textarea.value = code;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            alert('âœ… ×”×§×•×“ ×”×•×¢×ª×§!');
        });
    }

    function showPreview(color, name) {
        state.previewColor = color;
        el('preview-container').style.display = 'block';
        el('preview-color-name').textContent = name;
        
        const calc = el('wpc-calc-rvb-k7m2-calculator').cloneNode(true);
        const darkColor = darkenColor(color, 15);
        
        // ×©×™× ×•×™ ID ×œ×× ×™×¢×ª ×”×ª× ×’×©×•×ª!
        calc.id = 'wpc-calc-rvb-k7m2-calculator-preview';
        
        // ×”×’×“×¨×ª CSS Variables ×¢×œ ×”××œ×× ×˜ ×”××©×•×›×¤×œ
        calc.style.setProperty('--wpc-rvb-primary', color);
        calc.style.setProperty('--wpc-rvb-primary-dark', darkColor);
        calc.style.setProperty('--wpc-rvb-primary-light', hexToRgba(color, 0.1));
        
        // ×¢×“×›×•×Ÿ ×¦×‘×¢×™× ×¢× setProperty + important
        calc.querySelectorAll('.wpc-calc-rvb-k7m2-tab-btn.active').forEach(btn => {
            btn.style.setProperty('border-bottom-color', color, 'important');
            btn.style.setProperty('color', color, 'important');
        });
        
        calc.querySelectorAll('.wpc-calc-rvb-k7m2-results').forEach(elem => {
            elem.style.setProperty('background', `linear-gradient(135deg, ${color} 0%, ${darkColor} 100%)`, 'important');
        });
        
        calc.querySelectorAll('.wpc-calc-rvb-k7m2-breakeven-display').forEach(elem => {
            elem.style.setProperty('background', `linear-gradient(135deg, ${color} 0%, ${darkColor} 100%)`, 'important');
        });
        
        calc.querySelectorAll('.wpc-calc-rvb-k7m2-title').forEach(elem => {
            elem.style.setProperty('color', color, 'important');
        });
        
        calc.querySelectorAll('.wpc-calc-rvb-k7m2-tab-title, .wpc-calc-rvb-k7m2-section-title, .wpc-calc-rvb-k7m2-content-title, .wpc-calc-rvb-k7m2-awg-title').forEach(elem => {
            elem.style.setProperty('color', color, 'important');
        });
        
        calc.querySelectorAll('.wpc-calc-rvb-k7m2-slider').forEach(elem => {
            elem.style.setProperty('accent-color', color, 'important');
        });
        
        calc.querySelectorAll('.wpc-calc-rvb-k7m2-slider-value').forEach(elem => {
            elem.style.setProperty('background', hexToRgba(color, 0.1), 'important');
            elem.style.setProperty('color', color, 'important');
        });
        
        calc.querySelectorAll('.wpc-calc-rvb-k7m2-info-box').forEach(elem => {
            elem.style.setProperty('border-right-color', color, 'important');
            elem.style.setProperty('background', hexToRgba(color, 0.08), 'important');
        });
        
        calc.querySelectorAll('.wpc-calc-rvb-k7m2-info-title').forEach(elem => {
            elem.style.setProperty('color', color, 'important');
        });
        
        calc.querySelectorAll('.wpc-calc-rvb-k7m2-update-date').forEach(elem => {
            elem.style.setProperty('background', hexToRgba(color, 0.1), 'important');
            elem.style.setProperty('color', color, 'important');
        });
        
        calc.querySelectorAll('.wpc-calc-rvb-k7m2-timeline-year').forEach(elem => {
            elem.style.setProperty('color', color, 'important');
        });
        
        calc.querySelectorAll('.wpc-calc-rvb-k7m2-faq-icon').forEach(elem => {
            elem.style.setProperty('color', color, 'important');
        });
        
        el('preview-content').innerHTML = '';
        el('preview-content').appendChild(calc);
        
        // ××ª×—×•×œ ××—×“×© ×©×œ ×›×œ ×”-event listeners!
        initPreviewCalculator(calc, color);
        
        container.querySelectorAll('.wpc-calc-rvb-k7m2-color-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.color === color) btn.classList.add('active');
        });
        
        // ×’×œ×™×œ×” ×œ×ª×¦×•×’×”
        el('preview-container').scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function copyPreviewCode() {
        const calc = el('wpc-calc-rvb-k7m2-calculator').cloneNode(true);
        const css = getEmbedCSS(state.previewColor);
        const color = state.previewColor;
        
        let code = '<style>\n' + css + '\n</style>\n\n';
        code += '<div class="wpc-calc-rvb-k7m2-wrapper" id="wpc-calc-rvb-k7m2-main">\n';
        code += calc.outerHTML + '\n</div>\n\n';
        code += `<p style="text-align:center;font-size:0.9em;margin-top:20px;color:#666;">××—×©×‘×•×Ÿ ${CALCULATOR_NAME} ×¤×•×ª×— ×¢×œ ×™×“×™ <a href="https://loan-israel.co.il/" target="_blank" rel="nofollow noopener" style="color:${color};text-decoration:underline;">×¨×§ ×ª×‘×§×© ×¤×™× × ×¡×™×</a></p>\n\n`;
        code += getEmbedScript(color);
        
        navigator.clipboard.writeText(code).then(() => {
            alert('âœ… ×”×§×•×“ ×¢× ×”×¦×‘×¢ ×”× ×‘×—×¨ ×”×•×¢×ª×§!\n\nâ€¢ CSS ××œ× ×¢× ×”×¦×‘×¢ ' + color + '\nâ€¢ JavaScript ×œ×›×œ ×”×˜××‘×™× ×•×”×¡×œ×™×™×“×¨×™×\nâ€¢ ×§×¨×“×™×˜ ×œ××ª×¨');
        }).catch(err => {
            console.error('×©×’×™××” ×‘×”×¢×ª×§×”:', err);
            // Fallback
            const textarea = document.createElement('textarea');
            textarea.value = code;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            alert('âœ… ×”×§×•×“ ×”×•×¢×ª×§!');
        });
    }

    function getEmbedScript(primaryColor) {
        const color = primaryColor || '#1e5490';
        return `<script>
document.addEventListener("DOMContentLoaded", function() {
(function() {
"use strict";
var NS = "WPC_CalcRVB_Embed";
if (window[NS]) return;
var container = document.getElementById("wpc-calc-rvb-k7m2-main");
if (!container) return;
var PRIMARY_COLOR = "${color}";

var state = {
    propertyPrice: 2500000, equity: 625000, mortgageRate: 4.5, mortgageTerm: 25,
    rent: 6000, rentIncrease: 2, investmentReturn: 7, propertyAppreciation: 3, comparisonYears: 15
};

function formatCurrency(n) { return "â‚ª" + Math.round(n).toLocaleString("he-IL"); }
function el(id) { return document.getElementById(id); }

function calculatePMT(p, r, y) {
    var mr = r / 100 / 12, m = y * 12;
    if (mr === 0) return p / m;
    return p * (mr * Math.pow(1 + mr, m)) / (Math.pow(1 + mr, m) - 1);
}

function calculateRemainingBalance(p, r, ty, yp) {
    var mr = r / 100 / 12, tm = ty * 12, mp = yp * 12;
    if (mr === 0) return p * (1 - mp / tm);
    var pmt = calculatePMT(p, r, ty);
    return p * Math.pow(1 + mr, mp) - pmt * (Math.pow(1 + mr, mp) - 1) / mr;
}

function calculateFV(p, r, y) { return p * Math.pow(1 + r / 100, y); }

function calculateScenarios(years) {
    var loan = state.propertyPrice - state.equity;
    var costs = state.propertyPrice * 0.08;
    var mortgage = calculatePMT(loan, state.mortgageRate, state.mortgageTerm);
    var fv = calculateFV(state.propertyPrice, state.propertyAppreciation, years);
    var balance = years >= state.mortgageTerm ? 0 : calculateRemainingBalance(loan, state.mortgageRate, state.mortgageTerm, years);
    var buyWealth = fv - balance;
    var savings = Math.max(0, mortgage - state.rent);
    var invest = state.equity + costs;
    var rentGross = invest * Math.pow(1 + state.investmentReturn / 100, years) + savings * 12 * years * Math.pow(1 + state.investmentReturn / 100, years / 2);
    var gains = rentGross - invest - savings * 12 * years;
    var tax = gains * 0.25;
    var rentWealth = rentGross - tax;
    return { buy: { netWealth: buyWealth, futureValue: fv, mortgageBalance: balance, purchaseCosts: costs }, rent: { netWealth: rentWealth, grossReturn: rentGross, capitalTax: tax, initialInvestment: invest, monthlySavings: savings }, difference: buyWealth - rentWealth, buyWins: buyWealth > rentWealth };
}

function findBreakevenYear() {
    for (var y = 1; y <= 50; y++) {
        var res = calculateScenarios(y);
        if (res.buyWins) return { year: y, buyWealth: res.buy.netWealth, rentWealth: res.rent.netWealth };
    }
    var res50 = calculateScenarios(50);
    return { year: -1, buyWealth: res50.buy.netWealth, rentWealth: res50.rent.netWealth };
}

function updateCompare() {
    var r = calculateScenarios(state.comparisonYears);
    if (el("result-buy-wealth")) el("result-buy-wealth").textContent = formatCurrency(r.buy.netWealth);
    if (el("result-rent-wealth")) el("result-rent-wealth").textContent = formatCurrency(r.rent.netWealth);
    if (el("result-difference")) el("result-difference").textContent = formatCurrency(Math.abs(r.difference));
    if (el("buy-future-value")) el("buy-future-value").textContent = formatCurrency(r.buy.futureValue);
    if (el("buy-mortgage-balance")) el("buy-mortgage-balance").textContent = formatCurrency(r.buy.mortgageBalance);
    if (el("buy-purchase-costs")) el("buy-purchase-costs").textContent = formatCurrency(r.buy.purchaseCosts);
    if (el("buy-net-wealth")) el("buy-net-wealth").textContent = formatCurrency(r.buy.netWealth);
    if (el("rent-initial-investment")) el("rent-initial-investment").textContent = formatCurrency(r.rent.initialInvestment);
    if (el("rent-monthly-savings")) el("rent-monthly-savings").textContent = formatCurrency(r.rent.monthlySavings);
    if (el("rent-gross-return")) el("rent-gross-return").textContent = formatCurrency(r.rent.grossReturn);
    if (el("rent-capital-tax")) el("rent-capital-tax").textContent = formatCurrency(r.rent.capitalTax);
    if (el("rent-net-wealth")) el("rent-net-wealth").textContent = formatCurrency(r.rent.netWealth);
    var v = el("compare-verdict");
    if (v) { v.className = "wpc-calc-rvb-k7m2-verdict " + (r.buyWins ? "buy-wins" : "rent-wins"); v.innerHTML = r.buyWins ? "ğŸ  ×¨×›×™×©×” ×¢×“×™×¤×”! ×”×¤×¨×© " + formatCurrency(r.difference) : "ğŸ”‘ ×©×›×™×¨×•×ª ×¢×“×™×¤×”! ×”×¤×¨×© " + formatCurrency(-r.difference); }
}

function updateTimeline() {
    var cont = el("timeline-container");
    if (!cont) return;
    var html = "";
    var years = [5, 10, 15, 20, 25, 30];
    years.forEach(function(year) {
        var r = calculateScenarios(year);
        var win = r.buyWins ? "buy" : "rent";
        var winText = r.buyWins ? "ğŸ  ×¨×›×™×©×”" : "ğŸ”‘ ×©×›×™×¨×•×ª";
        html += '<div class="wpc-calc-rvb-k7m2-timeline-item"><div class="wpc-calc-rvb-k7m2-timeline-year">' + year + ' ×©× ×™×</div><div class="wpc-calc-rvb-k7m2-timeline-values"><div class="wpc-calc-rvb-k7m2-timeline-value buy"><span>×¨×›×™×©×”</span><strong>' + formatCurrency(r.buy.netWealth) + '</strong></div><div class="wpc-calc-rvb-k7m2-timeline-value rent"><span>×©×›×™×¨×•×ª</span><strong>' + formatCurrency(r.rent.netWealth) + '</strong></div></div><div class="wpc-calc-rvb-k7m2-timeline-winner ' + win + '">' + winText + '</div></div>';
    });
    cont.innerHTML = html;
}

function updateBreakeven() {
    var b = findBreakevenYear();
    var compRes = calculateScenarios(state.comparisonYears);
    if (el("breakeven-buy-wealth")) el("breakeven-buy-wealth").textContent = formatCurrency(compRes.buy.netWealth);
    if (el("breakeven-rent-wealth")) el("breakeven-rent-wealth").textContent = formatCurrency(compRes.rent.netWealth);
    if (el("breakeven-results-title")) el("breakeven-results-title").textContent = "ğŸ“Š ×”×•×Ÿ × ×˜×• ×‘-" + state.comparisonYears + " ×©× ×™×";
    if (el("breakeven-buy-label")) el("breakeven-buy-label").textContent = "×”×•×Ÿ ×‘×¨×›×™×©×” (" + state.comparisonYears + " ×©× ×™×)";
    if (el("breakeven-rent-label")) el("breakeven-rent-label").textContent = "×”×•×Ÿ ×‘×©×›×™×¨×•×ª (" + state.comparisonYears + " ×©× ×™×)";
    if (b.year === -1) {
        if (el("breakeven-years")) el("breakeven-years").textContent = "50+";
        var diff50 = b.rentWealth - b.buyWealth;
        var diffComp = compRes.rent.netWealth - compRes.buy.netWealth;
        if (el("breakeven-explanation")) el("breakeven-explanation").innerHTML = "<strong>ğŸ”‘ ×‘××§×¨×” ×–×”, ×©×›×™×¨×•×ª ×¢×“×™×¤×” ×œ×˜×•×•×— ×©×œ ×¢×“ 50 ×©× ×”!</strong><br><br>ğŸ“Š <strong>×‘×ª×§×•×¤×ª ×”×”×©×•×•××” ×©×‘×—×¨×ª× (" + state.comparisonYears + " ×©× ×™×):</strong> ×©×›×™×¨×•×ª ×¢×“×™×¤×” ×‘×”×¤×¨×© ×©×œ " + formatCurrency(diffComp) + ".<br><br>ğŸ“Š <strong>×‘-50 ×©× ×”:</strong> ×”×¤×¨×© ×©×œ " + formatCurrency(diff50) + " ×œ×˜×•×‘×ª ×©×›×™×¨×•×ª.";
    } else {
        if (el("breakeven-years")) el("breakeven-years").textContent = b.year;
        var exp = "";
        if (b.year <= 7) exp = "<strong>ğŸ  ×¨×›×™×©×” ××©×ª×œ××ª ××”×¨!</strong> ×›×‘×¨ ××—×¨×™ " + b.year + " ×©× ×™× ×¨×›×™×©×” ×¢×“×™×¤×”.";
        else if (b.year <= 15) exp = "<strong>âš–ï¸ × ×§×•×“×ª ××™×–×•×Ÿ ×¡×‘×™×¨×”.</strong> ××—×¨×™ " + b.year + " ×©× ×™× ×¨×›×™×©×” ×¢×“×™×¤×”.";
        else exp = "<strong>ğŸ”‘ × ×§×•×“×ª ××™×–×•×Ÿ ×¨×—×•×§×”.</strong> ×¨×§ ××—×¨×™ " + b.year + " ×©× ×™× ×¨×›×™×©×” ×¢×“×™×¤×”.";
        if (state.comparisonYears < b.year) {
            var diffComp = compRes.rent.netWealth - compRes.buy.netWealth;
            exp += "<br><br>ğŸ“Š <strong>×‘×ª×§×•×¤×ª ×”×”×©×•×•××” ×©×‘×—×¨×ª× (" + state.comparisonYears + " ×©× ×™×):</strong> ×©×›×™×¨×•×ª ×¢×“×™×¤×” ×‘×”×¤×¨×© ×©×œ " + formatCurrency(diffComp) + ".";
        } else {
            var diffComp = compRes.buy.netWealth - compRes.rent.netWealth;
            exp += "<br><br>ğŸ“Š <strong>×‘×ª×§×•×¤×ª ×”×”×©×•×•××” ×©×‘×—×¨×ª× (" + state.comparisonYears + " ×©× ×™×):</strong> ×¨×›×™×©×” ×¢×“×™×¤×” ×‘×”×¤×¨×© ×©×œ " + formatCurrency(diffComp) + ".";
        }
        if (el("breakeven-explanation")) el("breakeven-explanation").innerHTML = exp;
    }
}

function updateMaxRent() {
    var years = state.comparisonYears;
    var low = 1000, high = 50000;
    while (high - low > 100) {
        var mid = (low + high) / 2;
        var origRent = state.rent;
        state.rent = mid;
        var res = calculateScenarios(years);
        state.rent = origRent;
        if (res.buyWins) low = mid;
        else high = mid;
    }
    var maxRent = Math.round(low);
    var rentYield = (state.rent * 12 / state.propertyPrice * 100).toFixed(2);
    if (el("max-rent-value")) el("max-rent-value").textContent = formatCurrency(maxRent);
    if (el("current-rent-display")) el("current-rent-display").textContent = formatCurrency(state.rent);
    if (el("rent-yield-display")) el("rent-yield-display").textContent = rentYield + "%";
    var rec = el("rent-recommendation");
    if (rec) {
        if (state.rent > maxRent) { rec.textContent = "ğŸ  ×œ×§× ×•×ª"; rec.style.color = "#10b981"; }
        else { rec.textContent = "ğŸ”‘ ×œ×©×›×•×¨"; rec.style.color = "#ec4899"; }
    }
}

function updateAll() {
    updateCompare();
    updateTimeline();
    updateMaxRent();
}

function switchTab(t) {
    container.querySelectorAll(".wpc-calc-rvb-k7m2-tab-btn").forEach(function(b){b.classList.remove("active");});
    var btn = container.querySelector("[data-tab=\\""+t+"\\"]"); if(btn) btn.classList.add("active");
    container.querySelectorAll(".wpc-calc-rvb-k7m2-tab-content").forEach(function(c){c.classList.remove("active");});
    var tab = el("tab-"+t); if(tab) tab.classList.add("active");
    updateAll();
}

container.addEventListener("click", function(e) {
    var a = e.target.closest("[data-action]"); if (!a) return;
    var act = a.dataset.action;
    if (act === "switch-tab") switchTab(a.dataset.tab);
    else if (act === "toggle-faq") { var f = a.closest(".wpc-calc-rvb-k7m2-faq-item"); if(f) f.classList.toggle("active"); }
});

container.addEventListener("input", function(e) {
    var id = e.target.id, v = parseFloat(e.target.value);
    if (id === "property-price-slider") { state.propertyPrice = v; el("property-price-value").textContent = formatCurrency(v); }
    else if (id === "equity-slider") { state.equity = v; el("equity-value").textContent = formatCurrency(v); }
    else if (id === "mortgage-rate-slider") { state.mortgageRate = v; el("mortgage-rate-value").textContent = v + "%"; }
    else if (id === "mortgage-term-slider") { state.mortgageTerm = v; el("mortgage-term-value").textContent = v + " ×©× ×™×"; }
    else if (id === "rent-slider") { state.rent = v; el("rent-value").textContent = formatCurrency(v); }
    else if (id === "rent-increase-slider") { state.rentIncrease = v; el("rent-increase-value").textContent = v + "%"; }
    else if (id === "investment-return-slider") { state.investmentReturn = v; el("investment-return-value").textContent = v + "%"; }
    else if (id === "property-appreciation-slider") { state.propertyAppreciation = v; el("property-appreciation-value").textContent = v + "%"; }
    else if (id === "comparison-years-slider") { state.comparisonYears = v; el("comparison-years-value").textContent = v + " ×©× ×™×"; }
    updateAll();
});

updateAll();
window[NS] = { version: "1.0.0" };
})();
});
<` + `/script>`;
    }

    // Event Delegation
    container.addEventListener('click', function(e) {
        const action = e.target.closest('[data-action]');
        if (!action) return;

        switch(action.dataset.action) {
            case 'switch-tab': switchTab(action.dataset.tab); break;
            case 'open-awg': openAWG(); break;
            case 'scroll-to-embed': scrollToEmbed(); break;
            case 'toggle-faq': toggleFAQ(action.closest('.wpc-calc-rvb-k7m2-faq-item')); break;
            case 'copy-embed-code': copyEmbedCode(); break;
            case 'preview-color': showPreview(action.dataset.color, action.dataset.name); break;
            case 'copy-preview-code': copyPreviewCode(); break;
        }
    });

    container.addEventListener('input', function(e) {
        const id = e.target.id;
        const v = parseFloat(e.target.value);
        
        switch(id) {
            case 'property-price-slider': state.propertyPrice = v; break;
            case 'equity-slider': state.equity = v; break;
            case 'mortgage-rate-slider': state.mortgageRate = v; break;
            case 'mortgage-term-slider': state.mortgageTerm = v; break;
            case 'rent-slider': state.rent = v; break;
            case 'rent-increase-slider': state.rentIncrease = v; break;
            case 'investment-return-slider': state.investmentReturn = v; break;
            case 'property-appreciation-slider': state.propertyAppreciation = v; break;
            case 'comparison-years-slider': state.comparisonYears = v; break;
        }
        updateAll();
    });

    updateAll();
    window[NS] = { version: '1.0.0' };
})();
</script>

