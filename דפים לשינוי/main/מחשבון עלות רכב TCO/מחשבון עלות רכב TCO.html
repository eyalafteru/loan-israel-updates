<script>
// ×‘×“×™×§×” ×•×”×•×¡×¤×ª viewport meta tag ×× ×—×¡×¨
if (!document.querySelector('meta[name="viewport"]')) {
  const viewport = document.createElement('meta');
  viewport.name = 'viewport';
  viewport.content = 'width=device-width, initial-scale=1.0, user-scalable=yes';
  document.head.appendChild(viewport);
}
</script>

<style>
/* === CSS Variables === */
:root {
  --wpc-tco-primary: #1e5490;
  --wpc-tco-primary-dark: #163d6b;
  --wpc-tco-primary-light: rgba(30, 84, 144, 0.1);
  --wpc-tco-success: #10b981;
  --wpc-tco-success-light: rgba(16, 185, 129, 0.1);
  --wpc-tco-warning: #f59e0b;
  --wpc-tco-warning-light: rgba(245, 158, 11, 0.1);
  --wpc-tco-danger: #ef4444;
  --wpc-tco-danger-light: rgba(239, 68, 68, 0.1);
  --wpc-tco-text-dark: #1f2937;
  --wpc-tco-text-light: #6b7280;
  --wpc-tco-bg-light: #f8fafc;
  --wpc-tco-white: #ffffff;
  --wpc-tco-border: #e5e7eb;
  --wpc-tco-shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
  --wpc-tco-shadow-md: 0 4px 15px rgba(0,0,0,0.1);
  --wpc-tco-shadow-lg: 0 10px 40px rgba(0,0,0,0.15);
  --wpc-tco-radius-sm: 8px;
  --wpc-tco-radius-md: 12px;
  --wpc-tco-radius-lg: 20px;
  --wpc-tco-transition: all 0.3s ease;
}

/* === Base Wrapper === */
.wpc-calc-tco-v8m3-wrapper {
  all: initial !important;
  display: block !important;
  font-family: 'Assistant', -apple-system, BlinkMacSystemFont, sans-serif !important;
  direction: rtl !important;
  color: var(--wpc-tco-text-dark) !important;
  line-height: 1.6 !important;
  max-width: 1200px !important;
  margin: 0 auto !important;
  padding: 20px !important;
  box-sizing: border-box !important;
  color-scheme: light !important;
}

.wpc-calc-tco-v8m3-wrapper * {
  box-sizing: border-box !important;
  font-family: inherit !important;
}

/* === Title Section === */
.wpc-calc-tco-v8m3-title-section {
  text-align: center !important;
  margin-bottom: 30px !important;
}

.wpc-calc-tco-v8m3-title {
  font-size: 2.2rem !important;
  font-weight: 700 !important;
  color: var(--wpc-tco-primary) !important;
  margin: 0 0 10px 0 !important;
  position: relative !important;
  padding-right: 20px !important;
}

.wpc-calc-tco-v8m3-title::after {
  content: '' !important;
  position: absolute !important;
  right: 0 !important;
  top: 50% !important;
  transform: translateY(-50%) !important;
  width: 5px !important;
  height: 60px !important;
  background: linear-gradient(180deg, var(--wpc-tco-primary) 0%, var(--wpc-tco-success) 100%) !important;
  border-radius: 3px !important;
}

.wpc-calc-tco-v8m3-subtitle {
  font-size: 1rem !important;
  color: var(--wpc-tco-text-light) !important;
  margin: 0 !important;
}

.wpc-calc-tco-v8m3-update-date {
  display: inline-block !important;
  background: var(--wpc-tco-primary-light) !important;
  color: var(--wpc-tco-primary) !important;
  padding: 5px 15px !important;
  border-radius: 20px !important;
  font-size: 0.9rem !important;
  margin-top: 10px !important;
}

/* === Calculator Container === */
.wpc-calc-tco-v8m3-calculator {
  background: var(--wpc-tco-white) !important;
  border-radius: var(--wpc-tco-radius-lg) !important;
  box-shadow: var(--wpc-tco-shadow-md) !important;
  overflow: hidden !important;
  margin-bottom: 30px !important;
}

/* === Tabs Navigation === */
.wpc-calc-tco-v8m3-tabs-nav {
  display: flex !important;
  flex-wrap: wrap !important;
  background: var(--wpc-tco-bg-light) !important;
  border-bottom: 2px solid var(--wpc-tco-border) !important;
}

.wpc-calc-tco-v8m3-tab-btn {
  flex: 1 1 auto !important;
  min-width: 100px !important;
  padding: 16px 20px !important;
  background: transparent !important;
  border: none !important;
  cursor: pointer !important;
  font-size: 1rem !important;
  font-weight: 600 !important;
  color: var(--wpc-tco-text-light) !important;
  transition: var(--wpc-tco-transition) !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 8px !important;
  border-bottom: 3px solid transparent !important;
  font-family: inherit !important;
}

.wpc-calc-tco-v8m3-tab-btn:hover {
  background: var(--wpc-tco-white) !important;
  color: var(--wpc-tco-primary) !important;
}

.wpc-calc-tco-v8m3-tab-btn.active {
  background: var(--wpc-tco-white) !important;
  color: var(--wpc-tco-primary) !important;
  border-bottom-color: var(--wpc-tco-primary) !important;
}

.wpc-calc-tco-v8m3-tab-icon {
  font-size: 1.3rem !important;
}

/* === Tab Content === */
.wpc-calc-tco-v8m3-tab-content {
  display: none !important;
  padding: 30px !important;
}

.wpc-calc-tco-v8m3-tab-content.active {
  display: block !important;
}

.wpc-calc-tco-v8m3-tab-title {
  font-size: 1.4rem !important;
  font-weight: 700 !important;
  color: var(--wpc-tco-primary) !important;
  margin: 0 0 25px 0 !important;
  text-align: center !important;
}

/* === Car Type Selector === */
.wpc-calc-tco-v8m3-type-selector {
  display: flex !important;
  gap: 15px !important;
  margin-bottom: 25px !important;
  justify-content: center !important;
}

.wpc-calc-tco-v8m3-type-btn {
  flex: 1 !important;
  max-width: 250px !important;
  padding: 15px !important;
  background: var(--wpc-tco-bg-light) !important;
  border: 2px solid var(--wpc-tco-border) !important;
  border-radius: var(--wpc-tco-radius-md) !important;
  cursor: pointer !important;
  transition: var(--wpc-tco-transition) !important;
  text-align: center !important;
  font-family: inherit !important;
}

.wpc-calc-tco-v8m3-type-btn:hover {
  border-color: var(--wpc-tco-primary) !important;
  background: var(--wpc-tco-primary-light) !important;
}

.wpc-calc-tco-v8m3-type-btn.active {
  border-color: var(--wpc-tco-primary) !important;
  background: var(--wpc-tco-primary-light) !important;
  box-shadow: 0 0 0 3px rgba(30, 84, 144, 0.2) !important;
  font-weight: 700 !important;
}

.wpc-calc-tco-v8m3-type-icon {
  font-size: 1.5rem !important;
  display: block !important;
  margin-bottom: 5px !important;
}

/* === Input Groups === */
.wpc-calc-tco-v8m3-input-group {
  margin-bottom: 25px !important;
}

.wpc-calc-tco-v8m3-input-label {
  display: block !important;
  font-size: 1rem !important;
  font-weight: 600 !important;
  color: var(--wpc-tco-text-dark) !important;
  margin-bottom: 10px !important;
}

.wpc-calc-tco-v8m3-slider-container {
  display: flex !important;
  align-items: center !important;
  gap: 15px !important;
}

.wpc-calc-tco-v8m3-slider {
  flex: 1 !important;
  -webkit-appearance: none !important;
  appearance: none !important;
  height: 8px !important;
  background: var(--wpc-tco-border) !important;
  border-radius: 4px !important;
  outline: none !important;
  cursor: pointer !important;
}

.wpc-calc-tco-v8m3-slider::-webkit-slider-thumb {
  -webkit-appearance: none !important;
  appearance: none !important;
  width: 24px !important;
  height: 24px !important;
  background: var(--wpc-tco-primary) !important;
  border-radius: 50% !important;
  cursor: pointer !important;
  box-shadow: 0 2px 6px rgba(0,0,0,0.2) !important;
  transition: var(--wpc-tco-transition) !important;
}

.wpc-calc-tco-v8m3-slider-value {
  min-width: 100px !important;
  padding: 12px 15px !important;
  background: var(--wpc-tco-primary-light) !important;
  color: var(--wpc-tco-primary) !important;
  border-radius: var(--wpc-tco-radius-sm) !important;
  font-size: 1.1rem !important;
  font-weight: 700 !important;
  text-align: center !important;
}

/* === Toggle/Switch === */
.wpc-calc-tco-v8m3-toggle-wrapper {
  display: flex !important;
  align-items: center !important;
  justify-content: space-between !important;
  margin-bottom: 20px !important;
  padding: 10px 15px !important;
  background: var(--wpc-tco-bg-light) !important;
  border-radius: var(--wpc-tco-radius-sm) !important;
}

.wpc-calc-tco-v8m3-toggle-label {
  font-weight: 600 !important;
}

/* === Advanced Options === */
.wpc-calc-tco-v8m3-advanced-toggle {
  display: block !important;
  width: 100% !important;
  text-align: center !important;
  padding: 10px !important;
  background: none !important;
  border: 1px dashed var(--wpc-tco-border) !important;
  color: var(--wpc-tco-text-light) !important;
  cursor: pointer !important;
  margin-bottom: 15px !important;
  border-radius: var(--wpc-tco-radius-sm) !important;
}

.wpc-calc-tco-v8m3-advanced-content {
  display: none !important;
  padding: 15px !important;
  background: var(--wpc-tco-bg-light) !important;
  border-radius: var(--wpc-tco-radius-md) !important;
  margin-bottom: 20px !important;
}

.wpc-calc-tco-v8m3-advanced-content.active {
  display: block !important;
}

/* === Results Section === */
.wpc-calc-tco-v8m3-results {
  background: linear-gradient(135deg, var(--wpc-tco-primary) 0%, var(--wpc-tco-primary-dark) 100%) !important;
  border-radius: var(--wpc-tco-radius-md) !important;
  padding: 25px !important;
  color: var(--wpc-tco-white) !important;
  margin-top: 25px !important;
}

.wpc-calc-tco-v8m3-results-title {
  font-size: 1.1rem !important;
  font-weight: 600 !important;
  margin: 0 0 20px 0 !important;
  text-align: center !important;
  opacity: 0.9 !important;
  color: var(--wpc-tco-white) !important;
}

.wpc-calc-tco-v8m3-results-grid {
  display: grid !important;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)) !important;
  gap: 20px !important;
}

.wpc-calc-tco-v8m3-result-item {
  background: rgba(255,255,255,0.15) !important;
  border-radius: var(--wpc-tco-radius-sm) !important;
  padding: 15px !important;
  text-align: center !important;
}

.wpc-calc-tco-v8m3-result-label {
  font-size: 0.9rem !important;
  opacity: 0.9 !important;
  margin-bottom: 8px !important;
}

.wpc-calc-tco-v8m3-result-value {
  font-size: 1.5rem !important;
  font-weight: 700 !important;
}

.wpc-calc-tco-v8m3-result-value.highlight {
  color: #fbbf24 !important;
  font-size: 1.8rem !important;
}

/* === Breakdown Bars === */
.wpc-calc-tco-v8m3-breakdown-bars {
  margin-top: 30px !important;
  background: var(--wpc-tco-white) !important;
  border: 1px solid var(--wpc-tco-border) !important;
  border-radius: var(--wpc-tco-radius-md) !important;
  padding: 20px !important;
}

.wpc-calc-tco-v8m3-bar-item {
  margin-bottom: 15px !important;
}

.wpc-calc-tco-v8m3-bar-header {
  display: flex !important;
  justify-content: space-between !important;
  margin-bottom: 5px !important;
  font-size: 0.9rem !important;
}

.wpc-calc-tco-v8m3-bar-bg {
  height: 12px !important;
  background: var(--wpc-tco-bg-light) !important;
  border-radius: 6px !important;
  overflow: hidden !important;
}

.wpc-calc-tco-v8m3-bar-fill {
  height: 100% !important;
  background: var(--wpc-tco-primary) !important;
  width: 0 !important;
  transition: width 0.5s ease !important;
}

.wpc-calc-tco-v8m3-bar-fill.depreciation { background: var(--wpc-tco-danger) !important; }
.wpc-calc-tco-v8m3-bar-fill.fuel { background: var(--wpc-tco-warning) !important; }
.wpc-calc-tco-v8m3-bar-fill.insurance { background: var(--wpc-tco-primary) !important; }
.wpc-calc-tco-v8m3-bar-fill.maintenance { background: var(--wpc-tco-success) !important; }
.wpc-calc-tco-v8m3-bar-fill.finance { background: #8b5cf6 !important; }

/* === AWG Section === */
.wpc-calc-tco-v8m3-awg-section {
  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%) !important;
  border-radius: var(--wpc-tco-radius-lg) !important;
  padding: 30px !important;
  margin: 30px 0 !important;
  text-align: center !important;
}

.wpc-calc-tco-v8m3-cta-btn {
  padding: 15px 30px !important;
  border-radius: 50px !important;
  font-size: 1.1rem !important;
  font-weight: 600 !important;
  border: none !important;
  cursor: pointer !important;
  transition: var(--wpc-tco-transition) !important;
  font-family: inherit !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 8px !important;
  margin: 5px !important;
}

.wpc-calc-tco-v8m3-cta-btn.primary {
  background: linear-gradient(135deg, var(--wpc-tco-danger) 0%, #dc2626 100%) !important;
  color: var(--wpc-tco-white) !important;
}

.wpc-calc-tco-v8m3-cta-btn.secondary {
  background: linear-gradient(135deg, var(--wpc-tco-success) 0%, #059669 100%) !important;
  color: var(--wpc-tco-white) !important;
}

.wpc-calc-tco-v8m3-awg-content {
  max-height: 0 !important;
  overflow: hidden !important;
  opacity: 0 !important;
  margin-top: 0 !important;
  transition: max-height 0.4s ease, opacity 0.3s ease, margin-top 0.3s ease !important;
}

.wpc-calc-tco-v8m3-awg-content.active {
  max-height: 2000px !important;
  opacity: 1 !important;
  overflow: visible !important;
  margin-top: 20px !important;
}

/* === Comparison Table === */
.wpc-calc-tco-v8m3-compare-table {
  width: 100% !important;
  border-collapse: collapse !important;
  margin-top: 20px !important;
}

.wpc-calc-tco-v8m3-compare-table th, 
.wpc-calc-tco-v8m3-compare-table td {
  padding: 12px !important;
  text-align: center !important;
  border: 1px solid var(--wpc-tco-border) !important;
}

.wpc-calc-tco-v8m3-compare-table th {
  background: var(--wpc-tco-bg-light) !important;
  font-weight: 700 !important;
}

/* === Embed Section === */
.wpc-calc-tco-v8m3-embed-section {
  background: var(--wpc-tco-white) !important;
  border-radius: var(--wpc-tco-radius-lg) !important;
  padding: 40px !important;
  margin: 40px 0 !important;
  box-shadow: var(--wpc-tco-shadow-sm) !important;
}

.wpc-calc-tco-v8m3-color-picker {
  display: flex !important;
  flex-wrap: wrap !important;
  justify-content: center !important;
  gap: 12px !important;
  margin: 25px 0 !important;
}

.wpc-calc-tco-v8m3-color-btn {
  width: 40px !important;
  height: 40px !important;
  border-radius: 50% !important;
  border: 3px solid var(--wpc-tco-white) !important;
  cursor: pointer !important;
  box-shadow: 0 2px 5px rgba(0,0,0,0.2) !important;
}

.wpc-calc-tco-v8m3-color-btn.active {
  transform: scale(1.2) !important;
  border-color: #333 !important;
}

/* === FAQ === */
.wpc-calc-tco-v8m3-faq-item {
  border-bottom: 1px solid var(--wpc-tco-border) !important;
  margin-bottom: 10px !important;
}

.wpc-calc-tco-v8m3-faq-header {
  padding: 15px !important;
  cursor: pointer !important;
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
  font-weight: 600 !important;
}

.wpc-calc-tco-v8m3-faq-answer {
  display: none !important;
  padding: 15px !important;
  background: var(--wpc-tco-bg-light) !important;
  line-height: 1.6 !important;
}

.wpc-calc-tco-v8m3-faq-item.active .wpc-calc-tco-v8m3-faq-answer {
  display: block !important;
}

/* === Mobile Responsive === */
@media (max-width: 768px) {
  .wpc-calc-tco-v8m3-tab-btn {
    flex: 1 1 45% !important;
    font-size: 0.9rem !important;
  }
  
  .wpc-calc-tco-v8m3-type-selector {
    flex-direction: column !important;
  }
  
  .wpc-calc-tco-v8m3-type-btn {
    max-width: 100% !important;
  }
  
  .wpc-calc-tco-v8m3-results-grid {
    grid-template-columns: 1fr 1fr !important;
  }
  
  .wpc-calc-tco-v8m3-title {
    font-size: 1.8rem !important;
  }
}

@media (max-width: 480px) {
  .wpc-calc-tco-v8m3-results-grid {
    grid-template-columns: 1fr !important;
  }
  
  .wpc-calc-tco-v8m3-slider-value {
    min-width: 80px !important;
    font-size: 0.9rem !important;
  }
}

@media (max-width: 375px) {
  .wpc-calc-tco-v8m3-wrapper {
    padding: 10px !important;
  }
  
  .wpc-calc-tco-v8m3-title {
    font-size: 1.5rem !important;
  }
  
  .wpc-calc-tco-v8m3-tab-btn {
    padding: 10px 8px !important;
    font-size: 0.8rem !important;
  }
  
  .wpc-calc-tco-v8m3-tab-icon {
    display: none !important;
  }
  
  .wpc-calc-tco-v8m3-cta-btn {
    padding: 12px 20px !important;
    font-size: 0.95rem !important;
  }
}

/* Preview Container */
.wpc-calc-tco-v8m3-preview-container {
  background: var(--wpc-tco-white) !important;
  border-radius: var(--wpc-tco-radius-md) !important;
  padding: 20px !important;
  margin-top: 20px !important;
  border: 2px solid var(--wpc-tco-border) !important;
  display: none !important;
}

.wpc-calc-tco-v8m3-preview-container.active {
  display: block !important;
}
</style>

<div class="wpc-calc-tco-v8m3-wrapper" id="wpc-calc-tco-v8m3-main">
  
  <!-- Title Section -->
  <div class="wpc-calc-tco-v8m3-title-section">
    <h1 class="wpc-calc-tco-v8m3-title">××—×©×‘×•×Ÿ ×¢×œ×•×ª ×¨×›×‘ ×××™×ª×™×ª </h1>
    <p class="wpc-calc-tco-v8m3-subtitle">×’×œ×• ×›××” ×‘×××ª ×¢×•×œ×” ×œ×›× ×”×¨×›×‘ ×‘×—×•×“×© - ×›×•×œ×œ ×™×¨×™×“×ª ×¢×¨×š, ×“×œ×§, ×‘×™×˜×•×—×™× ×•×˜×™×¤×•×œ×™×</p>
    <span class="wpc-calc-tco-v8m3-update-date">ğŸ“… ××¢×•×“×›×Ÿ ×œ-2025 (×›×•×œ×œ ×¨×›×‘ ×—×©××œ×™)</span>
  </div>

  <!-- Calculator -->
  <div class="wpc-calc-tco-v8m3-calculator" id="wpc-calc-tco-v8m3-calculator">
    
    <!-- Tabs Navigation -->
    <div class="wpc-calc-tco-v8m3-tabs-nav">
      <button class="wpc-calc-tco-v8m3-tab-btn active" data-action="switch-tab" data-tab="calc">
        <span class="wpc-calc-tco-v8m3-tab-icon">ğŸ§®</span>
        <span>×—×™×©×•×‘ ×¢×œ×•×ª</span>
      </button>
      <button class="wpc-calc-tco-v8m3-tab-btn" data-action="switch-tab" data-tab="compare">
        <span class="wpc-calc-tco-v8m3-tab-icon">âš–ï¸</span>
        <span>×”×©×•×•××”</span>
      </button>
      <button class="wpc-calc-tco-v8m3-tab-btn" data-action="switch-tab" data-tab="info">
        <span class="wpc-calc-tco-v8m3-tab-icon">â„¹ï¸</span>
        <span>××™×“×¢ ×•×˜×™×¤×™×</span>
      </button>
    </div>

    <!-- Tab 1: Calculator -->
    <div class="wpc-calc-tco-v8m3-tab-content active" id="tab-calc">
      <h2 class="wpc-calc-tco-v8m3-tab-title">×—×™×©×•×‘ ×¢×œ×•×ª ×‘×¢×œ×•×ª ×›×•×œ×œ×ª (TCO)</h2>
      
      <div class="wpc-calc-tco-v8m3-type-selector">
        <button class="wpc-calc-tco-v8m3-type-btn active" data-action="select-type" data-type="gas">
          <span class="wpc-calc-tco-v8m3-type-icon">â›½</span>
          <span>×‘× ×–×™×Ÿ</span>
        </button>
        <button class="wpc-calc-tco-v8m3-type-btn" data-action="select-type" data-type="hybrid">
          <span class="wpc-calc-tco-v8m3-type-icon">ğŸ”‹</span>
          <span>×”×™×‘×¨×™×“×™</span>
        </button>
        <button class="wpc-calc-tco-v8m3-type-btn" data-action="select-type" data-type="electric">
          <span class="wpc-calc-tco-v8m3-type-icon">âš¡</span>
          <span>×—×©××œ×™</span>
        </button>
      </div>

      <!-- Main Inputs -->
      <div class="wpc-calc-tco-v8m3-input-group">
        <label class="wpc-calc-tco-v8m3-input-label">ğŸ’° ××—×™×¨ ×”×¨×›×‘ (â‚ª)</label>
        <div class="wpc-calc-tco-v8m3-slider-container">
          <input type="range" class="wpc-calc-tco-v8m3-slider" id="price-slider" 
                 min="50000" max="500000" step="1000" value="150000">
          <div class="wpc-calc-tco-v8m3-slider-value" id="price-value">â‚ª150,000</div>
        </div>
      </div>

      <div class="wpc-calc-tco-v8m3-input-group">
        <label class="wpc-calc-tco-v8m3-input-label">ğŸš— ×§×™×œ×•××˜×¨××–' ×©× ×ª×™ ××©×•×¢×¨</label>
        <div class="wpc-calc-tco-v8m3-slider-container">
          <input type="range" class="wpc-calc-tco-v8m3-slider" id="km-slider" 
                 min="5000" max="50000" step="1000" value="15000">
          <div class="wpc-calc-tco-v8m3-slider-value" id="km-value">15,000 ×§"×</div>
        </div>
      </div>

      <div class="wpc-calc-tco-v8m3-input-group">
        <label class="wpc-calc-tco-v8m3-input-label">ğŸ“… ×›××” ×©× ×™× ×ª×—×–×™×§×• ×‘×¨×›×‘?</label>
        <div class="wpc-calc-tco-v8m3-slider-container">
          <input type="range" class="wpc-calc-tco-v8m3-slider" id="years-slider" 
                 min="1" max="10" step="1" value="3">
          <div class="wpc-calc-tco-v8m3-slider-value" id="years-value">3 ×©× ×™×</div>
        </div>
      </div>

      <!-- Advanced Options Toggle -->
      <button class="wpc-calc-tco-v8m3-advanced-toggle" data-action="toggle-advanced">
        âš™ï¸ ×”×’×“×¨×•×ª ××ª×§×“××•×ª (×‘×™×˜×•×—, ×“×œ×§, ××™××•×Ÿ) â–¼
      </button>

      <div class="wpc-calc-tco-v8m3-advanced-content" id="advanced-options">
        <div class="wpc-calc-tco-v8m3-input-group">
          <label class="wpc-calc-tco-v8m3-input-label">ğŸ›¡ï¸ ×‘×™×˜×•×— ×—×•×‘×” + ××§×™×£ (×©× ×ª×™)</label>
          <div class="wpc-calc-tco-v8m3-slider-container">
            <input type="range" class="wpc-calc-tco-v8m3-slider" id="insurance-slider" 
                   min="3000" max="15000" step="100" value="6000">
            <div class="wpc-calc-tco-v8m3-slider-value" id="insurance-value">â‚ª6,000</div>
          </div>
        </div>

        <div class="wpc-calc-tco-v8m3-input-group">
          <label class="wpc-calc-tco-v8m3-input-label">ğŸ”§ ×˜×™×¤×•×œ×™× ×•×˜×¡×˜ (×©× ×ª×™)</label>
          <div class="wpc-calc-tco-v8m3-slider-container">
            <input type="range" class="wpc-calc-tco-v8m3-slider" id="maintenance-slider" 
                   min="1000" max="10000" step="100" value="3000">
            <div class="wpc-calc-tco-v8m3-slider-value" id="maintenance-value">â‚ª3,000</div>
          </div>
        </div>
        
        <div class="wpc-calc-tco-v8m3-input-group">
          <label class="wpc-calc-tco-v8m3-input-label">ğŸ“‰ ×™×¨×™×“×ª ×¢×¨×š ×©× ×ª×™×ª ××©×•×¢×¨×ª (%)</label>
          <div class="wpc-calc-tco-v8m3-slider-container">
            <input type="range" class="wpc-calc-tco-v8m3-slider" id="depreciation-slider" 
                   min="5" max="25" step="0.5" value="15">
            <div class="wpc-calc-tco-v8m3-slider-value" id="depreciation-value">15%</div>
          </div>
        </div>

        <div class="wpc-calc-tco-v8m3-input-group">
          <label class="wpc-calc-tco-v8m3-input-label">â›½ ××—×™×¨ ×œ×œ×™×˜×¨/×§×•×˜"×©</label>
          <div class="wpc-calc-tco-v8m3-slider-container">
            <input type="number" class="wpc-calc-tco-v8m3-slider-value" id="fuel-price-input" 
                   value="7.50" step="0.1" style="width: 100px;">
          </div>
        </div>
      </div>

      <!-- Results -->
      <div class="wpc-calc-tco-v8m3-results">
        <h3 class="wpc-calc-tco-v8m3-results-title">ğŸ“Š ×”×ª×•×¦××”: ×›××” ×¢×•×œ×” ×”×¨×›×‘ ×‘×××ª?</h3>
        
        <div class="wpc-calc-tco-v8m3-results-grid">
          <div class="wpc-calc-tco-v8m3-result-item">
            <div class="wpc-calc-tco-v8m3-result-label">×¢×œ×•×ª ×—×•×“×©×™×ª ×××•×¦×¢×ª</div>
            <div class="wpc-calc-tco-v8m3-result-value highlight" id="result-monthly">â‚ª0</div>
          </div>
          <div class="wpc-calc-tco-v8m3-result-item">
            <div class="wpc-calc-tco-v8m3-result-label">×¢×œ×•×ª ×œ×§×™×œ×•××˜×¨</div>
            <div class="wpc-calc-tco-v8m3-result-value" id="result-per-km">â‚ª0</div>
          </div>
          <div class="wpc-calc-tco-v8m3-result-item">
            <div class="wpc-calc-tco-v8m3-result-label">×¡×”"×› ×¢×œ×•×ª ×œ×ª×§×•×¤×”</div>
            <div class="wpc-calc-tco-v8m3-result-value" id="result-total">â‚ª0</div>
          </div>
        </div>
      </div>

      <!-- Breakdown Bars -->
      <div class="wpc-calc-tco-v8m3-breakdown-bars">
        <h4 style="margin: 0 0 20px 0; text-align: center;">×××” ××•×¨×›×‘×ª ×”×¢×œ×•×ª ×”×—×•×“×©×™×ª?</h4>
        
        <div class="wpc-calc-tco-v8m3-bar-item">
          <div class="wpc-calc-tco-v8m3-bar-header">
            <span>×™×¨×™×“×ª ×¢×¨×š (×”×”×•×¦××” ×”×’×“×•×œ×” ×‘×™×•×ª×¨!)</span>
            <span id="bar-val-depreciation">â‚ª0</span>
          </div>
          <div class="wpc-calc-tco-v8m3-bar-bg">
            <div class="wpc-calc-tco-v8m3-bar-fill depreciation" id="bar-fill-depreciation"></div>
          </div>
        </div>

        <div class="wpc-calc-tco-v8m3-bar-item">
          <div class="wpc-calc-tco-v8m3-bar-header">
            <span>×“×œ×§ / ×—×©××œ</span>
            <span id="bar-val-fuel">â‚ª0</span>
          </div>
          <div class="wpc-calc-tco-v8m3-bar-bg">
            <div class="wpc-calc-tco-v8m3-bar-fill fuel" id="bar-fill-fuel"></div>
          </div>
        </div>

        <div class="wpc-calc-tco-v8m3-bar-item">
          <div class="wpc-calc-tco-v8m3-bar-header">
            <span>×‘×™×˜×•×—×™×</span>
            <span id="bar-val-insurance">â‚ª0</span>
          </div>
          <div class="wpc-calc-tco-v8m3-bar-bg">
            <div class="wpc-calc-tco-v8m3-bar-fill insurance" id="bar-fill-insurance"></div>
          </div>
        </div>

        <div class="wpc-calc-tco-v8m3-bar-item">
          <div class="wpc-calc-tco-v8m3-bar-header">
            <span>×˜×™×¤×•×œ×™× ×•×˜×¡×˜</span>
            <span id="bar-val-maintenance">â‚ª0</span>
          </div>
          <div class="wpc-calc-tco-v8m3-bar-bg">
            <div class="wpc-calc-tco-v8m3-bar-fill maintenance" id="bar-fill-maintenance"></div>
          </div>
        </div>
      </div>

      <div style="margin-top: 20px; font-size: 0.9rem; color: #666; background: #f0f0f0; padding: 10px; border-radius: 8px;">
        ğŸ’¡ <strong>×˜×™×¤:</strong> ×™×¨×™×“×ª ×”×¢×¨×š ×”×™× ×œ×¨×•×‘ "×”×¢×œ×•×ª ×”×©×§×•×¤×”" ×©×¨×•×‘ ×”×× ×©×™× ×©×•×›×—×™× ×œ×—×©×‘. ×”×™× ××”×•×•×” ×›-40%-50% ××¡×š ×”×•×¦××•×ª ×”×¨×›×‘!
      </div>

    </div>

    <!-- Tab 2: Comparison -->
    <div class="wpc-calc-tco-v8m3-tab-content" id="tab-compare">
      <h2 class="wpc-calc-tco-v8m3-tab-title">×”×©×•×•××ª ×¨×›×‘×™× (×—×©××œ×™ ××•×œ ×‘× ×–×™×Ÿ)</h2>
      <p style="text-align: center;">×”×©×•×•××” ×œ-3 ×©× ×™×, 15,000 ×§"× ×‘×©× ×”</p>
      
      <table class="wpc-calc-tco-v8m3-compare-table">
        <thead>
          <tr>
            <th>×¤×¨××˜×¨</th>
            <th>×¨×›×‘ ×‘× ×–×™×Ÿ ××©×¤×—×ª×™</th>
            <th>×¨×›×‘ ×—×©××œ×™ ××©×¤×—×ª×™</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>××—×™×¨ ×¨×›×™×©×”</td>
            <td>â‚ª150,000</td>
            <td>â‚ª165,000</td>
          </tr>
          <tr>
            <td>××’×¨×ª ×¨×™×©×•×™ (×©× ×ª×™×ª)</td>
            <td>â‚ª1,800</td>
            <td>â‚ª580 (2025)</td>
          </tr>
          <tr>
            <td>×¢×œ×•×ª ×× ×¨×’×™×” (×©× ×ª×™×ª)</td>
            <td>â‚ª7,500</td>
            <td>â‚ª2,250</td>
          </tr>
          <tr>
            <td>×˜×™×¤×•×œ×™× (×©× ×ª×™)</td>
            <td>â‚ª1,500</td>
            <td>â‚ª400</td>
          </tr>
          <tr>
            <td>×™×¨×™×“×ª ×¢×¨×š (×©× ×ª×™×ª)</td>
            <td>12%</td>
            <td>15%</td>
          </tr>
          <tr style="background: #e0f2fe; font-weight: bold;">
            <td>×¢×œ×•×ª ×—×•×“×©×™×ª ×›×•×œ×œ×ª</td>
            <td>â‚ª3,450</td>
            <td>â‚ª2,980</td>
          </tr>
        </tbody>
      </table>
      
      <p style="margin-top: 15px; font-size: 0.9rem;">
        * ×”× ×ª×•× ×™× ×œ×”××—×©×” ×‘×œ×‘×“ ×•×¢×©×•×™×™× ×œ×”×©×ª× ×•×ª ×‘×”×ª×× ×œ×“×’× ×•×¡×’× ×•×Ÿ × ×”×™×’×”.
        <br>
        * ×¨×›×‘ ×—×©××œ×™ ×™×§×¨ ×™×•×ª×¨ ×œ×¨×›×™×©×”, ××š ×–×•×œ ××©××¢×•×ª×™×ª ×‘××—×–×§×” ×©×•×˜×¤×ª.
      </p>
    </div>

    <!-- Tab 3: Info -->
    <div class="wpc-calc-tco-v8m3-tab-content" id="tab-info">
      <h2 class="wpc-calc-tco-v8m3-tab-title">××•×©×’×™× ×©×—×©×•×‘ ×œ×”×›×™×¨ ×‘-TCO</h2>
      
      <div style="margin-bottom: 20px;">
        <h3 style="font-size: 1.1rem; color: var(--wpc-tco-primary);">ğŸ“‰ ×™×¨×™×“×ª ×¢×¨×š (Depreciation)</h3>
        <p>×”×›×¡×£ ×©×”×¨×›×‘ "×××‘×“" ×‘×›×œ ×©× ×”. ×¨×›×‘ ×—×“×© ×××‘×“ ×›-15-20% ×‘×©× ×” ×”×¨××©×•× ×” ×•×›-10-15% ×‘×©× ×™× ×©××—×¨×™×”. ×–×• ×”×”×•×¦××” ×”×’×“×•×œ×” ×‘×™×•×ª×¨ ×‘××—×–×§×ª ×¨×›×‘!</p>
      </div>
      
      <div style="margin-bottom: 20px;">
        <h3 style="font-size: 1.1rem; color: var(--wpc-tco-primary);">ğŸ’¸ ×¢×œ×•×ª ××œ×˜×¨× ×˜×™×‘×™×ª (Financing)</h3>
        <p>×’× ×× ×§× ×™×ª× ×‘××–×•××Ÿ, ×”×›×¡×£ ×”×–×” ×”×™×” ×™×›×•×œ ×œ×©×‘×ª ×‘×‘× ×§ ×•×œ×¦×‘×•×¨ ×¨×™×‘×™×ª (×œ××©×œ 4%). ×–×”×• "×”×¤×¡×“" ×©×™×© ×œ×§×—×ª ×‘×—×©×‘×•×Ÿ.</p>
      </div>

      <div style="margin-bottom: 20px;">
        <h3 style="font-size: 1.1rem; color: var(--wpc-tco-primary);">âš¡ ×˜×¢×™× ×” ×‘×™×ª×™×ª ××•×œ ×¦×™×‘×•×¨×™×ª</h3>
        <p>×¢×œ×•×ª ×˜×¢×™× ×” ×‘×™×ª×™×ª ×”×™× ×›-0.6 â‚ª ×œ×§×•×˜"×©. ×˜×¢×™× ×” ××”×™×¨×” ×¦×™×‘×•×¨×™×ª ×™×›×•×œ×” ×œ×¢×œ×•×ª ×¤×™ 3-4 (×›-2.5 â‚ª ×œ×§×•×˜"×©). ×”×—×™×©×•×‘ ×‘××—×©×‘×•×Ÿ ××ª×‘×¡×¡ ×‘×¢×™×§×¨ ×¢×œ ×˜×¢×™× ×” ×‘×™×ª×™×ª.</p>
      </div>
    </div>

  </div>

  <!-- AWG Section -->
  <div class="wpc-calc-tco-v8m3-awg-section">
    <h3 style="margin-top:0; color: var(--wpc-tco-primary);">××ª×œ×‘×˜×™× ××™×š ×œ×××Ÿ ××ª ×”×¨×›×‘?</h3>
    <p>×‘×“×™×§×ª ×–×›××•×ª ×œ×”×œ×•×•××” ×œ×¨×›×‘ ×‘×ª× ××™× ××•×¢×“×¤×™× - ×œ×œ× ×”×ª×—×™×™×‘×•×ª!</p>
    <div>
      <button class="wpc-calc-tco-v8m3-cta-btn primary" data-action="open-awg">
        ğŸš— ×‘×“×•×§ ×–×›××•×ª ×œ××™××•×Ÿ ×¨×›×‘
      </button>
      <button class="wpc-calc-tco-v8m3-cta-btn secondary" data-action="scroll-to-embed">
        ğŸ ×œ×”×˜××¢×ª ×”××—×©×‘×•×Ÿ ×‘××ª×¨×š
      </button>
    </div>
    <div class="wpc-calc-tco-v8m3-awg-content" id="awg-content">
      <!-- AWG Shortcode -->
      <div style="background: white; padding: 10px; border-radius: 8px;">
        [awg postid="32400"]
      </div>
    </div>
  </div>

  <!-- Embed Section -->
  <div class="wpc-calc-tco-v8m3-embed-section" id="wpc-calc-tco-v8m3-embed">
    <h2 style="text-align: center; color: var(--wpc-tco-primary); margin-bottom: 20px;">ğŸ ×¨×•×¦×™× ×œ×”×˜××™×¢ ××ª ××—×©×‘×•×Ÿ ×¢×œ×•×ª ×”×¨×›×‘ (TCO) ×‘××ª×¨ ×©×œ×›×? ×—×™× × ×œ×—×œ×•×˜×™×Ÿ!</h2>
    
    <!-- ×ª×™××•×¨ ×¢×¨×š -->
    <div style="background: rgba(30, 84, 144, 0.08); padding: 20px; border-radius: 12px; margin-bottom: 30px; border-right: 4px solid var(--wpc-tco-primary);">
      <p style="font-size: 1.1em; line-height: 1.7; margin: 0; color: #222;">
        <strong>ğŸ’ ×× ×—× ×• × ×•×ª× ×™× ×œ×›× ××ª ××—×©×‘×•×Ÿ ×¢×œ×•×ª ×”×¨×›×‘ (TCO) ×”××ª×§×“× ×”×–×” ×œ×—×œ×•×˜×™×Ÿ ×‘×—×™× ×!</strong><br>
        ×ª××•×¨×ª ×§×™×©×•×¨ ×§×¨×“×™×˜ ×§×˜×Ÿ ×œ××ª×¨ ×©×œ× ×•, ×ª×§×‘×œ×• ××—×©×‘×•×Ÿ ××§×¦×•×¢×™ ×¢× <strong>3 ×˜××‘×™×</strong> (×—×™×©×•×‘ ×¢×œ×•×ª, ×”×©×•×•××ª ×¨×›×‘×™×, ××™×“×¢ ×•×˜×™×¤×™×), ×—×™×©×•×‘×™× ××“×•×™×§×™× ×©×œ ×™×¨×™×“×ª ×¢×¨×š, ×“×œ×§, ×‘×™×˜×•×— ×•×˜×™×¤×•×œ×™× - ×•×¢×™×¦×•×‘ responsive ××œ×.<br>
        <strong>×©×•×•×™ ×”××—×©×‘×•×Ÿ:</strong> ××¢×œ â‚ª12,000 ×‘×¤×™×ª×•×— ğŸ’° | <strong>××” ×©×©×™×œ××ª×:</strong> â‚ª0 ğŸ‰
      </p>
    </div>
    
    <!-- ×™×ª×¨×•× ×•×ª SEO -->
    <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 25px; border-radius: 12px; margin: 30px 0; border: 2px solid #0ea5e9;">
      <h3 style="color: #0369a1; margin-top: 0;">ğŸš€ ×œ××” ×œ×”×˜××™×¢ ××—×©×‘×•×Ÿ ×‘××ª×¨ ×©×œ×›×? ×–×” ××©×¤×¨ ××ª ×”-SEO!</h3>
      <p style="line-height: 1.8; color: #222; margin-bottom: 15px;">
        <strong>×”×•×¡×¤×ª ××—×©×‘×•×Ÿ ×¢×œ×•×ª ×¨×›×‘ ××™× ×˜×¨××§×˜×™×‘×™ ×œ××ª×¨ ×”×™× ××—×ª ×”×“×¨×›×™× ×”×˜×•×‘×•×ª ×‘×™×•×ª×¨ ×œ×©×¤×¨ ××ª ×“×™×¨×•×’ ×”××ª×¨ ×‘×× ×•×¢×™ ×”×—×™×¤×•×©!</strong>
      </p>
      <ul style="line-height: 2; color: #222; margin: 0; padding-right: 20px;">
        <li>ğŸ“ˆ <strong>×ª×•×›×Ÿ ××™× ×˜×¨××§×˜×™×‘×™ ××™×›×•×ª×™</strong> - ×’×•×’×œ ××•×”×‘×ª ×“×¤×™× ×¢× ×›×œ×™× ×©×™××•×©×™×™×</li>
        <li>â±ï¸ <strong>×–××Ÿ ×©×”×™×™×” ××¨×•×š ×™×•×ª×¨</strong> - ××‘×§×¨×™× × ×©××¨×™× ×‘×“×£ ×™×•×ª×¨ ×–××Ÿ</li>
        <li>ğŸ”— <strong>××™×œ×•×ª ××¤×ª×— ×¨×œ×•×•× ×˜×™×•×ª</strong> - ×”××—×©×‘×•×Ÿ ×›×•×œ×œ ××™×œ×•×ª ××¤×ª×— ×›××• "×¢×œ×•×ª ×‘×¢×œ×•×ª ×¨×›×‘, TCO, ×™×¨×™×“×ª ×¢×¨×š, ×¨×›×‘ ×—×©××œ×™ ××•×œ ×‘× ×–×™×Ÿ, ×¢×œ×•×ª ×œ×§×™×œ×•××˜×¨"</li>
        <li>ğŸ¯ <strong>××—×©×‘×•×Ÿ ×‘×—×™× × ×œ×”×˜××¢×”</strong> - ×ª×•×›×Ÿ ×™×™×—×•×“×™ ×‘×œ×™ ×¢×œ×•×ª ×¤×™×ª×•×—</li>
        <li>ğŸ’¼ <strong>××§×¦×•×¢×™×•×ª ×•×××™× ×•×ª</strong> - ××ª×¨ ×¢× ×›×œ×™ ××—×©×‘×•×Ÿ × ×¨××” ××§×¦×•×¢×™ ×™×•×ª×¨</li>
        <li>ğŸ“± <strong>Mobile Friendly</strong> - ××—×©×‘×•×Ÿ responsive ××œ×</li>
        <li>ğŸ”„ <strong>×¢×“×›×•× ×™× ×—×•×–×¨×™×</strong> - ××©×ª××©×™× ×—×•×–×¨×™× ×œ××ª×¨</li>
        <li>ğŸ“Š <strong>×”×§×˜× ×ª Bounce Rate</strong> - ×”××‘×§×¨×™× × ×©××¨×™× ×œ×”×©×ª××© ×‘×›×œ×™</li>
      </ul>
      <p style="margin-top: 20px; margin-bottom: 0; padding: 15px; background: white; border-radius: 8px; color: #0369a1; font-weight: 700;">
        ğŸ’¡ <strong>×˜×™×¤ SEO:</strong> ×”×•×¡×™×¤×• ××ª ×”××—×©×‘×•×Ÿ ×‘×“×¤×™× ×¨×œ×•×•× ×˜×™×™× ×›××• "×”×©×•×•××ª ×¨×›×‘×™×, ××™××•×Ÿ ×¨×›×‘, ×¨×›×‘ ×—×©××œ×™ ××•×œ ×‘× ×–×™×Ÿ, ×¢×œ×•×™×•×ª ×¨×›×‘" - 
        ×–×” ×™×—×–×§ ××ª ×”×“×£ ×‘×“×™×•×§ ×‘××™×œ×•×ª ×”××¤×ª×— ×©××ª× ×¨×•×¦×™× ×œ×“×¨×’ ×¢×œ×™×”×Ÿ!
      </p>
    </div>
    
    <!-- ×”×•×¨××•×ª ×”×˜××¢×” -->
    <div style="background: #fef3c7; padding: 20px; border-radius: 12px; margin-bottom: 30px; border-right: 4px solid #f59e0b;">
      <h3 style="color: #b45309; margin-top: 0;">ğŸ“‹ ××™×š ××˜××™×¢×™×? 3 ×¦×¢×“×™× ×¤×©×•×˜×™×:</h3>
      <ol style="line-height: 2; color: #222; margin: 0; padding-right: 20px;">
        <li>×‘×—×¨×• ×¦×‘×¢ ×©××ª××™× ×œ××ª×¨ ×©×œ×›× (××• ×”×©××™×¨×• ××ª ×‘×¨×™×¨×ª ×”××—×“×œ)</li>
        <li>×œ×—×¦×• ×¢×œ "×”×¢×ª×§ ×§×•×“ HTML ××œ×"</li>
        <li>×”×“×‘×™×§×• ××ª ×”×§×•×“ ×‘×¢××•×“ ×©×œ×›× - ×•×–×”×•!</li>
      </ol>
    </div>
    
    <div style="text-align: center; margin: 20px 0;">
      <button class="wpc-calc-tco-v8m3-cta-btn secondary" data-action="copy-embed-code">
        ğŸ“‹ ×”×¢×ª×§ ×§×•×“ HTML ××œ×
      </button>
    </div>

    <div style="text-align: center;">
      <p style="font-weight: bold;">ğŸ¨ ×‘×—×¨ ×¦×‘×¢ ×œ××—×©×‘×•×Ÿ:</p>
      <div class="wpc-calc-tco-v8m3-color-picker">
        <button class="wpc-calc-tco-v8m3-color-btn active" style="background: #1e5490;" data-action="preview-color" data-color="#1e5490" data-name="×›×—×•×œ ××§×¦×•×¢×™" title="×›×—×•×œ ××§×¦×•×¢×™"></button>
        <button class="wpc-calc-tco-v8m3-color-btn" style="background: #10b981;" data-action="preview-color" data-color="#10b981" data-name="×™×¨×•×§ ×¦××™×—×”" title="×™×¨×•×§ ×¦××™×—×”"></button>
        <button class="wpc-calc-tco-v8m3-color-btn" style="background: #ef4444;" data-action="preview-color" data-color="#ef4444" data-name="××“×•× ×× ×¨×’×˜×™" title="××“×•× ×× ×¨×’×˜×™"></button>
        <button class="wpc-calc-tco-v8m3-color-btn" style="background: #f59e0b;" data-action="preview-color" data-color="#f59e0b" data-name="×›×ª×•× ×“×™× ××™" title="×›×ª×•× ×“×™× ××™"></button>
        <button class="wpc-calc-tco-v8m3-color-btn" style="background: #8b5cf6;" data-action="preview-color" data-color="#8b5cf6" data-name="×¡×’×•×œ ×™×•×§×¨×ª×™" title="×¡×’×•×œ ×™×•×§×¨×ª×™"></button>
        <button class="wpc-calc-tco-v8m3-color-btn" style="background: #ec4899;" data-action="preview-color" data-color="#ec4899" data-name="×•×¨×•×“ ××•×“×¨× ×™" title="×•×¨×•×“ ××•×“×¨× ×™"></button>
        <button class="wpc-calc-tco-v8m3-color-btn" style="background: #06b6d4;" data-action="preview-color" data-color="#06b6d4" data-name="×˜×•×¨×§×™×– ×¨×¢× ×Ÿ" title="×˜×•×¨×§×™×– ×¨×¢× ×Ÿ"></button>
        <button class="wpc-calc-tco-v8m3-color-btn" style="background: #84cc16;" data-action="preview-color" data-color="#84cc16" data-name="×œ×™×™× ×¢×–" title="×œ×™×™× ×¢×–"></button>
        <button class="wpc-calc-tco-v8m3-color-btn" style="background: #f97316;" data-action="preview-color" data-color="#f97316" data-name="×›×ª×•× ×‘×•×”×§" title="×›×ª×•× ×‘×•×”×§"></button>
        <button class="wpc-calc-tco-v8m3-color-btn" style="background: #0891b2;" data-action="preview-color" data-color="#0891b2" data-name="×›×—×•×œ ×™×" title="×›×—×•×œ ×™×"></button>
      </div>
      <div style="margin-top: 15px;">
        <label style="font-weight: 600;">ğŸ¨ ×¦×‘×¢ ××•×ª×× ××™×©×™×ª: </label>
        <input type="color" id="custom-color-picker" value="#1e5490" 
               style="width: 45px; height: 45px; border-radius: 8px; cursor: pointer; border: 2px solid #ddd; vertical-align: middle;">
      </div>
    </div>
    
    <!-- ×ª× ××™ ×©×™××•×© -->
    <div style="background: #f1f5f9; padding: 20px; border-radius: 12px; margin: 30px 0; font-size: 0.9em; color: #475569;">
      <h4 style="margin-top: 0; color: #334155;">ğŸ“œ ×ª× ××™ ×©×™××•×©:</h4>
      <ul style="line-height: 1.8; margin: 0; padding-right: 20px;">
        <li>âœ… ×”×©×™××•×© ×‘××—×©×‘×•×Ÿ ×—×™× ××™ ×œ×—×œ×•×˜×™×Ÿ</li>
        <li>âœ… ××•×ª×¨ ×œ×”×˜××™×¢ ×‘×›×œ ××ª×¨ (×¢×¡×§×™, ××™×©×™, ×××©×œ×ª×™)</li>
        <li>âš ï¸ <strong>×—×•×‘×” ×œ×”×©××™×¨ ××ª ×”×§×¨×“×™×˜</strong> ×œ××ª×¨ loan-israel.co.il</li>
        <li>âŒ ××¡×•×¨ ×œ×”×¡×™×¨ ××• ×œ×”×¡×ª×™×¨ ××ª ×”×§×¨×“×™×˜</li>
        <li>âŒ ××¡×•×¨ ×œ×©× ×•×ª ××ª ×”×§×•×“ ×‘××•×¤×Ÿ ×©××¡×™×¨ ××ª ×”×§×¨×“×™×˜</li>
      </ul>
      <p style="margin-bottom: 0; margin-top: 15px; font-style: italic;">
        ×‘×”×˜××¢×ª ×”××—×©×‘×•×Ÿ ××ª× ××¡×›×™××™× ×œ×ª× ××™× ××œ×”. ×ª×•×“×” ×©××ª× ×ª×•××›×™× ×‘×ª×•×›×Ÿ ×—×™× ××™ ×•××™×›×•×ª×™! ğŸ™
      </p>
    </div>

    <!-- Preview Container -->
    <div class="wpc-calc-tco-v8m3-preview-container" id="preview-container">
      <h4 style="text-align: center; margin-bottom: 15px; color: var(--wpc-tco-primary);">âœ¨ ×ª×¦×•×’×” ××§×“×™××” ×‘×¦×‘×¢: <span id="preview-color-name">×›×—×•×œ ××§×¦×•×¢×™</span></h4>
      <div id="preview-content"></div>
      <div style="text-align: center; margin-top: 20px;">
        <button class="wpc-calc-tco-v8m3-cta-btn secondary" data-action="copy-preview-code">
          ğŸ“‹ ×”×¢×ª×§ ×§×•×“ ×¢× ×”×¦×‘×¢ ×”× ×‘×—×¨
        </button>
      </div>
    </div>
  </div>

  <!-- FAQ Section -->
  <div style="margin-top: 40px;">
    <h2 class="wpc-calc-tco-v8m3-tab-title">×©××œ×•×ª × ×¤×•×¦×•×ª ×¢×œ ×¢×œ×•×™×•×ª ×¨×›×‘</h2>
    
    <div class="wpc-calc-tco-v8m3-faq-item" data-action="toggle-faq">
      <div class="wpc-calc-tco-v8m3-faq-header">
        <span>â“ ××” ×–×” TCO ×•×œ××” ×–×” ×—×©×•×‘?</span>
        <span>â–¼</span>
      </div>
      <div class="wpc-calc-tco-v8m3-faq-answer">
        TCO (Total Cost of Ownership) ×”×•× ×—×™×©×•×‘ ×¢×œ×•×ª ×”×‘×¢×œ×•×ª ×”×›×•×œ×œ×ª. ×¨×•×‘ ×”×× ×©×™× ××¡×ª×›×œ×™× ×¨×§ ×¢×œ ×”×—×–×¨ ×”×”×œ×•×•××” ×•×”×“×œ×§, ××š ×©×•×›×—×™× ××ª ×™×¨×™×“×ª ×”×¢×¨×š, ×”×‘×™×˜×•×—×™× ×•×”×˜×™×¤×•×œ×™× - ×©×™×›×•×œ×™× ×œ×”×›×¤×™×œ ××ª ×”×¢×œ×•×ª ×”×—×•×“×©×™×ª ×”×××™×ª×™×ª.
      </div>
    </div>

    <div class="wpc-calc-tco-v8m3-faq-item" data-action="toggle-faq">
      <div class="wpc-calc-tco-v8m3-faq-header">
        <span>â“ ×”×× ×¨×›×‘ ×—×©××œ×™ ×‘×××ª ×—×•×¡×š ×›×¡×£?</span>
        <span>â–¼</span>
      </div>
      <div class="wpc-calc-tco-v8m3-faq-answer">
        ×›×Ÿ, ×‘×“×¨×š ×›×œ×œ. ×¢×œ×•×ª ×”×× ×¨×’×™×” (×—×©××œ) ×”×™× ×›×¨×‘×¢ ××¢×œ×•×ª ×”×‘× ×–×™×Ÿ, ×•××’×¨×ª ×”×¨×™×©×•×™ ×•×”×˜×™×¤×•×œ×™× ×–×•×œ×™× ××©××¢×•×ª×™×ª. ×¢× ×–××ª, ×™×© ×œ×§×—×ª ×‘×—×©×‘×•×Ÿ ××ª ××—×™×¨ ×”×¨×›×™×©×” ×”×’×‘×•×” ×™×•×ª×¨ ×•××ª ×¢×œ×•×ª ×”×ª×§× ×ª ×¢××“×ª ×”×˜×¢×™× ×”.
      </div>
    </div>

    <div class="wpc-calc-tco-v8m3-faq-item" data-action="toggle-faq">
      <div class="wpc-calc-tco-v8m3-faq-header">
        <span>â“ ××™×š ××©×¤×™×¢×” ×™×¨×™×“×ª ×”×¢×¨×š?</span>
        <span>â–¼</span>
      </div>
      <div class="wpc-calc-tco-v8m3-faq-answer">
        ×¨×›×‘ ×—×“×© ×××‘×“ ×›-15-20% ××¢×¨×›×• ×‘×©× ×” ×”×¨××©×•× ×”. ×× ×§× ×™×ª× ×¨×›×‘ ×‘-150,000 â‚ª, "××™×‘×“×ª×" ×›-25,000 â‚ª ×‘×©× ×” ×”×¨××©×•× ×” - ×©×–×” ××¢×œ 2,000 â‚ª ×‘×—×•×“×© ×©×¤×©×•×˜ "× ×¢×œ××™×" ×›×©×ª×¨×¦×• ×œ××›×•×¨ ××ª ×”×¨×›×‘.
      </div>
    </div>

    <div class="wpc-calc-tco-v8m3-faq-item" data-action="toggle-faq">
      <div class="wpc-calc-tco-v8m3-faq-header">
        <span>â“ ×”×× ×¢×“×™×£ ×œ×§× ×•×ª ×¨×›×‘ ×—×“×© ××• ×™×“ ×©× ×™×™×”?</span>
        <span>â–¼</span>
      </div>
      <div class="wpc-calc-tco-v8m3-faq-answer">
        ××‘×—×™× ×ª TCO, ×¨×›×‘ ×™×“ ×©× ×™×™×” (3-4 ×©× ×™×) ×œ×¨×•×‘ ××©×ª×œ× ×™×•×ª×¨. ×”×‘×¢×œ×™× ×”×§×•×“× "×¡×¤×’" ××ª ×™×¨×™×“×ª ×”×¢×¨×š ×”×’×“×•×œ×” ×©×œ ×”×©× ×™× ×”×¨××©×•× ×•×ª. ×¨×›×‘ ×™×“ ×©× ×™×™×” ×‘×Ÿ 3 ×©× ×™× ×™×¢×œ×” ×›-40-50% ×¤×—×•×ª ××—×“×©, ×•×¢×“×™×™×Ÿ ×™×¦×™×¢ ×××™× ×•×ª ×˜×•×‘×”.
      </div>
    </div>

    <div class="wpc-calc-tco-v8m3-faq-item" data-action="toggle-faq">
      <div class="wpc-calc-tco-v8m3-faq-header">
        <span>â“ ×›××” ×¢×•×œ×” ×˜×¢×™× ×ª ×¨×›×‘ ×—×©××œ×™ ×‘×‘×™×ª?</span>
        <span>â–¼</span>
      </div>
      <div class="wpc-calc-tco-v8m3-faq-answer">
        ×¢×œ×•×ª ×”×˜×¢×™× ×” ×”×‘×™×ª×™×ª ×”×™× ×›-0.6 â‚ª ×œ×§×•×˜"×© (×ª×¢×¨×™×£ ×œ×™×œ×”). ×¨×›×‘ ×—×©××œ×™ ×¦×•×¨×š ×›-15-20 ×§×•×˜"×© ×œ-100 ×§"×, ×›×š ×©×¢×œ×•×ª ×”× ×¡×™×¢×” ×”×™× ×›-9-12 â‚ª ×œ-100 ×§"× - ×¤×—×•×ª ××—×¦×™ ××¢×œ×•×ª ×”×‘× ×–×™×Ÿ!
      </div>
    </div>

    <div class="wpc-calc-tco-v8m3-faq-item" data-action="toggle-faq">
      <div class="wpc-calc-tco-v8m3-faq-header">
        <span>â“ ×”×× ×‘×™×˜×•×— ××§×™×£ ×œ×¨×›×‘ ×—×©××œ×™ ×™×§×¨ ×™×•×ª×¨?</span>
        <span>â–¼</span>
      </div>
      <div class="wpc-calc-tco-v8m3-faq-answer">
        ×›×Ÿ, ×‘×“×¨×š ×›×œ×œ. ×¨×›×‘×™× ×—×©××œ×™×™× ×™×§×¨×™× ×™×•×ª×¨ ×œ×ª×™×§×•×Ÿ (×¡×•×œ×œ×”, ××¢×¨×›×•×ª ×—×©××œ ××•×¨×›×‘×•×ª), ×•×œ×›×Ÿ ×¤×¨××™×™×ª ×”×‘×™×˜×•×— ×’×‘×•×”×” ×™×•×ª×¨ ×‘×›-10-20%. ×¢× ×–××ª, ×”×”×‘×“×œ ×”×•×œ×š ×•×§×˜×Ÿ ×›×›×œ ×©×”×˜×›× ×•×œ×•×’×™×” ××ª×‘×’×¨×ª.
      </div>
    </div>

    <div class="wpc-calc-tco-v8m3-faq-item" data-action="toggle-faq">
      <div class="wpc-calc-tco-v8m3-faq-header">
        <span>â“ ××™×š ××—×©×‘×™× ×¢×œ×•×ª ×œ×§×™×œ×•××˜×¨?</span>
        <span>â–¼</span>
      </div>
      <div class="wpc-calc-tco-v8m3-faq-answer">
        ×¢×œ×•×ª ×œ×§×™×œ×•××˜×¨ = (×¡×š ×›×œ ×”×”×•×¦××•×ª ×”×©× ×ª×™×•×ª) / (×§×™×œ×•××˜×¨××–' ×©× ×ª×™). ×œ×“×•×’××”: ×× ×¡×š ×”×”×•×¦××•×ª ×”×•× 40,000 â‚ª ×‘×©× ×” ×•× ×•×¡×¢×™× 15,000 ×§"×, ×”×¢×œ×•×ª ×”×™× 2.67 â‚ª ×œ×§"×. ×–×” ×›×•×œ×œ ×™×¨×™×“×ª ×¢×¨×š, ×“×œ×§, ×‘×™×˜×•×— ×•×˜×™×¤×•×œ×™×.
      </div>
    </div>
  </div>

</div>

<!-- Schema.org -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FinancialProduct",
  "name": "××—×©×‘×•×Ÿ ×¢×œ×•×ª ×¨×›×‘ TCO",
  "description": "××—×©×‘×•×Ÿ ×œ×—×™×©×•×‘ ×¢×œ×•×ª ×‘×¢×œ×•×ª ×›×•×œ×œ×ª ×¢×œ ×¨×›×‘ - ×›×•×œ×œ ×™×¨×™×“×ª ×¢×¨×š, ×“×œ×§, ×‘×™×˜×•×— ×•×˜×™×¤×•×œ×™×.",
  "provider": {
    "@type": "Organization",
    "name": "×¨×§ ×ª×‘×§×© - ×¤×™× × ×¡×™×",
    "url": "https://loan-israel.co.il"
  },
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "ILS"
  }
}
</script>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {"@type": "Question", "name": "××” ×–×” TCO ×•×œ××” ×–×” ×—×©×•×‘?", "acceptedAnswer": {"@type": "Answer", "text": "TCO (Total Cost of Ownership) ×”×•× ×—×™×©×•×‘ ×¢×œ×•×ª ×”×‘×¢×œ×•×ª ×”×›×•×œ×œ×ª. ×¨×•×‘ ×”×× ×©×™× ××¡×ª×›×œ×™× ×¨×§ ×¢×œ ×”×—×–×¨ ×”×”×œ×•×•××” ×•×”×“×œ×§, ××š ×©×•×›×—×™× ××ª ×™×¨×™×“×ª ×”×¢×¨×š, ×”×‘×™×˜×•×—×™× ×•×”×˜×™×¤×•×œ×™×."}},
    {"@type": "Question", "name": "×”×× ×¨×›×‘ ×—×©××œ×™ ×‘×××ª ×—×•×¡×š ×›×¡×£?", "acceptedAnswer": {"@type": "Answer", "text": "×›×Ÿ, ×‘×“×¨×š ×›×œ×œ. ×¢×œ×•×ª ×”×× ×¨×’×™×” ×”×™× ×›×¨×‘×¢ ××¢×œ×•×ª ×”×‘× ×–×™×Ÿ, ×•××’×¨×ª ×”×¨×™×©×•×™ ×•×”×˜×™×¤×•×œ×™× ×–×•×œ×™× ××©××¢×•×ª×™×ª."}},
    {"@type": "Question", "name": "××™×š ××©×¤×™×¢×” ×™×¨×™×“×ª ×”×¢×¨×š?", "acceptedAnswer": {"@type": "Answer", "text": "×¨×›×‘ ×—×“×© ×××‘×“ ×›-15-20% ××¢×¨×›×• ×‘×©× ×” ×”×¨××©×•× ×”. ×–×• ×”×”×•×¦××” ×”×’×“×•×œ×” ×‘×™×•×ª×¨ ×‘××—×–×§×ª ×¨×›×‘."}},
    {"@type": "Question", "name": "×”×× ×¢×“×™×£ ×œ×§× ×•×ª ×¨×›×‘ ×—×“×© ××• ×™×“ ×©× ×™×™×”?", "acceptedAnswer": {"@type": "Answer", "text": "××‘×—×™× ×ª TCO, ×¨×›×‘ ×™×“ ×©× ×™×™×” (3-4 ×©× ×™×) ×œ×¨×•×‘ ××©×ª×œ× ×™×•×ª×¨ ×›×™ ×”×‘×¢×œ×™× ×”×§×•×“× ×¡×¤×’ ××ª ×™×¨×™×“×ª ×”×¢×¨×š ×”×’×“×•×œ×”."}},
    {"@type": "Question", "name": "×›××” ×¢×•×œ×” ×˜×¢×™× ×ª ×¨×›×‘ ×—×©××œ×™ ×‘×‘×™×ª?", "acceptedAnswer": {"@type": "Answer", "text": "×¢×œ×•×ª ×”×˜×¢×™× ×” ×”×‘×™×ª×™×ª ×”×™× ×›-0.6 â‚ª ×œ×§×•×˜\"×©, ×©×–×” ×›-9-12 â‚ª ×œ-100 ×§\"× - ×¤×—×•×ª ××—×¦×™ ××¢×œ×•×ª ×”×‘× ×–×™×Ÿ."}}
  ]
}
</script>

<script>
(function() {
    'use strict';
    
    const NS = 'WPC_CalcTCO_v8m3';
    if (window[NS]) return;
    
    const container = document.getElementById('wpc-calc-tco-v8m3-main');
    if (!container) return;

    // Default Values
    const state = {
        type: 'gas',
        price: 150000,
        km: 15000,
        years: 3,
        insurance: 6000,
        maintenance: 3000,
        depreciationRate: 15,
        fuelPrice: 7.50, // Gas default
        fuelConsumption: 12, // km per liter
        electricityPrice: 0.60, // NIS per kWh
        electricityConsumption: 6, // km per kWh
        embedColor: '#1e5490'
    };

    const DEFAULTS = {
        gas: { depreciation: 15, fuelPrice: 7.50, maintenance: 3000, insurance: 6000 },
        hybrid: { depreciation: 12, fuelPrice: 7.50, maintenance: 2500, insurance: 5500 },
        electric: { depreciation: 15, fuelPrice: 0.60, maintenance: 1500, insurance: 7000 } // Higher insurance
    };

    function formatCurrency(num) {
        return 'â‚ª' + Math.round(num).toLocaleString('he-IL');
    }

    function el(id) { return document.getElementById(id); }

    function updateCalculations() {
        // 1. Depreciation
        const totalDepreciationPercent = 1 - Math.pow((1 - state.depreciationRate / 100), state.years);
        const depreciationCost = state.price * totalDepreciationPercent;
        const monthlyDepreciation = depreciationCost / (state.years * 12);

        // 2. Fuel / Energy
        let annualEnergyCost = 0;
        if (state.type === 'electric') {
             // Electric: km / (km per kwh) * price
             annualEnergyCost = (state.km / state.electricityConsumption) * state.fuelPrice;
        } else {
             // Gas/Hybrid: km / (km per liter) * price
             const consumption = state.type === 'hybrid' ? 18 : 12; // Simple avg
             annualEnergyCost = (state.km / consumption) * state.fuelPrice;
        }
        const monthlyEnergy = annualEnergyCost / 12;

        // 3. Insurance & Maintenance
        const monthlyInsurance = state.insurance / 12;
        const monthlyMaintenance = state.maintenance / 12;

        // Total
        const totalMonthly = monthlyDepreciation + monthlyEnergy + monthlyInsurance + monthlyMaintenance;
        const totalCost = totalMonthly * 12 * state.years;
        const costPerKm = (totalMonthly * 12) / state.km;

        // Update UI Text
        el('result-monthly').textContent = formatCurrency(totalMonthly);
        el('result-total').textContent = formatCurrency(totalCost);
        el('result-per-km').textContent = 'â‚ª' + costPerKm.toFixed(2);

        // Update Bars
        updateBar('depreciation', monthlyDepreciation, totalMonthly);
        updateBar('fuel', monthlyEnergy, totalMonthly);
        updateBar('insurance', monthlyInsurance, totalMonthly);
        updateBar('maintenance', monthlyMaintenance, totalMonthly);
    }

    function updateBar(type, amount, total) {
        const percent = (amount / total) * 100;
        const fillEl = el(`bar-fill-${type}`);
        const valEl = el(`bar-val-${type}`);
        if(fillEl) fillEl.style.width = percent + '%';
        if(valEl) valEl.textContent = formatCurrency(amount);
    }

    function switchType(newType) {
        state.type = newType;
        
        // Update Defaults for Type
        const defaults = DEFAULTS[newType];
        state.depreciationRate = defaults.depreciation;
        state.maintenance = defaults.maintenance;
        state.insurance = defaults.insurance;
        state.fuelPrice = defaults.fuelPrice;
        
        // Update Sliders UI
        el('depreciation-slider').value = state.depreciationRate;
        el('depreciation-value').textContent = state.depreciationRate + '%';
        
        el('maintenance-slider').value = state.maintenance;
        el('maintenance-value').textContent = formatCurrency(state.maintenance);
        
        el('insurance-slider').value = state.insurance;
        el('insurance-value').textContent = formatCurrency(state.insurance);
        
        el('fuel-price-input').value = state.fuelPrice.toFixed(2);

        // Update Active Button
        container.querySelectorAll('.wpc-calc-tco-v8m3-type-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.dataset.type === newType) btn.classList.add('active');
        });

        updateCalculations();
    }

    // Event Listeners
    container.addEventListener('click', function(e) {
        const action = e.target.closest('[data-action]');
        if (!action) return;
        
        const act = action.dataset.action;
        
        if (act === 'switch-tab') {
            const tabId = action.dataset.tab;
            container.querySelectorAll('.wpc-calc-tco-v8m3-tab-btn').forEach(b => b.classList.remove('active'));
            container.querySelectorAll('.wpc-calc-tco-v8m3-tab-content').forEach(c => c.classList.remove('active'));
            
            action.classList.add('active');
            el('tab-' + tabId).classList.add('active');
        }
        else if (act === 'select-type') {
            switchType(action.dataset.type);
        }
        else if (act === 'toggle-advanced') {
            el('advanced-options').classList.toggle('active');
        }
        else if (act === 'open-awg') {
            var awgContent = el('awg-content');
            var isOpening = !awgContent.classList.contains('active');
            awgContent.classList.toggle('active');
            if (isOpening) {
                setTimeout(function() {
                    awgContent.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }, 100);
                setTimeout(function() {
                    window.dispatchEvent(new Event('resize'));
                }, 400);
                if (typeof jQuery !== 'undefined') {
                    setTimeout(function() {
                        jQuery(window).trigger('resize');
                    }, 450);
                }
            }
        }
        else if (act === 'toggle-faq') {
            action.closest('.wpc-calc-tco-v8m3-faq-item').classList.toggle('active');
        }
        else if (act === 'scroll-to-embed') {
            el('wpc-calc-tco-v8m3-embed').scrollIntoView({ behavior: 'smooth' });
        }
        else if (act === 'preview-color') {
            showPreview(action.dataset.color, action.dataset.name || '×¦×‘×¢ × ×‘×—×¨');
        }
        else if (act === 'copy-embed-code') {
            copyEmbedCode();
        }
        else if (act === 'copy-preview-code') {
            copyPreviewCode();
        }
    });

    container.addEventListener('input', function(e) {
        const id = e.target.id;
        const val = parseFloat(e.target.value);
        
        if (id === 'price-slider') {
            state.price = val;
            el('price-value').textContent = formatCurrency(val);
        }
        else if (id === 'km-slider') {
            state.km = val;
            el('km-value').textContent = val.toLocaleString() + ' ×§"×';
        }
        else if (id === 'years-slider') {
            state.years = val;
            el('years-value').textContent = val + ' ×©× ×™×';
        }
        else if (id === 'insurance-slider') {
            state.insurance = val;
            el('insurance-value').textContent = formatCurrency(val);
        }
        else if (id === 'maintenance-slider') {
            state.maintenance = val;
            el('maintenance-value').textContent = formatCurrency(val);
        }
        else if (id === 'depreciation-slider') {
            state.depreciationRate = val;
            el('depreciation-value').textContent = val + '%';
        }
        else if (id === 'fuel-price-input') {
            state.fuelPrice = val;
        }

        updateCalculations();
    });

    // === ×¤×•× ×§×¦×™×™×ª ×™×¦×™×¨×ª ×¡×§×¨×™×¤×˜ ×œ×”×˜××¢×” ===
    function getEmbedScript() {
        const lines = [
            '<script>',
            'document.addEventListener("DOMContentLoaded", function() {',
            '  (function() {',
            '    "use strict";',
            '    var NS = "WPC_CalcTCO_Embed_" + Date.now();',
            '    if (window[NS]) return;',
            '    var container = document.querySelector("[class*=\\"wpc-calc-tco\\"]");',
            '    if (!container) return;',
            '',
            '    var state = { type: "gas", price: 150000, km: 15000, years: 3, insurance: 6000, maintenance: 3000, depreciationRate: 15, fuelPrice: 7.50 };',
            '    var DEFAULTS = {',
            '      gas: { depreciation: 15, fuelPrice: 7.50, maintenance: 3000, insurance: 6000 },',
            '      hybrid: { depreciation: 12, fuelPrice: 7.50, maintenance: 2500, insurance: 5500 },',
            '      electric: { depreciation: 15, fuelPrice: 0.60, maintenance: 1500, insurance: 7000 }',
            '    };',
            '',
            '    function formatCurrency(n) { return "â‚ª" + Math.round(n).toLocaleString("he-IL"); }',
            '    function el(id) { return document.getElementById(id); }',
            '',
            '    function updateCalculations() {',
            '      var totalDepPct = 1 - Math.pow((1 - state.depreciationRate / 100), state.years);',
            '      var depCost = state.price * totalDepPct;',
            '      var monthlyDep = depCost / (state.years * 12);',
            '      var consumption = state.type === "electric" ? 6 : (state.type === "hybrid" ? 18 : 12);',
            '      var annualEnergy = state.type === "electric" ? (state.km / consumption) * state.fuelPrice : (state.km / consumption) * state.fuelPrice;',
            '      var monthlyEnergy = annualEnergy / 12;',
            '      var monthlyIns = state.insurance / 12;',
            '      var monthlyMaint = state.maintenance / 12;',
            '      var totalMonthly = monthlyDep + monthlyEnergy + monthlyIns + monthlyMaint;',
            '      var totalCost = totalMonthly * 12 * state.years;',
            '      var costPerKm = (totalMonthly * 12) / state.km;',
            '      if(el("result-monthly")) el("result-monthly").textContent = formatCurrency(totalMonthly);',
            '      if(el("result-total")) el("result-total").textContent = formatCurrency(totalCost);',
            '      if(el("result-per-km")) el("result-per-km").textContent = "â‚ª" + costPerKm.toFixed(2);',
            '      var total = totalMonthly || 1;',
            '      if(el("bar-fill-depreciation")) el("bar-fill-depreciation").style.width = ((monthlyDep/total)*100)+"%";',
            '      if(el("bar-val-depreciation")) el("bar-val-depreciation").textContent = formatCurrency(monthlyDep);',
            '      if(el("bar-fill-fuel")) el("bar-fill-fuel").style.width = ((monthlyEnergy/total)*100)+"%";',
            '      if(el("bar-val-fuel")) el("bar-val-fuel").textContent = formatCurrency(monthlyEnergy);',
            '      if(el("bar-fill-insurance")) el("bar-fill-insurance").style.width = ((monthlyIns/total)*100)+"%";',
            '      if(el("bar-val-insurance")) el("bar-val-insurance").textContent = formatCurrency(monthlyIns);',
            '      if(el("bar-fill-maintenance")) el("bar-fill-maintenance").style.width = ((monthlyMaint/total)*100)+"%";',
            '      if(el("bar-val-maintenance")) el("bar-val-maintenance").textContent = formatCurrency(monthlyMaint);',
            '    }',
            '',
            '    function switchType(newType) {',
            '      state.type = newType;',
            '      var d = DEFAULTS[newType];',
            '      state.depreciationRate = d.depreciation; state.maintenance = d.maintenance; state.insurance = d.insurance; state.fuelPrice = d.fuelPrice;',
            '      if(el("depreciation-slider")) { el("depreciation-slider").value = d.depreciation; el("depreciation-value").textContent = d.depreciation + "%"; }',
            '      if(el("maintenance-slider")) { el("maintenance-slider").value = d.maintenance; el("maintenance-value").textContent = formatCurrency(d.maintenance); }',
            '      if(el("insurance-slider")) { el("insurance-slider").value = d.insurance; el("insurance-value").textContent = formatCurrency(d.insurance); }',
            '      if(el("fuel-price-input")) el("fuel-price-input").value = d.fuelPrice.toFixed(2);',
            '      container.querySelectorAll("[data-action=\\"select-type\\"]").forEach(function(b){b.classList.remove("active");if(b.dataset.type===newType)b.classList.add("active");});',
            '      updateCalculations();',
            '    }',
            '',
            '    function switchTab(tabName) {',
            '      var tabs = container.querySelectorAll("[data-action=\\"switch-tab\\"]");',
            '      var contents = container.querySelectorAll("[class*=\\"tab-content\\"]");',
            '      for (var i = 0; i < tabs.length; i++) tabs[i].classList.remove("active");',
            '      for (var j = 0; j < contents.length; j++) {',
            '        contents[j].classList.remove("active");',
            '        contents[j].style.display = "none";',
            '      }',
            '      var activeTab = container.querySelector("[data-tab=\\"" + tabName + "\\"]");',
            '      if (activeTab) activeTab.classList.add("active");',
            '      var activeContent = document.getElementById("tab-" + tabName);',
            '      if (activeContent) {',
            '        activeContent.classList.add("active");',
            '        activeContent.style.display = "block";',
            '      }',
            '    }',
            '',
            '    container.addEventListener("click", function(e) {',
            '      var action = e.target.closest("[data-action]");',
            '      if (!action) return;',
            '      var act = action.dataset.action;',
            '      if (act === "switch-tab") switchTab(action.dataset.tab);',
            '      else if (act === "select-type") switchType(action.dataset.type);',
            '      else if (act === "toggle-advanced") {',
            '        var adv = document.getElementById("advanced-options");',
            '        if (adv) adv.classList.toggle("active");',
            '      }',
            '      else if (act === "toggle-faq") action.closest("[class*=\\"faq-item\\"]").classList.toggle("active");',
            '    });',
            '',
            '    container.addEventListener("input", function(e) {',
            '      var id = e.target.id;',
            '      var val = parseFloat(e.target.value);',
            '      if (id === "price-slider") { state.price = val; el("price-value").textContent = formatCurrency(val); }',
            '      else if (id === "km-slider") { state.km = val; el("km-value").textContent = val.toLocaleString() + " ×§\\"×"; }',
            '      else if (id === "years-slider") { state.years = val; el("years-value").textContent = val + " ×©× ×™×"; }',
            '      else if (id === "insurance-slider") { state.insurance = val; el("insurance-value").textContent = formatCurrency(val); }',
            '      else if (id === "maintenance-slider") { state.maintenance = val; el("maintenance-value").textContent = formatCurrency(val); }',
            '      else if (id === "depreciation-slider") { state.depreciationRate = val; el("depreciation-value").textContent = val + "%"; }',
            '      else if (id === "fuel-price-input") { state.fuelPrice = val; }',
            '      updateCalculations();',
            '    });',
            '',
            '    updateCalculations();',
            '    window[NS] = { v: "1.0" };',
            '  })();',
            '});'
        ];
        return lines.join('\n') + '\n</' + 'script>';
    }

    // === ×ª×™×§×•×Ÿ copyEmbedCode ===
    function copyEmbedCode() {
        // DataLayer Push - Tag Manager tracking
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push({
            'event': 'copy_code_click',
            'calculator_name': '××—×©×‘×•×Ÿ ×¢×œ×•×ª ×¨×›×‘ ×××™×ª×™×ª (TCO)',
            'button_type': 'copy-embed-code'
        });
        
        let styles = '';
        document.querySelectorAll('style').forEach(function(s) {
            if (s.textContent.includes('wpc-calc-tco')) styles = s.textContent;
        });
        
        const calculator = document.getElementById('wpc-calc-tco-v8m3-calculator');
        let code = '<style>\n' + styles + '\n</style>\n\n';
        code += '<div class="wpc-calc-tco-v8m3-wrapper" id="wpc-calc-tco-v8m3-main">\n';
        code += calculator.outerHTML + '\n</div>\n\n';
        code += '<p style="text-align:center;font-size:0.9em;margin-top:20px;color:#666;">××—×©×‘×•×Ÿ TCO ×¤×•×ª×— ×¢×œ ×™×“×™ <a href="https://loan-israel.co.il/" target="_blank" rel="nofollow noopener" style="color:#1e5490;text-decoration:underline;">×¨×§ ×ª×‘×§×© ×¤×™× × ×¡×™×</a></p>\n\n';
        code += getEmbedScript();
        
        navigator.clipboard.writeText(code).then(function() {
            alert('âœ… ×”×§×•×“ ×”×•×¢×ª×§ ×‘×”×¦×œ×—×”!');
        });
    }

    // === ×ª×¦×•×’×” ××§×“×™××” ===
    function darkenColor(hex, percent) {
        const num = parseInt(hex.replace('#', ''), 16);
        const amt = Math.round(2.55 * percent);
        const R = Math.max((num >> 16) - amt, 0);
        const G = Math.max((num >> 8 & 0x00FF) - amt, 0);
        const B = Math.max((num & 0x0000FF) - amt, 0);
        return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
    }

    // === ×¤×•× ×§×¦×™×•×ª ×¢×–×¨ ×œ×¦×‘×¢×™× ===
    function lightenColor(hex, percent) {
        const num = parseInt(hex.replace('#', ''), 16);
        const amt = Math.round(2.55 * percent);
        const R = Math.min((num >> 16) + amt, 255);
        const G = Math.min((num >> 8 & 0x00FF) + amt, 255);
        const B = Math.min((num & 0x0000FF) + amt, 255);
        return '#' + (0x1000000 + R * 0x10000 + G * 0x100 + B).toString(16).slice(1);
    }
    
    function hexToRgba(hex, alpha) {
        const r = parseInt(hex.slice(1, 3), 16);
        const g = parseInt(hex.slice(3, 5), 16);
        const b = parseInt(hex.slice(5, 7), 16);
        return `rgba(${r}, ${g}, ${b}, ${alpha})`;
    }

    function showPreview(color, colorName) {
        state.embedColor = color;
        state.embedColorName = colorName;
        
        // Update color buttons
        container.querySelectorAll('.wpc-calc-tco-v8m3-color-btn').forEach(b => {
            b.classList.remove('active');
            if (b.dataset.color === color) b.classList.add('active');
        });
        
        // Show preview container
        const previewContainer = el('preview-container');
        previewContainer.classList.add('active');
        el('preview-color-name').textContent = colorName;
        
        // Clone calculator with new color
        const calc = el('wpc-calc-tco-v8m3-calculator').cloneNode(true);
        
        // ğŸš¨ ×ª×™×§×•×Ÿ 1: ×©× ×” ID ×œ×× ×™×¢×ª ×”×ª× ×’×©×•×ª!
        calc.id = 'wpc-calc-tco-v8m3-calculator-preview';
        
        // ğŸš¨ ×ª×™×§×•×Ÿ 2: ×”×—×œ×£ IDs ×©×œ ×ª×•×›×Ÿ ×˜××‘×™× ×œ-data attributes
        calc.querySelectorAll('[id^="tab-"]').forEach(tabContent => {
            const oldId = tabContent.id;
            const tabName = oldId.replace('tab-', '');
            tabContent.setAttribute('data-preview-tab', tabName);
            tabContent.id = 'preview-' + oldId;
        });
        
        // ğŸš¨ ×ª×™×§×•×Ÿ 3: ×”×’×“×¨ CSS Variables ×¢×œ ×”××œ×× ×˜ ×”××©×•×›×¤×œ!
        calc.style.setProperty('--wpc-tco-primary', color);
        calc.style.setProperty('--wpc-tco-primary-dark', darkenColor(color, 15));
        calc.style.setProperty('--wpc-tco-primary-light', hexToRgba(color, 0.1));
        
        // ğŸš¨ ×ª×™×§×•×Ÿ 4: ×”×—×œ×£ ×¦×‘×¢×™× ×¢× setProperty + important!
        // ×›×•×ª×¨×•×ª
        calc.querySelectorAll('.wpc-calc-tco-v8m3-tab-title, .wpc-calc-tco-v8m3-title').forEach(e => {
            e.style.setProperty('color', color, 'important');
        });
        
        // ×˜××‘ ×¤×¢×™×œ
        calc.querySelectorAll('.wpc-calc-tco-v8m3-tab-btn.active').forEach(e => {
            e.style.setProperty('color', color, 'important');
            e.style.setProperty('border-bottom-color', color, 'important');
        });
        
        // ×ª×•×¦××•×ª
        calc.querySelectorAll('.wpc-calc-tco-v8m3-results').forEach(e => {
            e.style.setProperty('background', `linear-gradient(135deg, ${color} 0%, ${darkenColor(color, 20)} 100%)`, 'important');
        });
        
        // ×›×¤×ª×•×¨×™ ×¡×•×’ ×¨×›×‘ ×¤×¢×™×œ×™×
        calc.querySelectorAll('.wpc-calc-tco-v8m3-type-btn.active').forEach(e => {
            e.style.setProperty('border-color', color, 'important');
            e.style.setProperty('background', hexToRgba(color, 0.1), 'important');
        });
        
        // ×¢×¨×›×™ ×¡×œ×™×™×“×¨
        calc.querySelectorAll('.wpc-calc-tco-v8m3-slider-value').forEach(e => {
            e.style.setProperty('background', hexToRgba(color, 0.1), 'important');
            e.style.setProperty('color', color, 'important');
        });
        
        // ×¡×œ×™×™×“×¨×™×
        calc.querySelectorAll('input[type="range"]').forEach(slider => {
            slider.style.setProperty('accent-color', color, 'important');
        });
        
        // ×¢×“×›×•×Ÿ ×ª××¨×™×š
        calc.querySelectorAll('.wpc-calc-tco-v8m3-update-date').forEach(e => {
            e.style.setProperty('background', hexToRgba(color, 0.1), 'important');
            e.style.setProperty('color', color, 'important');
        });
        
        el('preview-content').innerHTML = '';
        el('preview-content').appendChild(calc);
        
        // ××ª×—×•×œ ×˜××‘×™× ×•×¡×œ×™×™×“×¨×™× ×‘×ª×¦×•×’×” ××§×“×™××”
        initPreviewCalculator(el('preview-content'), color);
        
        // ×’×œ×•×œ ×œ×ª×¦×•×’×”
        previewContainer.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    // === ××ª×—×•×œ ××—×©×‘×•×Ÿ ×‘×ª×¦×•×’×” ××§×“×™××” - ×’×¨×¡×” ××ª×•×§× ×ª! ===
    function initPreviewCalculator(previewArea, primaryColor) {
        // ×˜××‘×™×
        const tabs = previewArea.querySelectorAll('[data-action="switch-tab"]');
        const contents = previewArea.querySelectorAll('.wpc-calc-tco-v8m3-tab-content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation(); // ğŸš¨ ×§×¨×™×˜×™! ××•× ×¢ bubble ×œ××—×©×‘×•×Ÿ ×”××§×•×¨×™
                
                const tabName = this.dataset.tab;
                
                // ×”×¡×¨ active ××›×•×œ×
                tabs.forEach(t => {
                    t.classList.remove('active');
                    t.style.setProperty('color', '', 'important');
                    t.style.setProperty('border-bottom-color', 'transparent', 'important');
                });
                contents.forEach(c => {
                    c.classList.remove('active');
                    c.style.display = 'none';
                });
                
                // ×”×•×¡×£ active ×œ× ×‘×—×¨ ×¢× ×¦×‘×¢
                this.classList.add('active');
                this.style.setProperty('color', primaryColor, 'important');
                this.style.setProperty('border-bottom-color', primaryColor, 'important');
                
                // ××¦× ×ª×•×›×Ÿ - ×ª××™×›×” ×‘-data-preview-tab ×•×’× ×‘-ID
                const activeContent = previewArea.querySelector(`[data-preview-tab="${tabName}"]`) ||
                                     previewArea.querySelector('#preview-tab-' + tabName) ||
                                     previewArea.querySelector('#tab-' + tabName);
                if (activeContent) {
                    activeContent.classList.add('active');
                    activeContent.style.display = 'block';
                }
            });
        });
        
        // ×¡×œ×™×™×“×¨×™×
        const sliders = previewArea.querySelectorAll('input[type="range"]');
        sliders.forEach(slider => {
            slider.style.setProperty('accent-color', primaryColor, 'important');
            
            slider.addEventListener('input', function(e) {
                e.stopPropagation(); // ğŸš¨ ××•× ×¢ bubble
                
                const id = this.id;
                const val = parseFloat(this.value);
                const valueEl = previewArea.querySelector('#' + id.replace('-slider', '-value'));
                
                if (valueEl) {
                    if (id === 'price-slider' || id === 'insurance-slider' || id === 'maintenance-slider') {
                        valueEl.textContent = 'â‚ª' + Math.round(val).toLocaleString('he-IL');
                    } else if (id === 'km-slider') {
                        valueEl.textContent = val.toLocaleString('he-IL') + ' ×§"×';
                    } else if (id === 'years-slider') {
                        valueEl.textContent = val + ' ×©× ×™×';
                    } else if (id === 'depreciation-slider') {
                        valueEl.textContent = val + '%';
                    }
                }
            });
        });
        
        // ×›×¤×ª×•×¨×™ ×‘×—×™×¨×ª ×¡×•×’ ×¨×›×‘
        const typeBtns = previewArea.querySelectorAll('[data-action="select-type"]');
        typeBtns.forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation(); // ğŸš¨ ××•× ×¢ bubble
                
                // ×”×¡×¨ active ××›×•×œ×
                typeBtns.forEach(b => {
                    b.classList.remove('active');
                    b.style.setProperty('border-color', '#e5e7eb', 'important');
                    b.style.setProperty('background', 'transparent', 'important');
                });
                
                // ×”×•×¡×£ active ×œ× ×‘×—×¨ ×¢× ×¦×‘×¢
                this.classList.add('active');
                this.style.setProperty('border-color', primaryColor, 'important');
                this.style.setProperty('background', hexToRgba(primaryColor, 0.1), 'important');
            });
        });
        
        // ×”×’×“×¨×•×ª ××ª×§×“××•×ª
        const advToggle = previewArea.querySelector('[data-action="toggle-advanced"]');
        if (advToggle) {
            advToggle.addEventListener('click', function(e) {
                e.stopPropagation(); // ğŸš¨ ××•× ×¢ bubble
                const advContent = previewArea.querySelector('[id*="advanced-options"]');
                if (advContent) advContent.classList.toggle('active');
            });
        }
        
        // FAQ
        const faqItems = previewArea.querySelectorAll('.wpc-calc-tco-v8m3-faq-item');
        faqItems.forEach(item => {
            const header = item.querySelector('.wpc-calc-tco-v8m3-faq-header');
            if (header) {
                header.addEventListener('click', function(e) {
                    e.stopPropagation(); // ğŸš¨ ××•× ×¢ bubble
                    item.classList.toggle('active');
                });
            }
        });
    }

    function copyPreviewCode() {
        // DataLayer Push - Tag Manager tracking
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push({
            'event': 'copy_code_click',
            'calculator_name': '××—×©×‘×•×Ÿ ×¢×œ×•×ª ×¨×›×‘ ×××™×ª×™×ª (TCO)',
            'button_type': 'copy-preview-code'
        });
        
        const color = state.embedColor || '#1e5490';
        let styles = '';
        document.querySelectorAll('style').forEach(function(s) {
            if (s.textContent.includes('wpc-calc-tco')) {
                styles = s.textContent
                    .replace(/#1e5490/g, color)
                    .replace(/#163d6b/g, darkenColor(color, 15));
            }
        });
        
        const calculator = el('wpc-calc-tco-v8m3-calculator');
        let code = '<style>\n' + styles + '\n</style>\n\n';
        code += '<div class="wpc-calc-tco-v8m3-wrapper" id="wpc-calc-tco-v8m3-main">\n';
        code += calculator.outerHTML + '\n</div>\n\n';
        code += '<p style="text-align:center;font-size:0.9em;margin-top:20px;color:#666;">××—×©×‘×•×Ÿ TCO ×¤×•×ª×— ×¢×œ ×™×“×™ <a href="https://loan-israel.co.il/" target="_blank" rel="nofollow noopener" style="color:' + color + ';text-decoration:underline;">×¨×§ ×ª×‘×§×© ×¤×™× × ×¡×™×</a></p>\n\n';
        code += getEmbedScript();
        
        navigator.clipboard.writeText(code).then(function() {
            alert('âœ… ×”×§×•×“ ×”×•×¢×ª×§ ×‘×¦×‘×¢ "' + (state.embedColorName || '× ×‘×—×¨') + '"!');
        });
    }

    // Custom color picker handler
    el('custom-color-picker').addEventListener('input', function(e) {
        showPreview(e.target.value, '×¦×‘×¢ ××•×ª×× ××™×©×™×ª');
    });

    // Init
    updateCalculations();
    window[NS] = { version: '1.0.0' };

})();
</script>

