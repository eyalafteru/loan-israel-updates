# 🤖 סוכן AI לבניית עמודי מחשבון פיננסי - איפיון מלא

## 📋 תיאור הסוכן

סוכן AI שמקבל **נושא של מחשבון פיננסי** ובונה **עמוד HTML מלא ומוכן לוורדפרס** מאפס, כולל:
- מחשבון אינטראקטיבי עם לשוניות (טאבים)
- אזור בדיקת זכאות (טופס AWG)
- מערכת הטמעה מלאה עם תצוגה מקדימה
- תוכן מותאם למנועי חיפוש
- מידע מובנה לגוגל (Schema)
- עיצוב שמתאים לכל המסכים (מחשב, טאבלט, נייד)

### 📂 תיקיית פיתוח:
```
C:\Users\eyal\loan-israel-updaets\loan-israel-updates\מחשבונים חדשים\
```
**כל המחשבונים החדשים נוצרים בתיקייה זו!**

---

## 🎯 קלט הסוכן - מה צריך לספק

הסוכן מקבל את המידע הבא:

| שם השדה | חובה | מה זה | דוגמה |
|---------|------|-------|--------|
| `נושא` | ✅ | על מה המחשבון | "הלוואות", "ריבית דריבית", "חיסכון" |
| `נושא_לזיהוי` | ✅ | שם קצר לזיהוי טכני (באנגלית) | "loans", "compound-int", "savings" |
| `כותרת_ראשית` | ✅ | כותרת העמוד הראשית | "מחשבון הלוואות מתקדם" |
| `לשוניות` | ✅ | רשימת לשוניות (2-5) | ראה מבנה למטה |
| `מזהה_טופס` | ✅ | מספר הטופס באתר | "32400" |
| `ריבית_פריים` | ❌ | ריבית פריים עדכנית | "5.75%" |
| `ריבית_בנק_ישראל` | ❌ | ריבית בנק ישראל | "4.25%" |
| `שאלות_נפוצות` | ✅ | רשימת שאלות ותשובות (5-10) | ראה מבנה למטה |

### מבנה לשונית (טאב):
```json
{
  "מזהה": "בסיסי",
  "סמל": "🧮",
  "שם": "חישוב בסיסי",
  "כותרת": "חישוב תשלום חודשי להלוואה",
  "שדות_קלט": [
    {
      "סוג": "פס_גלילה",
      "מזהה": "סכום-הלוואה",
      "תווית": "סכום הלוואה (₪)",
      "מינימום": 10000,
      "מקסימום": 500000,
      "ברירת_מחדל": 100000,
      "קפיצה": 5000,
      "תצוגה": "מטבע"
    },
    {
      "סוג": "קבוצת_כפתורים",
      "מזהה": "תקופה",
      "תווית": "תקופה (שנים)",
      "אפשרויות": [1, 3, 5, 10, 15, 20],
      "ברירת_מחדל": 5
    }
  ],
  "תוצאות": [
    {
      "מזהה": "תשלום-חודשי",
      "תווית": "תשלום חודשי",
      "תצוגה": "מטבע"
    }
  ],
  "נוסחה": "תשלום_חודשי"
}
```

### מבנה שאלה נפוצה:
```json
{
  "שאלה": "כמה זמן לוקח לקבל הלוואה?",
  "תשובה": "בדרך כלל בין 24-72 שעות...",
  "סמל": "⏰"
}
```

---

## 🏗️ מבנה הפלט - עמוד HTML מלא

### 1. התחלה חובה (בלי תגי מסמך מלאים!)

```html
<script>
// בדיקה והוספת הגדרת מסך אם חסרה
if (!document.querySelector('meta[name="viewport"]')) {
  const viewport = document.createElement('meta');
  viewport.name = 'viewport';
  viewport.content = 'width=device-width, initial-scale=1.0, user-scalable=yes';
  document.head.appendChild(viewport);
}
</script>

<style>
/* === משתני צבע + עיצוב בסיס === */
/* קידומת חובה: wpc-calc-[נושא]-[4אותיות]- */
</style>
```

### 2. מבנה העמוד הראשי

```
├── עטיפה ראשית (מכילה הכל)
│   ├── מיכל תוכן ראשי
│   │   ├── אזור כותרת
│   │   │   ├── כותרת ראשית (H1)
│   │   │   ├── תאריך עדכון
│   │   │   └── מידע על ריבית (אם רלוונטי)
│   │   └── אזור המחשבון
│   │       ├── סרגל לשוניות (2-5 לשוניות)
│   │       └── תוכן כל לשונית
│   │
│   ├── אזור בדיקת זכאות (טופס)
│   │   └── כפתור פעולה + כפתור הטמעה
│   │       └── תוכן הטופס (מוסתר עד לחיצה)
│   │           └── [awg postid="XXXXX"]
│   │
│   ├── אזור תוכן (מידע למנועי חיפוש)
│   │   ├── כותרת משנית
│   │   ├── הסברים על כל לשונית
│   │   ├── טיפים ודוגמאות
│   │   └── מידע נוסף רלוונטי
│   │
│   ├── אזור הטמעה (להעתקת המחשבון לאתרים אחרים)
│   │   ├── הוראות הטמעה
│   │   ├── כפתור העתקת קוד
│   │   ├── בורר צבעים (10 עיגולים + בחירת צבע חופשית)
│   │   ├── תצוגה מקדימה חיה
│   │   ├── כפתור העתקה עם הצבע הנבחר
│   │   └── תנאי שימוש
│   │
│   └── אזור שאלות נפוצות
│       └── רשימת שאלות ותשובות (5-10)
│
└── מידע מובנה לגוגל (JSON-LD)
    ├── שאלות נפוצות
    ├── מוצר פיננסי
    └── מדריך שלב אחר שלב
```

### 🚫 אזורים שאסור להוסיף לעמודי מחשבון!

**בעמודי מחשבון אין להוסיף את האזורים הבאים:**

| אזור | למה אסור? |
|------|-----------|
| `wpc-disclaimer` / דיסקליימר | האזור הזה מיועד לעמודי תוכן רגילים בלבד, לא למחשבונים |
| `[related-shortcode-instert]` | קיצור הדרך הזה מיועד לסוף עמודי תוכן, לא למחשבונים |

**⚠️ חשוב:** עמודי מחשבון מסתיימים ב-**Schema.org JSON-LD** בלבד, ללא דיסקליימר ו-related posts!

---

## 🎨 דרישות עיצוב חובה

### קידומת ייחודית (למניעת התנגשויות)
```css
/* כל השמות חייבים להתחיל ב: */
.wpc-calc-[נושא]-[4אותיות]-wrapper { }
.wpc-calc-[נושא]-[4אותיות]-container { }
.wpc-calc-[נושא]-[4אותיות]-title { }
/* וכולי */
```

### משתני צבע קבועים
```css
:root {
  --צבע-ראשי: #1e5490;        /* כחול ראשי */
  --צבע-ראשי-כהה: #2a5fa0;    /* כחול כהה יותר */
  --צבע-סכנה: #ff3b3b;        /* אדום - לאזהרות */
  --צבע-הצלחה: #25D366;       /* ירוק - להצלחה */
  --צבע-אזהרה: #FF9800;       /* כתום - לאזהרות */
  --צבע-טקסט-כהה: #222222;    /* טקסט רגיל */
  --צבע-טקסט-בהיר: #444444;   /* טקסט משני */
  --צבע-רקע-בהיר: #f5f5f5;    /* רקע אפור בהיר */
  --צבע-לבן: #ffffff;         /* לבן */
  --צבע-גבול: #999999;        /* צבע מסגרות */
  --רוחב-מרבי: 1200px;        /* רוחב מקסימלי */
  --צל-קטן: 0 2px 8px rgba(0,0,0,0.06);   /* צל עדין */
  --צל-בינוני: 0 5px 20px rgba(0,0,0,0.1); /* צל רגיל */
  --עיגול-קטן: 8px;           /* פינות מעוגלות קטנות */
  --עיגול-בינוני: 15px;       /* פינות מעוגלות בינוניות */
  --עיגול-גדול: 20px;         /* פינות מעוגלות גדולות */
  --מעבר-חלק: all 0.3s ease;  /* אנימציית מעבר */
  --מעבר-צבעים: linear-gradient(135deg, var(--צבע-ראשי) 0%, var(--צבע-ראשי-כהה) 100%);
}
```

### התאמה לגדלי מסך שונים - חובה!
```css
/* מחשב שולחני - ברירת מחדל */
.wpc-calc-[נושא]-[random]-wrapper { }

/* טאבלט - מסכים עד 768 פיקסלים */
@media (max-width: 768px) { }

/* נייד - מסכים עד 480 פיקסלים */
@media (max-width: 480px) { }

/* נייד קטן - מסכים עד 375 פיקסלים */
@media (max-width: 375px) { }
```

### כללים קריטיים לעיצוב
- ✅ כל הגדרת עיצוב עם `!important` (למניעת דריסה)
- ✅ `all: initial` על העטיפה הראשית (איפוס עיצובים קודמים)
- ✅ `direction: rtl` על העטיפה (כיוון מימין לשמאל)
- ✅ `font-family: 'Assistant', sans-serif` (פונט עברי)
- ✅ `box-sizing: border-box` על כל האלמנטים (חישוב גודל נכון)
- ✅ `color-scheme: light` (מניעת מצב לילה אוטומטי)

### לשוניות - ללא גלילה אופקית!
**חשוב:** הלשוניות חייבות לרדת לשורה חדשה במקום לגרום לגלילה:

```css
/* סרגל לשוניות - ללא גלילה! */
.wpc-calc-[נושא]-[random]-tabs-nav {
  display: flex !important;
  flex-wrap: wrap !important; /* עובר לשורה חדשה במקום גלילה */
  background: var(--צבע-רקע-בהיר) !important;
  border-bottom: 2px solid var(--צבע-גבול) !important;
  /* ❌ אין גלילה אופקית! */
}

.wpc-calc-[נושא]-[random]-tab-btn {
  flex: 1 1 auto !important;
  min-width: 100px !important;
  /* ... */
}

/* בנייד - 2 לשוניות בשורה */
@media (max-width: 768px) {
  .wpc-calc-[נושא]-[random]-tab-btn {
    flex: 1 1 45% !important; /* 2 לשוניות בשורה */
    min-width: auto !important;
  }
}
```

---

## ⚡ דרישות קוד JavaScript חובה

### מבנה קוד בטוח (IIFE - פונקציה שמורצת מיד)
```javascript
(function() {
    'use strict'; // מצב קפדני למניעת שגיאות
    
    // 1. בדיקת כפילויות - מונע טעינה כפולה
    const שם_מערכת = 'WPC_Calc[נושא]_[מזהה]';
    if (window[שם_מערכת]) return; // כבר נטען? יוצאים
    
    // 2. בדיקה שהמחשבון קיים בעמוד
    const מיכל = document.getElementById('wpc-calc-[נושא]-[מזהה]-main');
    if (!מיכל) return; // אין מחשבון? יוצאים
    
    // 3. צבע ראשי
    const צבע_ראשי = '#1e5490';
    
    // 4. פונקציות עזר
    function עצב_מטבע(מספר) {
        return '₪' + מספר.toLocaleString('he-IL');
    }
    
    function הכהה_צבע(צבע, כמות = 15) {
        // לוגיקה להכהות צבע
    }
    
    // 5. נוסחאות פיננסיות
    function חשב_תשלום_חודשי(סכום, ריבית, חודשים) {
        // נוסחת תשלום להלוואות
    }
    
    function חשב_ערך_עתידי(סכום, ריבית, שנים, הפקדה_חודשית) {
        // נוסחת ערך עתידי
    }
    
    // 6. פונקציות חישוב לכל לשונית
    function חשב_לשונית_1() { }
    function חשב_לשונית_2() { }
    
    // 7. מעבר בין לשוניות
    function עבור_ללשונית(שם_לשונית) { }
    
    // 8. פונקציות הטמעה
    function גלול_להטמעה() { }
    function העתק_קוד_הטמעה() { }
    function העתק_קוד_עם_צבע(צבע) { }
    function הצג_תצוגה_מקדימה(צבע, שם_צבע) { }
    function אתחל_מחשבון_תצוגה(עטיפה, צבע) { }
    function העתק_קוד_תצוגה() { }
    
    // 9. טיפול בטופס זכאות
    function פתח_טופס_זכאות() { }
    
    // 10. פתיחת שאלות נפוצות (אקורדיון)
    function החלף_מצב_שאלה(כותרת) { }
    
    // 11. טיפול באירועים מרכזי (מקסימום 10 מאזינים!)
    מיכל.addEventListener('click', function(e) {
        const פעולה = e.target.closest('[data-action]');
        if (!פעולה) return;
        
        switch(פעולה.dataset.action) {
            case 'switch-tab': עבור_ללשונית(פעולה.dataset.tab); break;
            case 'open-awg': פתח_טופס_זכאות(); break;
            case 'scroll-to-embed': גלול_להטמעה(); break;
            case 'copy-embed-code': העתק_קוד_הטמעה(); break;
            case 'preview-color': הצג_תצוגה_מקדימה(פעולה.dataset.color, פעולה.dataset.name); break;
            case 'copy-preview-code': העתק_קוד_תצוגה(); break;
            case 'toggle-faq': החלף_מצב_שאלה(פעולה); break;
            // ...
        }
    });
    
    // 12. אתחול ראשוני
    function אתחל() {
        חשב_לשונית_1();
        // ...
    }
    
    אתחל();
    
    // 13. חשיפה מינימלית החוצה
    window[שם_מערכת] = { גרסה: '1.0.0' };
})();
```

---

## 📱 מערכת הטמעה - דרישות מלאות

### 1. טקסט דינמי באזור ההטמעה
**חשוב מאוד!** כל הטקסטים באזור ההטמעה חייבים להיות **דינמיים לפי סוג המחשבון**:

| תבנית | מה זה |
|--------|---------|
| `{שם_המחשבון}` | שם המחשבון בעברית |
| `{שווי_המחשבון}` | שווי הפיתוח בשקלים |
| `{מספר_לשוניות}` | כמה לשוניות יש במחשבון |
| `{מילות_מפתח}` | מילים רלוונטיות לחיפוש |
| `{דפים_מתאימים}` | דפים מומלצים להטמעה |

**דוגמאות לפי סוג מחשבון:**

| מחשבון | שם_המחשבון | שווי | מילות_מפתח | דפים_מתאימים |
|--------|-------------|-------|------------|---------------|
| חיסכון | מחשבון החיסכון | ₪12,000 | מחשבון חיסכון, תכנון כספי | תכנון חיסכון, השקעות לטווח ארוך |
| ברוטו נטו | מחשבון ברוטו נטו | ₪10,000 | שכר נטו, מס הכנסה, מדרגות מס | חישוב שכר, מדרגות מס 2025 |
| משכנתא | מחשבון המשכנתא | ₪18,000 | מחשבון משכנתא, החזר חודשי | רכישת דירה, הלוואות דיור |
| ריבית דריבית | מחשבון הריבית דריבית | ₪15,000 | ריבית דריבית, חיסכון ארוך טווח | השקעות, קרן השתלמות |
| פנסיה | מחשבון הפנסיה | ₪14,000 | חישוב פנסיה, גיל פרישה | תכנון פרישה, חיסכון לפנסיה |
| הלוואות | מחשבון ההלוואות | ₪12,000 | מחשבון הלוואה, ריבית הלוואה | השוואת הלוואות, מימון |

### 2. מבנה אזור ההטמעה (תבנית)
```html
<div class="wpc-calc-[נושא]-[מזהה]-embed-section" id="embed-section">
    <!-- כותרת ראשית -->
    <h2>🎁 רוצים להטמיע את {שם_המחשבון} באתר שלכם? חינם לחלוטין!</h2>
    
    <!-- הצעת הערך -->
    <div class="embed-value-box">
        <p>
            <strong>💎 אנחנו נותנים לכם את {שם_המחשבון} המתקדם הזה לחלוטין בחינם!</strong><br>
            תמורת קישור קרדיט קטן לאתר שלנו, תקבלו מחשבון מקצועי עם {מספר_לשוניות} לשוניות, חישובים מדויקים, ועיצוב שמתאים לכל מסך.<br>
            <strong>שווי המחשבון:</strong> מעל {שווי_המחשבון} בפיתוח 💰 | <strong>מה ששילמתם:</strong> ₪0 🎉
        </p>
    </div>
    
    <!-- יתרונות לדירוג בגוגל -->
    <div class="embed-seo-box">
        <h3>🚀 למה להוסיף מחשבון לאתר? זה משפר את הדירוג בגוגל!</h3>
        <p><strong>הוספת מחשבון אינטראקטיבי לאתר היא אחת הדרכים הטובות ביותר לשפר את הדירוג במנועי החיפוש!</strong></p>
        <ul>
            <li>📈 <strong>תוכן אינטראקטיבי איכותי</strong> - גוגל אוהבת עמודים עם כלים שימושיים</li>
            <li>⏱️ <strong>מבקרים נשארים יותר זמן</strong> - משתמשים נשארים בעמוד יותר זמן</li>
            <li>🔗 <strong>מילות מפתח רלוונטיות</strong> - המחשבון כולל מילות חיפוש כמו "{מילות_מפתח}"</li>
            <li>🎯 <strong>מחשבון בחינם להוספה</strong> - תוכן ייחודי בלי עלות פיתוח</li>
            <li>💼 <strong>מקצועיות ואמינות</strong> - אתר עם כלי מחשבון נראה מקצועי יותר</li>
            <li>📱 <strong>מתאים לנייד</strong> - מחשבון שעובד על כל מסך = נקודות דירוג נוספות</li>
            <li>🔄 <strong>ביקורים חוזרים</strong> - משתמשים חוזרים לאתר להשתמש במחשבון</li>
            <li>📊 <strong>פחות נטישות</strong> - המבקרים נשארים להשתמש בכלי</li>
        </ul>
        <p class="seo-tip">
            💡 <strong>טיפ:</strong> הוסיפו את המחשבון בעמודים רלוונטיים כמו "{דפים_מתאימים}" - 
            זה יחזק את העמוד בדיוק במילות החיפוש שאתם רוצים לדרג עליהן!
        </p>
    </div>
    
    <!-- הוראות הטמעה -->
    <h3>📋 איך מוסיפים? (3 דקות בלבד)</h3>
    <p><strong>✅ יתרון לדירוג:</strong> קישור הקרדיט נמצא בתוך הקוד - גוגל רואה אותו ומזהה אותו מיד!</p>
    <ol>
        <li><strong>לחצו</strong> על הכפתור הירוק "העתק קוד" למטה 👇</li>
        <li><strong>פתחו</strong> את עורך וורדפרס שלכם (מצב <code>טקסט/HTML</code>, לא עיצוב)</li>
        <li><strong>הדביקו</strong> את הקוד במיקום הרצוי בעמוד</li>
        <li><strong>פרסמו!</strong> המחשבון יעבוד מיד ללא הגדרות נוספות ✨</li>
    </ol>
    
    <!-- כפתור העתקה + בורר צבעים + תצוגה מקדימה -->
    <!-- ... המשך ... -->
    
    <!-- תנאי שימוש -->
    <div class="embed-terms">
        <h4>⚠️ חשוב לדעת - זכויות יוצרים ומגבלות שימוש</h4>
        <p>
            מחשבון זה מוגן בזכויות יוצרים © וניתן להוספה לאתר שלכם בחינם רק תמורת השארת קישור הקרדיט.<br>
            המחשבון כולל מנגנוני הגנה מתקדמים שישיבו אוטומטית את הקרדיט אם ינסו להסירו.
        </p>
        <p><strong>אסור בהחלט:</strong> הסרת/שינוי/הסתרת קישור הקרדיט, שימוש מסחרי ישיר ללא אישור, מכירת המחשבון.</p>
    </div>
    
    <!-- הנעה לפעולה - מחשבון מותאם -->
    <div class="embed-custom-cta">
        <h3>🎯 רוצים מחשבון מותאם אישית לאתר שלכם?</h3>
        <p>יש לכם צורך בלוגיקת חישוב שונה? עיצוב מותאם? שדות נוספים? אנחנו נשמח לפתח לכם מחשבון ייעודי בחינם!</p>
        <p>📧 שלחו לנו מייל ל: <strong>info@loan-israel.co.il</strong></p>
        <p>כתבו: "בקשה למחשבון מותאם" + תיאור קצר של מה שאתם צריכים 💚</p>
    </div>
</div>
```

### 3. כפתור העתקת קוד מלא
```html
<button class="wpc-calc-[נושא]-[מזהה]-embed-button-large" 
        data-action="copy-embed-code">
    📋 העתק קוד מלא - לחצו כאן!
</button>
```

### 4. בורר צבעים - 10 עיגולי צבע (ללא טקסט!)
**חשוב: הכפתורים הם עיגולים בלבד, ללא טקסט! שם הצבע מופיע רק כעזרה כשמרחפים**

```html
<!-- מבנה בורר הצבעים - עיגולים בלבד -->
<div class="wpc-calc-[נושא]-[מזהה]-color-picker" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 12px;">
    <button style="background: #1e5490; width: 50px; height: 50px; border-radius: 50%; border: 3px solid #fff; cursor: pointer; box-shadow: 0 2px 8px rgba(0,0,0,0.2);" 
            data-action="preview-color" data-color="#1e5490" data-name="כחול מקצועי" title="כחול מקצועי 💙"></button>
    <button style="background: #10b981; width: 50px; height: 50px; border-radius: 50%; ..." 
            data-action="preview-color" data-color="#10b981" data-name="ירוק צמיחה" title="ירוק צמיחה 💚"></button>
    <!-- ... 8 כפתורים נוספים ... -->
</div>
```

```javascript
// מערך הצבעים בקוד
const צבעים = [
    { צבע: '#1e5490', שם: 'כחול מקצועי', סמל: '💙' },
    { צבע: '#10b981', שם: 'ירוק צמיחה', סמל: '💚' },
    { צבע: '#ef4444', שם: 'אדום אנרגטי', סמל: '❤️' },
    { צבע: '#8b5cf6', שם: 'סגול יוקרתי', סמל: '💜' },
    { צבע: '#f59e0b', שם: 'כתום דינמי', סמל: '🧡' },
    { צבע: '#ec4899', שם: 'ורוד מודרני', סמל: '💗' },
    { צבע: '#06b6d4', שם: 'טורקיז רענן', סמל: '🩵' },
    { צבע: '#84cc16', שם: 'ליים עז', סמל: '💛' },
    { צבע: '#f97316', שם: 'כתום בוהק', סמל: '🔥' },
    { צבע: '#0891b2', שם: 'כחול ים', סמל: '🌊' }
];
```

### 5. בוחר צבע חופשי
```html
<input type="color" id="wpc-calc-[נושא]-[מזהה]-custom-color" 
       value="#1e5490" data-action="preview-custom-color"
       style="width: 50px; height: 50px; border-radius: 50%; cursor: pointer; border: 2px solid #ddd;">
```

### 6. תצוגה מקדימה חיה
- שכפול מלא של המחשבון עם הצבע הנבחר
- כל הלשוניות עובדות בתצוגה מקדימה
- פסי גלילה וכפתורי בחירה אינטראקטיביים
- כפתור העתקה עם הצבע הנוכחי

### 7. לוגיקת העתקת קוד עם עיצוב + קוד + קרדיט דינמי
```javascript
// הגדר את שם המחשבון בתחילת הקוד
const שם_המחשבון = 'ברוטו נטו'; // שנה לפי סוג המחשבון

function העתק_קוד_הטמעה() {
    const מחשבון = document.getElementById('wpc-calc-[נושא]-[מזהה]-calculator');
    const שכפול = מחשבון.cloneNode(true);
    
    // מצא את כל העיצוב הרלוונטי
    let עיצובים = '';
    document.querySelectorAll('style').forEach(עיצוב => {
        if (עיצוב.textContent.includes('wpc-calc-[נושא]-[מזהה]')) {
            עיצובים = עיצוב.textContent;
        }
    });
    
    // צור קוד עם עיצוב
    let קוד = '<style>\n' + עיצובים + '\n</style>\n';
    קוד += '<div class="wpc-calc-[נושא]-[מזהה]-wrapper" id="wpc-calc-[נושא]-[מזהה]-main">\n';
    קוד += '<div class="wpc-calc-[נושא]-[מזהה]-calculator" id="wpc-calc-[נושא]-[מזהה]-calculator">';
    קוד += שכפול.innerHTML + '</div>\n';
    קוד += '</div>\n';
    
    // הוסף קרדיט דינמי
    קוד += `<p style="text-align:center; font-size:0.9em; margin-top:20px; color:#666;">
        מחשבון ${שם_המחשבון} פותח על ידי 
        <a href="https://loan-israel.co.il/" target="_blank" rel="nofollow noopener" 
           style="color:#1e5490; text-decoration:underline;">
           רק תבקש פיננסים
        </a>
    </p>\n`;
    
    // הוסף קוד פעולה עצמאי להטמעה
    קוד += קבל_קוד_הטמעה();
    
    navigator.clipboard.writeText(קוד);
    alert('הקוד הועתק!');
}
```

### 8. פונקציית קבל_קוד_הטמעה - קוד עצמאי להטמעה

**עקרונות חשובים:**
1. **עטיפה בהמתנה לטעינת העמוד** - מוודא שהעמוד מוכן לפני הרצת הקוד
2. **תחביר ישן יותר** - `var` במקום `const/let`, פונקציות רגילות
3. **סגירת תג סקריפט בטוחה** - `'</' + 'script>'` למניעת פרשנות שגויה
4. **בניית הקוד כמערך שורות** - למניעת בעיות עם תווים מיוחדים

```javascript
function קבל_קוד_הטמעה() {
    const שורות = [
        '<script>',
        'document.addEventListener("DOMContentLoaded", function() {',
        '  (function() {',
        '    "use strict";',
        '    var שם = "WPC_Calc[נושא]_הטמעה";',
        '    if (window[שם]) return;',
        '    var מיכל = document.getElementById("wpc-calc-[נושא]-[מזהה]-main");',
        '    if (!מיכל) { console.error("המחשבון לא נמצא"); return; }',
        '',
        '    // === פונקציות חישוב ===',
        '    function עצב_מטבע(n) { return Math.round(n).toLocaleString("he-IL") + " ₪"; }',
        '    // ... שאר פונקציות החישוב ...',
        '',
        '    // === ניהול מצב ===',
        '    var מצב = {',
        '      לשונית1: { /* ערכים התחלתיים */ },',
        '      לשונית2: { /* ערכים התחלתיים */ }',
        '    };',
        '',
        '    // === פונקציות עדכון לכל לשונית ===',
        '    function אלמנט(מזהה) { return document.getElementById(מזהה); }',
        '    function עדכן_לשונית1() { /* עדכון אלמנטים לפי מצב */ }',
        '    function עדכן_לשונית2() { /* עדכון אלמנטים לפי מצב */ }',
        '',
        '    // === מעבר בין לשוניות ===',
        '    function עבור_ללשונית(לשונית) {',
        '      var לשוניות = מיכל.querySelectorAll(".wpc-calc-[נושא]-[מזהה]-tab-btn");',
        '      var תכנים = מיכל.querySelectorAll(".wpc-calc-[נושא]-[מזהה]-tab-content");',
        '      for (var i = 0; i < לשוניות.length; i++) לשוניות[i].classList.remove("active");',
        '      for (var j = 0; j < תכנים.length; j++) תכנים[j].classList.remove("active");',
        '      var כפתור = מיכל.querySelector("[data-tab=\\"" + לשונית + "\\"]");',
        '      if (כפתור) כפתור.classList.add("active");',
        '      var תוכן = document.getElementById("tab-" + לשונית);',
        '      if (תוכן) תוכן.classList.add("active");',
        '    }',
        '',
        '    // === טיפול באירועים ===',
        '    מיכל.addEventListener("click", function(e) {',
        '      var פעולה = e.target.closest("[data-action]");',
        '      if (!פעולה) return;',
        '      var סוג = פעולה.dataset.action;',
        '      if (סוג === "switch-tab") עבור_ללשונית(פעולה.dataset.tab);',
        '      // ... טיפול בשאר הפעולות ...',
        '    });',
        '',
        '    מיכל.addEventListener("input", function(e) {',
        '      var מזהה = e.target.id;',
        '      // טיפול בפסי גלילה לפי מזהה',
        '      if (מזהה === "לשונית1-slider") { מצב.לשונית1.ערך = parseInt(e.target.value); עדכן_לשונית1(); }',
        '    });',
        '',
        '    // === אתחול ===',
        '    עדכן_לשונית1(); עדכן_לשונית2();',
        '    window[שם] = { גרסה: "1.0.0" };',
        '  })();',
        '});'
    ];
    // סגירת תג סקריפט בצורה בטוחה
    return שורות.join('\\n') + '\\n</' + 'script>';
}
```

**חשוב - התאמת מזהים:**
ודא שהמזהים בקוד תואמים בדיוק לתוכן:
- פסי גלילה: `[שם-לשונית]-[שדה]-slider` (לדוגמה: `basic-gross-slider`)
- ערכים: `[שם-לשונית]-[שדה]-value` (לדוגמה: `basic-gross-value`)  
- תוצאות: `[שם-לשונית]-result-[שדה]` (לדוגמה: `basic-result-net`)

### 9. קרדיט דינמי לעמוד הבית
הקרדיט תמיד מפנה לעמוד הבית עם:
- **שם המחשבון דינמי** - משתנה לפי סוג המחשבון
- **טקסט קבוע**: "רק תבקש פיננסים"
- **קישור ללא העברת דירוג** לעמוד הבית

```javascript
// דוגמאות לשמות מחשבונים:
const שמות_מחשבונים = {
    'שכר': 'ברוטו נטו',
    'הלוואה': 'הלוואות',
    'משכנתא': 'משכנתא',
    'פנסיה': 'פנסיה',
    'חיסכון': 'חיסכון',
    'ריבית': 'ריבית דריבית'
};
```

```html
<!-- תבנית הקרדיט -->
<p style="text-align:center; font-size:0.9em; margin-top:20px; color:#666;">
    מחשבון [שם דינמי] פותח על ידי 
    <a href="https://loan-israel.co.il/" target="_blank" rel="nofollow noopener" 
       style="color:#1e5490; text-decoration:underline;">
       רק תבקש פיננסים
    </a>
</p>
```

---

## 🔍 מידע מובנה לגוגל - דרישות חובה

### 1. מבנה שאלות נפוצות לגוגל
```json
{
  "@context": "https://schema.org",
  "@type": "FAQPage",
  "mainEntity": [
    {
      "@type": "Question",
      "name": "שאלה?",
      "acceptedAnswer": {
        "@type": "Answer",
        "text": "תשובה..."
      }
    }
  ]
}
```

### 2. מבנה מוצר פיננסי לגוגל
```json
{
  "@context": "https://schema.org",
  "@type": "FinancialProduct",
  "name": "שם המחשבון",
  "description": "תיאור המחשבון",
  "category": "מחשבון פיננסי",
  "featureList": ["יכולת 1", "יכולת 2"],
  "provider": {
    "@type": "Organization",
    "name": "רק תבקש - אפטריו בע״מ",
    "url": "https://loan-israel.co.il"
  },
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "ILS"
  }
}
```

### 3. מבנה מדריך שלב אחר שלב לגוגל
```json
{
  "@context": "https://schema.org",
  "@type": "HowTo",
  "name": "איך להשתמש במחשבון",
  "step": [
    {
      "@type": "HowToStep",
      "name": "שלב 1",
      "text": "הסבר..."
    }
  ]
}
```

---

## ⚠️ אזורים חובה בכל עמוד

### 1. אזור בדיקת זכאות עם כפתורים כפולים
```html
<div class="wpc-calc-[נושא]-[מזהה]-awg-section">
    <div class="wpc-calc-[נושא]-[מזהה]-awg-container">
        <div class="wpc-calc-[נושא]-[מזהה]-cta-buttons-wrapper">
            <!-- כפתור אדום - פותח טופס -->
            <button class="wpc-calc-[נושא]-[מזהה]-cta-btn" 
                    data-action="open-awg">
                בדוק זכאות להלוואה עכשיו - קבל הצעה מיידית!
            </button>
            <!-- כפתור הטמעה -->
            <button class="wpc-calc-[נושא]-[מזהה]-cta-embed" 
                    data-action="scroll-to-embed">
                🎁 רוצה להוסיף את המחשבון בחינם לאתרך? לחץ כאן!
            </button>
        </div>
        <div class="wpc-calc-[נושא]-[מזהה]-awg-content">
            <div class="wpc-calc-[נושא]-[מזהה]-shortcode-item">
                [awg postid="XXXXX"]
            </div>
        </div>
    </div>
</div>
```

---

## 📊 נוסחאות פיננסיות נפוצות

### תשלום חודשי להלוואה (PMT)
```javascript
function חשב_תשלום_חודשי(סכום, ריבית_שנתית, חודשים) {
    const ריבית_חודשית = ריבית_שנתית / 100 / 12;
    if (ריבית_חודשית === 0) return סכום / חודשים;
    return סכום * (ריבית_חודשית * Math.pow(1 + ריבית_חודשית, חודשים)) / 
           (Math.pow(1 + ריבית_חודשית, חודשים) - 1);
}
```

### ערך עתידי עם הפקדות (FV)
```javascript
function חשב_ערך_עתידי(סכום, ריבית_שנתית, שנים, הפקדה_חודשית) {
    const ריבית_חודשית = ריבית_שנתית / 100 / 12;
    const חודשים = שנים * 12;
    
    // ערך עתידי של הסכום ההתחלתי
    const ערך_סכום = סכום * Math.pow(1 + ריבית_חודשית, חודשים);
    
    // ערך עתידי של ההפקדות החודשיות
    const ערך_הפקדות = הפקדה_חודשית * 
        ((Math.pow(1 + ריבית_חודשית, חודשים) - 1) / ריבית_חודשית);
    
    return ערך_סכום + ערך_הפקדות;
}
```

### ריבית דריבית פשוטה
```javascript
function ריבית_דריבית(סכום, ריבית_שנתית, שנים, תדירות_חישוב = 12) {
    return סכום * Math.pow(1 + ריבית_שנתית / 100 / תדירות_חישוב, 
                            תדירות_חישוב * שנים);
}
```

### חישוב הפקדה נדרשת להגעה ליעד
```javascript
function חשב_הפקדה_נדרשת(יעד, סכום_התחלתי, ריבית_שנתית, שנים) {
    const ריבית_חודשית = ריבית_שנתית / 100 / 12;
    const חודשים = שנים * 12;
    
    const ערך_סכום_התחלתי = סכום_התחלתי * Math.pow(1 + ריבית_חודשית, חודשים);
    const נותר = יעד - ערך_סכום_התחלתי;
    
    if (נותר <= 0) return 0;
    
    return נותר / ((Math.pow(1 + ריבית_חודשית, חודשים) - 1) / ריבית_חודשית);
}
```

---

## ✅ רשימת בדיקה סופית

### לפני יצירת העמוד:
- [ ] וודא קידומת ייחודית: `wpc-calc-[נושא]-[4אותיות]-`
- [ ] וודא שם מערכת ייחודי: `WPC_Calc[נושא]_[מזהה]`
- [ ] אסוף את כל המידע הנדרש (נושא, לשוניות, שאלות נפוצות)

### מבנה העמוד:
- [ ] התחלה עם קוד הגדרת מסך (בלי תגי מסמך מלאים!)
- [ ] משתני צבע מוגדרים
- [ ] כל השמות עם קידומת ייחודית
- [ ] כל העיצוב עם `!important`
- [ ] התאמה למסכים: 768 פיקסל, 480 פיקסל, 375 פיקסל

### מחשבון:
- [ ] לשוניות עובדות (2-5)
- [ ] לשוניות עם ירידה לשורה (ללא גלילה אופקית!)
- [ ] פסי גלילה עם עדכון ערכים
- [ ] כפתורי בחירה עם מצב פעיל
- [ ] נוסחאות מדויקות
- [ ] תוצאות מתעדכנות בזמן אמת

### אזור בדיקת זכאות:
- [ ] כפתור אדום "בדוק זכאות"
- [ ] כפתור "הוסף את המחשבון בחינם"
- [ ] תוכן הטופס מוסתר עד לחיצה
- [ ] קיצור דרך [awg postid="XXXXX"]

### מערכת הטמעה:
- [ ] הוראות הטמעה ברורות
- [ ] כפתור העתקת קוד
- [ ] 10 עיגולי צבע (ללא טקסט, רק טולטיפ) + בוחר צבע חופשי
- [ ] קוד כולל עיצוב + תוכן + קוד עצמאי
- [ ] קוד עטוף בהמתנה לטעינת עמוד
- [ ] קוד בתחביר ישן יותר (var, function רגיל)
- [ ] סגירת תג סקריפט בטוחה
- [ ] מזהים בקוד תואמים לתוכן בדיוק
- [ ] כל הלשוניות עובדות בהטמעה
- [ ] תצוגה מקדימה חיה עובדת (כל הלשוניות)
- [ ] כפתור העתקה עם צבע נבחר
- [ ] תנאי שימוש ברורים

### תוכן:
- [ ] כותרת ראשית (H1)
- [ ] תאריך עדכון [current_date]
- [ ] תוכן מותאם למנועי חיפוש
- [ ] שאלות נפוצות עם 5-10 שאלות
- [ ] מידע מובנה לגוגל מלא (שאלות, מוצר, מדריך)

### אזורים אסורים (לא להוסיף!):
- [ ] **אין דיסקליימר** - לא להוסיף `wpc-disclaimer`
- [ ] **אין Related Posts** - לא להוסיף `[related-shortcode-instert]`

### קוד:
- [ ] פונקציה עצמאית עם שם ייחודי
- [ ] טיפול באירועים מרכזי
- [ ] מקסימום 10 מאזיני אירועים
- [ ] פונקציות הטמעה מלאות
- [ ] תצוגה מקדימה עובדת עם כל הלשוניות

### בדיקות סופיות:
- [ ] עברית 100% (אין אנגלית בממשק!)
- [ ] מתאים לנייד - 375 פיקסל עובד
- [ ] כל הכפתורים פעילים
- [ ] הטמעה חיצונית עובדת (כל הלשוניות, כל הפסי גלילה)
- [ ] קרדיט דינמי מופיע בקוד המיוצא

---

## 📁 תיקיית פיתוח ודוגמאות

### תיקיית עבודה:
```
C:\Users\eyal\loan-israel-updaets\loan-israel-updates\מחשבונים חדשים\
```

כל המחשבונים החדשים נוצרים ונשמרים בתיקייה זו.

### קבצי ייחוס:
| קובץ | תיאור |
|------|-------|
| `מחשבון חיסכון.html` | דוגמה מלאה עם כל האלמנטים |
| `מחשבון ברוטו נטו.html` | מחשבון שכר עם מערכת הטמעה מלאה |
| `מחשבון משכנתא.html` | מחשבון מורכב עם לשוניות מרובות |
| `מחשבון ריבית דה ריבית.html` | דוגמה לחישובים פיננסיים |

### יצירת מחשבון חדש:
1. צור קובץ חדש בתיקייה `מחשבונים חדשים`
2. השתמש בקידומת ייחודית: `wpc-calc-[נושא]-[4אותיות]-`
3. עקוב אחרי המבנה בקבצי הייחוס

---

## 🚀 הפעלת הסוכן

```
נושא: [הכנס נושא]
נושא לזיהוי: [הכנס שם קצר באנגלית]
כותרת: [הכנס כותרת ראשית]
לשוניות: [הכנס 2-5 לשוניות עם פרטים]
מזהה טופס: [הכנס מספר]
שאלות נפוצות: [הכנס 5-10 שאלות ותשובות]
```

הסוכן יפיק עמוד מלא ומוכן להדבקה בוורדפרס!

---

## 📖 מילון מונחים - עברית פשוטה

כדי שכל אדם יבין את המושגים, הנה תרגום למונחים טכניים:

| מונח טכני (אנגלית) | מה זה אומר בעברית פשוטה |
|-------------------|-------------------------|
| **HTML** | קוד שבונה את מבנה העמוד |
| **CSS** | קוד שמעצב איך הדברים נראים (צבעים, גדלים, מרווחים) |
| **JavaScript/JS** | קוד שגורם לדברים לפעול (חישובים, לחיצות) |
| **DOM** | מבנה העמוד שהדפדפן מבין |
| **Container** | מיכל / עטיפה שמכילה אלמנטים |
| **Wrapper** | עטיפה חיצונית |
| **Responsive** | מתאים לכל גודל מסך (מחשב, טאבלט, נייד) |
| **Viewport** | השטח הנראה במסך |
| **Event** | אירוע (לחיצה, גלילה, הקלדה) |
| **Event Listener** | מאזין לאירועים - קוד שמחכה שמשהו יקרה |
| **Function** | פונקציה - קטע קוד שעושה משהו מסוים |
| **Variable** | משתנה - מקום לשמירת ערך |
| **Tab** | לשונית - כמו בתיקייה עם אוזניות |
| **Slider** | פס גלילה - מחליק שאפשר לגרור ימינה-שמאלה |
| **Toggle** | החלפת מצב (פתוח/סגור, דלוק/כבוי) |
| **Accordion** | אקורדיון - רשימה שנפתחת ונסגרת בלחיצה |
| **Clone** | שכפול - העתקה מדויקת |
| **Schema.org** | מידע מובנה שגוגל מבין |
| **SEO** | אופטימיזציה למנועי חיפוש - שיפור הדירוג בגוגל |
| **Prefix** | קידומת - תחילית ייחודית לכל השמות |
| **Namespace** | שם מערכת ייחודי - מונע התנגשויות עם קוד אחר |
| **IIFE** | פונקציה שמורצת מיד - מבודדת את הקוד |
| **Media Query** | כלל התאמה - מגדיר עיצוב שונה לגדלי מסך שונים |
| **Tooltip** | טולטיפ - הסבר שמופיע כשמרחפים עם העכבר |
| **CTA** | קריאה לפעולה - כפתור שמזמין ללחוץ |
| **AWG** | טופס בדיקת זכאות |
| **Embed** | הטמעה - הוספת המחשבון לאתר אחר |
| **Shortcode** | קיצור דרך - קוד קצר שמופעל אוטומטית |
| **nofollow** | ללא העברת דירוג - לא מעביר "כוח" לקישור |
| **JSON** | פורמט נתונים מובנה - מידע מאורגן |
| **PMT** | נוסחת תשלום חודשי להלוואה |
| **FV** | ערך עתידי - כמה יהיה שווה הכסף בעתיד |

---

**נוצר על ידי: Cursor AI**  
**תאריך: דצמבר 2025**  
**גרסה: 2.0 - גרסה בעברית פשוטה**
